{"ast":null,"code":"export const sendMessage = message => {\n  return (dispatch, getState, {\n    getFirebase,\n    getFirestore\n  }) => {\n    const firebase = getFirebase();\n    const firestore = firebase.firestore();\n    const auth = firebase.auth();\n    const {\n      uid,\n      photoURL\n    } = auth.currentUser;\n    firestore.collection('messages').add({\n      content: message,\n      uid,\n      photoURL,\n      createAt: firebase.firestore.FieldValue.serverTimestamp()\n    }).then(res => {\n      dispatch({\n        type: 'MESSAGE_SENT'\n      });\n    }).catch(err => {\n      console.error(err);\n      dispatch({\n        type: 'MESSAGE_ERROR'\n      });\n    });\n  };\n};","map":{"version":3,"sources":["/home/joaquim/internship/superchat/src/store/actions/chatActions.js"],"names":["sendMessage","message","dispatch","getState","getFirebase","getFirestore","firebase","firestore","auth","uid","photoURL","currentUser","collection","add","content","createAt","FieldValue","serverTimestamp","then","res","type","catch","err","console","error"],"mappings":"AAAA,OAAO,MAAMA,WAAW,GAAIC,OAAD,IAAa;AACpC,SAAO,CAAEC,QAAF,EAAYC,QAAZ,EAAsB;AAAEC,IAAAA,WAAF;AAAeC,IAAAA;AAAf,GAAtB,KAAwD;AAE3D,UAAMC,QAAQ,GAAGF,WAAW,EAA5B;AACA,UAAMG,SAAS,GAAGD,QAAQ,CAACC,SAAT,EAAlB;AACA,UAAMC,IAAI,GAAGF,QAAQ,CAACE,IAAT,EAAb;AAEA,UAAM;AAAEC,MAAAA,GAAF;AAAOC,MAAAA;AAAP,QAAoBF,IAAI,CAACG,WAA/B;AAEAJ,IAAAA,SAAS,CAACK,UAAV,CAAqB,UAArB,EAAiCC,GAAjC,CAAqC;AACjCC,MAAAA,OAAO,EAAEb,OADwB;AAEjCQ,MAAAA,GAFiC;AAGjCC,MAAAA,QAHiC;AAIjCK,MAAAA,QAAQ,EAAET,QAAQ,CAACC,SAAT,CAAmBS,UAAnB,CAA8BC,eAA9B;AAJuB,KAArC,EAKGC,IALH,CAKSC,GAAG,IAAI;AACZjB,MAAAA,QAAQ,CAAC;AAACkB,QAAAA,IAAI,EAAE;AAAP,OAAD,CAAR;AACH,KAPD,EAOGC,KAPH,CAOUC,GAAG,IAAI;AACbC,MAAAA,OAAO,CAACC,KAAR,CAAcF,GAAd;AACApB,MAAAA,QAAQ,CAAC;AAAEkB,QAAAA,IAAI,EAAE;AAAR,OAAD,CAAR;AACH,KAVD;AAWH,GAnBD;AAoBH,CArBM","sourcesContent":["export const sendMessage = (message) => {\n    return ( dispatch, getState, { getFirebase, getFirestore }) => {\n\n        const firebase = getFirebase();\n        const firestore = firebase.firestore();\n        const auth = firebase.auth();\n\n        const { uid, photoURL } = auth.currentUser;\n\n        firestore.collection('messages').add({\n            content: message,\n            uid,\n            photoURL,\n            createAt: firebase.firestore.FieldValue.serverTimestamp(),\n        }).then( res => {\n            dispatch({type: 'MESSAGE_SENT'});\n        }).catch( err => {\n            console.error(err);\n            dispatch({ type: 'MESSAGE_ERROR'})\n        });\n    }\n}"]},"metadata":{},"sourceType":"module"}