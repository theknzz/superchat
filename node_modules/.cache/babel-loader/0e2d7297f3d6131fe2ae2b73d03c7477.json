{"ast":null,"code":"import Database from './database.js';\n\nfunction noop() {}\n\nfunction run(fn) {\n  return fn();\n}\n\nfunction blank_object() {\n  return Object.create(null);\n}\n\nfunction run_all(fns) {\n  fns.forEach(run);\n}\n\nfunction is_function(thing) {\n  return typeof thing === 'function';\n}\n\nfunction safe_not_equal(a, b) {\n  return a != a ? b == b : a !== b || a && typeof a === 'object' || typeof a === 'function';\n}\n\nfunction is_empty(obj) {\n  return Object.keys(obj).length === 0;\n}\n\nfunction action_destroyer(action_result) {\n  return action_result && is_function(action_result.destroy) ? action_result.destroy : noop;\n}\n\nfunction append(target, node) {\n  target.appendChild(node);\n}\n\nfunction insert(target, node, anchor) {\n  target.insertBefore(node, anchor || null);\n}\n\nfunction detach(node) {\n  node.parentNode.removeChild(node);\n}\n\nfunction element(name) {\n  return document.createElement(name);\n}\n\nfunction text(data) {\n  return document.createTextNode(data);\n}\n\nfunction listen(node, event, handler, options) {\n  node.addEventListener(event, handler, options);\n  return () => node.removeEventListener(event, handler, options);\n}\n\nfunction attr(node, attribute, value) {\n  if (value == null) node.removeAttribute(attribute);else if (node.getAttribute(attribute) !== value) node.setAttribute(attribute, value);\n}\n\nfunction children(element) {\n  return Array.from(element.childNodes);\n}\n\nfunction set_data(text, data) {\n  data = '' + data;\n  if (text.wholeText !== data) text.data = data;\n}\n\nfunction set_input_value(input, value) {\n  input.value = value == null ? '' : value;\n}\n\nfunction set_style(node, key, value, important) {\n  node.style.setProperty(key, value, important ? 'important' : '');\n}\n\nlet current_component;\n\nfunction set_current_component(component) {\n  current_component = component;\n}\n\nfunction get_current_component() {\n  if (!current_component) throw new Error(`Function called outside component initialization`);\n  return current_component;\n}\n\nfunction onMount(fn) {\n  get_current_component().$$.on_mount.push(fn);\n}\n\nfunction onDestroy(fn) {\n  get_current_component().$$.on_destroy.push(fn);\n}\n\nconst dirty_components = [];\nconst binding_callbacks = [];\nconst render_callbacks = [];\nconst flush_callbacks = [];\nconst resolved_promise = Promise.resolve();\nlet update_scheduled = false;\n\nfunction schedule_update() {\n  if (!update_scheduled) {\n    update_scheduled = true;\n    resolved_promise.then(flush);\n  }\n}\n\nfunction tick() {\n  schedule_update();\n  return resolved_promise;\n}\n\nfunction add_render_callback(fn) {\n  render_callbacks.push(fn);\n}\n\nlet flushing = false;\nconst seen_callbacks = new Set();\n\nfunction flush() {\n  if (flushing) return;\n  flushing = true;\n\n  do {\n    // first, call beforeUpdate functions\n    // and update components\n    for (let i = 0; i < dirty_components.length; i += 1) {\n      const component = dirty_components[i];\n      set_current_component(component);\n      update(component.$$);\n    }\n\n    dirty_components.length = 0;\n\n    while (binding_callbacks.length) binding_callbacks.pop()(); // then, once components are updated, call\n    // afterUpdate functions. This may cause\n    // subsequent updates...\n\n\n    for (let i = 0; i < render_callbacks.length; i += 1) {\n      const callback = render_callbacks[i];\n\n      if (!seen_callbacks.has(callback)) {\n        // ...so guard against infinite loops\n        seen_callbacks.add(callback);\n        callback();\n      }\n    }\n\n    render_callbacks.length = 0;\n  } while (dirty_components.length);\n\n  while (flush_callbacks.length) {\n    flush_callbacks.pop()();\n  }\n\n  update_scheduled = false;\n  flushing = false;\n  seen_callbacks.clear();\n}\n\nfunction update($$) {\n  if ($$.fragment !== null) {\n    $$.update();\n    run_all($$.before_update);\n    const dirty = $$.dirty;\n    $$.dirty = [-1];\n    $$.fragment && $$.fragment.p($$.ctx, dirty);\n    $$.after_update.forEach(add_render_callback);\n  }\n}\n\nconst outroing = new Set();\n\nfunction transition_in(block, local) {\n  if (block && block.i) {\n    outroing.delete(block);\n    block.i(local);\n  }\n}\n\nconst globals = typeof window !== 'undefined' ? window : typeof globalThis !== 'undefined' ? globalThis : global;\n\nfunction destroy_block(block, lookup) {\n  block.d(1);\n  lookup.delete(block.key);\n}\n\nfunction update_keyed_each(old_blocks, dirty, get_key, dynamic, ctx, list, lookup, node, destroy, create_each_block, next, get_context) {\n  let o = old_blocks.length;\n  let n = list.length;\n  let i = o;\n  const old_indexes = {};\n\n  while (i--) old_indexes[old_blocks[i].key] = i;\n\n  const new_blocks = [];\n  const new_lookup = new Map();\n  const deltas = new Map();\n  i = n;\n\n  while (i--) {\n    const child_ctx = get_context(ctx, list, i);\n    const key = get_key(child_ctx);\n    let block = lookup.get(key);\n\n    if (!block) {\n      block = create_each_block(key, child_ctx);\n      block.c();\n    } else if (dynamic) {\n      block.p(child_ctx, dirty);\n    }\n\n    new_lookup.set(key, new_blocks[i] = block);\n    if (key in old_indexes) deltas.set(key, Math.abs(i - old_indexes[key]));\n  }\n\n  const will_move = new Set();\n  const did_move = new Set();\n\n  function insert(block) {\n    transition_in(block, 1);\n    block.m(node, next);\n    lookup.set(block.key, block);\n    next = block.first;\n    n--;\n  }\n\n  while (o && n) {\n    const new_block = new_blocks[n - 1];\n    const old_block = old_blocks[o - 1];\n    const new_key = new_block.key;\n    const old_key = old_block.key;\n\n    if (new_block === old_block) {\n      // do nothing\n      next = new_block.first;\n      o--;\n      n--;\n    } else if (!new_lookup.has(old_key)) {\n      // remove old block\n      destroy(old_block, lookup);\n      o--;\n    } else if (!lookup.has(new_key) || will_move.has(new_key)) {\n      insert(new_block);\n    } else if (did_move.has(old_key)) {\n      o--;\n    } else if (deltas.get(new_key) > deltas.get(old_key)) {\n      did_move.add(new_key);\n      insert(new_block);\n    } else {\n      will_move.add(old_key);\n      o--;\n    }\n  }\n\n  while (o--) {\n    const old_block = old_blocks[o];\n    if (!new_lookup.has(old_block.key)) destroy(old_block, lookup);\n  }\n\n  while (n) insert(new_blocks[n - 1]);\n\n  return new_blocks;\n}\n\nfunction mount_component(component, target, anchor) {\n  const {\n    fragment,\n    on_mount,\n    on_destroy,\n    after_update\n  } = component.$$;\n  fragment && fragment.m(target, anchor); // onMount happens before the initial afterUpdate\n\n  add_render_callback(() => {\n    const new_on_destroy = on_mount.map(run).filter(is_function);\n\n    if (on_destroy) {\n      on_destroy.push(...new_on_destroy);\n    } else {\n      // Edge case - component was destroyed immediately,\n      // most likely as a result of a binding initialising\n      run_all(new_on_destroy);\n    }\n\n    component.$$.on_mount = [];\n  });\n  after_update.forEach(add_render_callback);\n}\n\nfunction destroy_component(component, detaching) {\n  const $$ = component.$$;\n\n  if ($$.fragment !== null) {\n    run_all($$.on_destroy);\n    $$.fragment && $$.fragment.d(detaching); // TODO null out other refs, including component.$$ (but need to\n    // preserve final state?)\n\n    $$.on_destroy = $$.fragment = null;\n    $$.ctx = [];\n  }\n}\n\nfunction make_dirty(component, i) {\n  if (component.$$.dirty[0] === -1) {\n    dirty_components.push(component);\n    schedule_update();\n    component.$$.dirty.fill(0);\n  }\n\n  component.$$.dirty[i / 31 | 0] |= 1 << i % 31;\n}\n\nfunction init(component, options, instance, create_fragment, not_equal, props, dirty = [-1]) {\n  const parent_component = current_component;\n  set_current_component(component);\n  const prop_values = options.props || {};\n  const $$ = component.$$ = {\n    fragment: null,\n    ctx: null,\n    // state\n    props,\n    update: noop,\n    not_equal,\n    bound: blank_object(),\n    // lifecycle\n    on_mount: [],\n    on_destroy: [],\n    before_update: [],\n    after_update: [],\n    context: new Map(parent_component ? parent_component.$$.context : []),\n    // everything else\n    callbacks: blank_object(),\n    dirty,\n    skip_bound: false\n  };\n  let ready = false;\n  $$.ctx = instance ? instance(component, prop_values, (i, ret, ...rest) => {\n    const value = rest.length ? rest[0] : ret;\n\n    if ($$.ctx && not_equal($$.ctx[i], $$.ctx[i] = value)) {\n      if (!$$.skip_bound && $$.bound[i]) $$.bound[i](value);\n      if (ready) make_dirty(component, i);\n    }\n\n    return ret;\n  }) : [];\n  $$.update();\n  ready = true;\n  run_all($$.before_update); // `false` as a special case of no DOM component\n\n  $$.fragment = create_fragment ? create_fragment($$.ctx) : false;\n\n  if (options.target) {\n    if (options.hydrate) {\n      const nodes = children(options.target); // eslint-disable-next-line @typescript-eslint/no-non-null-assertion\n\n      $$.fragment && $$.fragment.l(nodes);\n      nodes.forEach(detach);\n    } else {\n      // eslint-disable-next-line @typescript-eslint/no-non-null-assertion\n      $$.fragment && $$.fragment.c();\n    }\n\n    if (options.intro) transition_in(component.$$.fragment);\n    mount_component(component, options.target, options.anchor);\n    flush();\n  }\n\n  set_current_component(parent_component);\n}\n\nlet SvelteElement;\n\nif (typeof HTMLElement === 'function') {\n  SvelteElement = class extends HTMLElement {\n    constructor() {\n      super();\n      this.attachShadow({\n        mode: 'open'\n      });\n    }\n\n    connectedCallback() {\n      // @ts-ignore todo: improve typings\n      for (const key in this.$$.slotted) {\n        // @ts-ignore todo: improve typings\n        this.appendChild(this.$$.slotted[key]);\n      }\n    }\n\n    attributeChangedCallback(attr, _oldValue, newValue) {\n      this[attr] = newValue;\n    }\n\n    $destroy() {\n      destroy_component(this, 1);\n      this.$destroy = noop;\n    }\n\n    $on(type, callback) {\n      // TODO should this delegate to addEventListener?\n      const callbacks = this.$$.callbacks[type] || (this.$$.callbacks[type] = []);\n      callbacks.push(callback);\n      return () => {\n        const index = callbacks.indexOf(callback);\n        if (index !== -1) callbacks.splice(index, 1);\n      };\n    }\n\n    $set($$props) {\n      if (this.$$set && !is_empty($$props)) {\n        this.$$.skip_bound = true;\n        this.$$set($$props);\n        this.$$.skip_bound = false;\n      }\n    }\n\n  };\n}\n\nvar enI18n = {\n  categoriesLabel: 'Categories',\n  emojiUnsupportedMessage: 'Your browser does not support color emoji.',\n  favoritesLabel: 'Favorites',\n  loadingMessage: 'Loadingâ€¦',\n  networkErrorMessage: 'Could not load emoji. Try refreshing.',\n  regionLabel: 'Emoji picker',\n  searchDescription: 'When search results are available, press up or down to select and enter to choose.',\n  searchLabel: 'Search',\n  searchResultsLabel: 'Search results',\n  skinToneDescription: 'When expanded, press up or down to select and enter to choose.',\n  skinToneLabel: 'Choose a skin tone (currently {skinTone})',\n  skinTonesLabel: 'Skin tones',\n  skinTones: ['Default', 'Light', 'Medium-Light', 'Medium', 'Medium-Dark', 'Dark'],\n  categories: {\n    custom: 'Custom',\n    'smileys-emotion': 'Smileys and emoticons',\n    'people-body': 'People and body',\n    'animals-nature': 'Animals and nature',\n    'food-drink': 'Food and drink',\n    'travel-places': 'Travel and places',\n    activities: 'Activities',\n    objects: 'Objects',\n    symbols: 'Symbols',\n    flags: 'Flags'\n  }\n}; // via https://unpkg.com/browse/emojibase-data@5.0.1/meta/groups.json\n\nconst allGroups = [[-1, 'âœ¨', 'custom'], [0, 'ðŸ˜€', 'smileys-emotion'], [1, 'ðŸ‘‹', 'people-body'], [3, 'ðŸ±', 'animals-nature'], [4, 'ðŸŽ', 'food-drink'], [5, 'ðŸ ï¸', 'travel-places'], [6, 'âš½', 'activities'], [7, 'ðŸ“', 'objects'], [8, 'â›”ï¸', 'symbols'], [9, 'ðŸ', 'flags']].map(([id, emoji, name]) => ({\n  id,\n  emoji,\n  name\n}));\nconst groups = allGroups.slice(1);\nconst customGroup = allGroups[0];\nconst DEFAULT_DATA_SOURCE = 'https://cdn.jsdelivr.net/npm/emojibase-data@5/en/data.json';\nconst DEFAULT_LOCALE = 'en';\nconst MIN_SEARCH_TEXT_LENGTH = 2;\nconst NUM_SKIN_TONES = 6;\nconst rIC = typeof requestIdleCallback === 'function' ? requestIdleCallback : setTimeout; // check for ZWJ (zero width joiner) character\n\nfunction hasZwj(emoji) {\n  return emoji.unicode.includes('\\u200d');\n} // @rollup/plugin-strip doesn't properly strip performance.mark/measure\n\n\nfunction stop(str) {} // Find one good representative emoji to test. Ideally it should have color in the center.\n// For some inspiration, see: https://about.gitlab.com/blog/2018/05/30/journey-in-native-unicode-emoji/\n\n\nconst versionsAndTestEmoji = {\n  'ðŸ˜ƒ': 0.6,\n  'ðŸ˜ï¸': 0.7,\n  'ðŸ˜€': 1,\n  'ðŸ‘ï¸â€ðŸ—¨ï¸': 2,\n  'ðŸ¤£': 3,\n  'ðŸ‘±â€â™€ï¸': 4,\n  'ðŸ¤©': 5,\n  'ðŸ¥°': 11,\n  // smiling face with hearts\n  'ðŸ¥»': 12,\n  // sari\n  'ðŸ§‘â€ðŸ¦°': 12.1,\n  // person: red hair\n  'ðŸ¥²': 13 // smiling face with tear\n\n};\nconst TIMEOUT_BEFORE_LOADING_MESSAGE = 1000; // 1 second\n\nconst DEFAULT_SKIN_TONE_EMOJI = 'ðŸ–ï¸';\nconst DEFAULT_NUM_COLUMNS = 8; // Based on https://fivethirtyeight.com/features/the-100-most-used-emojis/ and\n// https://blog.emojipedia.org/facebook-reveals-most-and-least-used-emojis/ with\n// a bit of my own curation. (E.g. avoid the \"OK\" gesture because of connotations:\n// https://emojipedia.org/ok-hand/)\n\nconst MOST_COMMONLY_USED_EMOJI = ['ðŸ˜Š', 'ðŸ˜’', 'â™¥ï¸', 'ðŸ‘ï¸', 'ðŸ˜', 'ðŸ˜‚', 'ðŸ˜­', 'â˜ºï¸', 'ðŸ˜”', 'ðŸ˜©', 'ðŸ˜', 'ðŸ’•', 'ðŸ™Œ', 'ðŸ˜˜'];\nconst FONT_FAMILY = '\"Apple Color Emoji\",\"Segoe UI Emoji\",\"Segoe UI Symbol\",' + '\"Twemoji Mozilla\",\"Noto Color Emoji\",\"EmojiOne Color\",\"Android Emoji\",sans-serif'; // Test if an emoji is supported by rendering it to canvas and checking that the color is not black\n\nconst getTextFeature = (text, color) => {\n  try {\n    const canvas = document.createElement('canvas');\n    canvas.width = canvas.height = 1;\n    const ctx = canvas.getContext('2d');\n    ctx.textBaseline = 'top';\n    ctx.font = `100px ${FONT_FAMILY}`;\n    ctx.fillStyle = color;\n    ctx.scale(0.01, 0.01);\n    ctx.fillText(text, 0, 0);\n    return ctx.getImageData(0, 0, 1, 1).data;\n  } catch (e) {\n    /* ignore, return undefined */\n  }\n};\n\nconst compareFeatures = (feature1, feature2) => {\n  const feature1Str = [...feature1].join(',');\n  const feature2Str = [...feature2].join(','); // This is RGBA, so for 0,0,0, we are checking that the first RGB is not all zeroes.\n  // Most of the time when unsupported this is 0,0,0,0, but on Chrome on Mac it is\n  // 0,0,0,61 - there is a transparency here.\n\n  return feature1Str === feature2Str && !feature1Str.startsWith('0,0,0,');\n};\n\nfunction testColorEmojiSupported(text) {\n  // Render white and black and then compare them to each other and ensure they're the same\n  // color, and neither one is black. This shows that the emoji was rendered in color.\n  const feature1 = getTextFeature(text, '#000');\n  const feature2 = getTextFeature(text, '#fff');\n  return feature1 && feature2 && compareFeatures(feature1, feature2);\n} // rather than check every emoji ever, which would be expensive, just check some representatives from the\n\n\nfunction determineEmojiSupportLevel() {\n  let res;\n\n  for (const [emoji, version] of Object.entries(versionsAndTestEmoji)) {\n    /* istanbul ignore else */\n    if (testColorEmojiSupported(emoji)) {\n      res = version;\n    } else {\n      break;\n    }\n  }\n\n  return res;\n} // @rollup/plugin-strip doesn't strip console.logs properly\n\n\nfunction log() {} // Check which emojis we know for sure aren't supported, based on Unicode version level\n\n\nconst emojiSupportLevelPromise = new Promise(resolve => rIC(() => resolve(determineEmojiSupportLevel()) // delay so ideally this can run while IDB is first populating\n)); // determine which emojis containing ZWJ (zero width joiner) characters\n// are supported (rendered as one glyph) rather than unsupported (rendered as two or more glyphs)\n\nconst supportedZwjEmojis = new Map();\nconst VARIATION_SELECTOR = '\\ufe0f';\nconst SKINTONE_MODIFIER = '\\ud83c';\nconst ZWJ = '\\u200d';\nconst LIGHT_SKIN_TONE = 0x1F3FB;\nconst LIGHT_SKIN_TONE_MODIFIER = 0xdffb; // TODO: this is a naive implementation, we can improve it later\n// It's only used for the skintone picker, so as long as people don't customize with\n// really exotic emoji then it should work fine\n\nfunction applySkinTone(str, skinTone) {\n  if (skinTone === 0) {\n    return str;\n  }\n\n  const zwjIndex = str.indexOf(ZWJ);\n\n  if (zwjIndex !== -1) {\n    return str.substring(0, zwjIndex) + String.fromCodePoint(LIGHT_SKIN_TONE + skinTone - 1) + str.substring(zwjIndex);\n  }\n\n  if (str.endsWith(VARIATION_SELECTOR)) {\n    str = str.substring(0, str.length - 1);\n  }\n\n  return str + SKINTONE_MODIFIER + String.fromCodePoint(LIGHT_SKIN_TONE_MODIFIER + skinTone - 1);\n}\n\nfunction halt(event) {\n  event.preventDefault();\n  event.stopPropagation();\n} // Implementation left/right or up/down navigation, circling back when you\n// reach the start/end of the list\n\n\nfunction incrementOrDecrement(decrement, val, arr) {\n  val += decrement ? -1 : 1;\n\n  if (val < 0) {\n    val = arr.length - 1;\n  } else if (val >= arr.length) {\n    val = 0;\n  }\n\n  return val;\n} // like lodash's uniqBy but much smaller\n\n\nfunction uniqBy(arr, func) {\n  const set = new Set();\n  const res = [];\n\n  for (const item of arr) {\n    const key = func(item);\n\n    if (!set.has(key)) {\n      set.add(key);\n      res.push(item);\n    }\n  }\n\n  return res;\n} // We don't need all the data on every emoji, and there are specific things we need\n// for the UI, so build a \"view model\" from the emoji object we got from the database\n\n\nfunction summarizeEmojisForUI(emojis, emojiSupportLevel) {\n  const toSimpleSkinsMap = skins => {\n    const res = {};\n\n    for (const skin of skins) {\n      // ignore arrays like [1, 2] with multiple skin tones\n      // also ignore variants that are in an unsupported emoji version\n      // (these do exist - variants from a different version than their base emoji)\n      if (typeof skin.tone === 'number' && skin.version <= emojiSupportLevel) {\n        res[skin.tone] = skin.unicode;\n      }\n    }\n\n    return res;\n  };\n\n  return emojis.map(({\n    unicode,\n    skins,\n    shortcodes,\n    url,\n    name,\n    category\n  }) => ({\n    unicode,\n    name,\n    shortcodes,\n    url,\n    category,\n    id: unicode || name,\n    skins: skins && toSimpleSkinsMap(skins),\n    title: shortcodes.join(', ')\n  }));\n} // import rAF from one place so that the bundle size is a bit smaller\n\n\nconst rAF = requestAnimationFrame; // Svelte action to calculate the width of an element and auto-update\n\nconst resizeObserverSupported = typeof ResizeObserver === 'function';\n\nfunction calculateWidth(node, onUpdate) {\n  let resizeObserver;\n  /* istanbul ignore if */\n\n  if (resizeObserverSupported) {\n    resizeObserver = new ResizeObserver(entries => onUpdate(entries[0].contentRect.width));\n    resizeObserver.observe(node);\n  } else {\n    // just set the width once, don't bother trying to track it\n    rAF(() => onUpdate(node.getBoundingClientRect().width));\n  }\n\n  return {\n    destroy() {\n      /* istanbul ignore if */\n      if (resizeObserver) {\n        resizeObserver.disconnect();\n      }\n    }\n\n  };\n} // get the width of the text inside of a DOM node, via https://stackoverflow.com/a/59525891/680742\n\n\nfunction calculateTextWidth(node) {\n  /* istanbul ignore else */\n  {\n    const range = document.createRange();\n    range.selectNode(node.firstChild);\n    return range.getBoundingClientRect().width;\n  }\n}\n\nlet baselineEmojiWidth;\n\nfunction checkZwjSupport(zwjEmojisToCheck, baselineEmoji, emojiToDomNode) {\n  for (const emoji of zwjEmojisToCheck) {\n    const domNode = emojiToDomNode(emoji);\n    const emojiWidth = calculateTextWidth(domNode);\n\n    if (typeof baselineEmojiWidth === 'undefined') {\n      // calculate the baseline emoji width only once\n      baselineEmojiWidth = calculateTextWidth(baselineEmoji);\n    } // On Windows, some supported emoji are ~50% bigger than the baseline emoji, but what we really want to guard\n    // against are the ones that are 2x the size, because those are truly broken (person with red hair = person with\n    // floating red wig, black cat = cat with black square, polar bear = bear with snowflake, etc.)\n    // So here we set the threshold at 1.8 times the size of the baseline emoji.\n\n\n    const supported = emojiWidth / 1.8 < baselineEmojiWidth;\n    supportedZwjEmojis.set(emoji.unicode, supported);\n    /* istanbul ignore next */\n\n    if (!supported) {\n      log('Filtered unsupported emoji', emoji.unicode);\n    } else if (emojiWidth !== baselineEmojiWidth) {\n      log('Allowed borderline emoji', emoji.unicode);\n    }\n  }\n} // Measure after style/layout are complete\n\n\nconst requestPostAnimationFrame = callback => {\n  rAF(() => {\n    setTimeout(callback);\n  });\n}; // like lodash's uniq\n\n\nfunction uniq(arr) {\n  return uniqBy(arr, _ => _);\n}\n/* src/picker/components/Picker/Picker.svelte generated by Svelte v3.24.1 */\n\n\nconst {\n  Map: Map_1\n} = globals;\n\nfunction get_each_context(ctx, list, i) {\n  const child_ctx = ctx.slice();\n  child_ctx[65] = list[i];\n  child_ctx[67] = i;\n  return child_ctx;\n}\n\nfunction get_each_context_2(ctx, list, i) {\n  const child_ctx = ctx.slice();\n  child_ctx[65] = list[i];\n  child_ctx[67] = i;\n  return child_ctx;\n}\n\nfunction get_each_context_1(ctx, list, i) {\n  const child_ctx = ctx.slice();\n  child_ctx[68] = list[i];\n  child_ctx[67] = i;\n  return child_ctx;\n}\n\nfunction get_each_context_3(ctx, list, i) {\n  const child_ctx = ctx.slice();\n  child_ctx[71] = list[i];\n  return child_ctx;\n}\n\nfunction get_each_context_4(ctx, list, i) {\n  const child_ctx = ctx.slice();\n  child_ctx[74] = list[i];\n  child_ctx[67] = i;\n  return child_ctx;\n} // (44:38) {#each skinTones as skinTone, i (skinTone)}\n\n\nfunction create_each_block_4(key_1, ctx) {\n  let div;\n  let t_value =\n  /*skinTone*/\n  ctx[74] + \"\";\n  let t;\n  let div_id_value;\n  let div_class_value;\n  let div_aria_selected_value;\n  let div_title_value;\n  let div_aria_label_value;\n  return {\n    key: key_1,\n    first: null,\n\n    c() {\n      div = element(\"div\");\n      t = text(t_value);\n      attr(div, \"id\", div_id_value = \"skintone-\" +\n      /*i*/\n      ctx[67]);\n      attr(div, \"class\", div_class_value = \"emoji skintone-option cursor-pointer hide-focus \" + (\n      /*i*/\n      ctx[67] ===\n      /*activeSkinTone*/\n      ctx[15] ? \"active\" : \"\"));\n      attr(div, \"aria-selected\", div_aria_selected_value =\n      /*i*/\n      ctx[67] ===\n      /*activeSkinTone*/\n      ctx[15]);\n      attr(div, \"role\", \"option\");\n      attr(div, \"title\", div_title_value =\n      /*i18n*/\n      ctx[0].skinTones[\n      /*i*/\n      ctx[67]]);\n      attr(div, \"tabindex\", \"-1\");\n      attr(div, \"aria-label\", div_aria_label_value =\n      /*i18n*/\n      ctx[0].skinTones[\n      /*i*/\n      ctx[67]]);\n      this.first = div;\n    },\n\n    m(target, anchor) {\n      insert(target, div, anchor);\n      append(div, t);\n    },\n\n    p(ctx, dirty) {\n      if (dirty[0] &\n      /*skinTones*/\n      524288 && t_value !== (t_value =\n      /*skinTone*/\n      ctx[74] + \"\")) set_data(t, t_value);\n\n      if (dirty[0] &\n      /*skinTones*/\n      524288 && div_id_value !== (div_id_value = \"skintone-\" +\n      /*i*/\n      ctx[67])) {\n        attr(div, \"id\", div_id_value);\n      }\n\n      if (dirty[0] &\n      /*skinTones, activeSkinTone*/\n      557056 && div_class_value !== (div_class_value = \"emoji skintone-option cursor-pointer hide-focus \" + (\n      /*i*/\n      ctx[67] ===\n      /*activeSkinTone*/\n      ctx[15] ? \"active\" : \"\"))) {\n        attr(div, \"class\", div_class_value);\n      }\n\n      if (dirty[0] &\n      /*skinTones, activeSkinTone*/\n      557056 && div_aria_selected_value !== (div_aria_selected_value =\n      /*i*/\n      ctx[67] ===\n      /*activeSkinTone*/\n      ctx[15])) {\n        attr(div, \"aria-selected\", div_aria_selected_value);\n      }\n\n      if (dirty[0] &\n      /*i18n, skinTones*/\n      524289 && div_title_value !== (div_title_value =\n      /*i18n*/\n      ctx[0].skinTones[\n      /*i*/\n      ctx[67]])) {\n        attr(div, \"title\", div_title_value);\n      }\n\n      if (dirty[0] &\n      /*i18n, skinTones*/\n      524289 && div_aria_label_value !== (div_aria_label_value =\n      /*i18n*/\n      ctx[0].skinTones[\n      /*i*/\n      ctx[67]])) {\n        attr(div, \"aria-label\", div_aria_label_value);\n      }\n    },\n\n    d(detaching) {\n      if (detaching) detach(div);\n    }\n\n  };\n} // (54:33) {#each groups as group (group.id)}\n\n\nfunction create_each_block_3(key_1, ctx) {\n  let button;\n  let div;\n  let t_value =\n  /*group*/\n  ctx[71].emoji + \"\";\n  let t;\n  let button_aria_controls_value;\n  let button_aria_label_value;\n  let button_aria_selected_value;\n  let button_title_value;\n  let mounted;\n  let dispose;\n\n  function click_handler(...args) {\n    return (\n      /*click_handler*/\n      ctx[46](\n      /*group*/\n      ctx[71], ...args)\n    );\n  }\n\n  return {\n    key: key_1,\n    first: null,\n\n    c() {\n      button = element(\"button\");\n      div = element(\"div\");\n      t = text(t_value);\n      attr(div, \"class\", \"emoji\");\n      attr(button, \"role\", \"tab\");\n      attr(button, \"class\", \"nav-button\");\n      attr(button, \"aria-controls\", button_aria_controls_value = \"tab-\" +\n      /*group*/\n      ctx[71].id);\n      attr(button, \"aria-label\", button_aria_label_value =\n      /*i18n*/\n      ctx[0].categories[\n      /*group*/\n      ctx[71].name]);\n      attr(button, \"aria-selected\", button_aria_selected_value = !\n      /*searchMode*/\n      ctx[7] &&\n      /*currentGroup*/\n      ctx[23].id ===\n      /*group*/\n      ctx[71].id);\n      attr(button, \"title\", button_title_value =\n      /*i18n*/\n      ctx[0].categories[\n      /*group*/\n      ctx[71].name]);\n      this.first = button;\n    },\n\n    m(target, anchor) {\n      insert(target, button, anchor);\n      append(button, div);\n      append(div, t);\n\n      if (!mounted) {\n        dispose = listen(button, \"click\", click_handler);\n        mounted = true;\n      }\n    },\n\n    p(new_ctx, dirty) {\n      ctx = new_ctx;\n      if (dirty[0] &\n      /*groups*/\n      4194304 && t_value !== (t_value =\n      /*group*/\n      ctx[71].emoji + \"\")) set_data(t, t_value);\n\n      if (dirty[0] &\n      /*groups*/\n      4194304 && button_aria_controls_value !== (button_aria_controls_value = \"tab-\" +\n      /*group*/\n      ctx[71].id)) {\n        attr(button, \"aria-controls\", button_aria_controls_value);\n      }\n\n      if (dirty[0] &\n      /*i18n, groups*/\n      4194305 && button_aria_label_value !== (button_aria_label_value =\n      /*i18n*/\n      ctx[0].categories[\n      /*group*/\n      ctx[71].name])) {\n        attr(button, \"aria-label\", button_aria_label_value);\n      }\n\n      if (dirty[0] &\n      /*searchMode, currentGroup, groups*/\n      12583040 && button_aria_selected_value !== (button_aria_selected_value = !\n      /*searchMode*/\n      ctx[7] &&\n      /*currentGroup*/\n      ctx[23].id ===\n      /*group*/\n      ctx[71].id)) {\n        attr(button, \"aria-selected\", button_aria_selected_value);\n      }\n\n      if (dirty[0] &\n      /*i18n, groups*/\n      4194305 && button_title_value !== (button_title_value =\n      /*i18n*/\n      ctx[0].categories[\n      /*group*/\n      ctx[71].name])) {\n        attr(button, \"title\", button_title_value);\n      }\n    },\n\n    d(detaching) {\n      if (detaching) detach(button);\n      mounted = false;\n      dispose();\n    }\n\n  };\n} // (90:98) {:else}\n\n\nfunction create_else_block_1(ctx) {\n  let div;\n  return {\n    c() {\n      div = element(\"div\");\n      attr(div, \"class\", \"custom-emoji\");\n      set_style(div, \"background-image\", \"url(\" +\n      /*emoji*/\n      ctx[65].url + \")\");\n    },\n\n    m(target, anchor) {\n      insert(target, div, anchor);\n    },\n\n    p(ctx, dirty) {\n      if (dirty[0] &\n      /*currentEmojisWithCategories*/\n      4) {\n        set_style(div, \"background-image\", \"url(\" +\n        /*emoji*/\n        ctx[65].url + \")\");\n      }\n    },\n\n    d(detaching) {\n      if (detaching) detach(div);\n    }\n\n  };\n} // (90:38) {#if emoji.unicode}\n\n\nfunction create_if_block_1(ctx) {\n  let t_value = unicodeWithSkin(\n  /*emoji*/\n  ctx[65],\n  /*currentSkinTone*/\n  ctx[14]) + \"\";\n  let t;\n  return {\n    c() {\n      t = text(t_value);\n    },\n\n    m(target, anchor) {\n      insert(target, t, anchor);\n    },\n\n    p(ctx, dirty) {\n      if (dirty[0] &\n      /*currentEmojisWithCategories, currentSkinTone*/\n      16388 && t_value !== (t_value = unicodeWithSkin(\n      /*emoji*/\n      ctx[65],\n      /*currentSkinTone*/\n      ctx[14]) + \"\")) set_data(t, t_value);\n    },\n\n    d(detaching) {\n      if (detaching) detach(t);\n    }\n\n  };\n} // (85:39) {#each emojiWithCategory.emojis as emoji, i (emoji.id)}\n\n\nfunction create_each_block_2(key_1, ctx) {\n  let button;\n  let button_role_value;\n  let button_aria_selected_value;\n  let button_aria_label_value;\n  let button_title_value;\n  let button_class_value;\n  let button_id_value;\n\n  function select_block_type(ctx, dirty) {\n    if (\n    /*emoji*/\n    ctx[65].unicode) return create_if_block_1;\n    return create_else_block_1;\n  }\n\n  let current_block_type = select_block_type(ctx);\n  let if_block = current_block_type(ctx);\n  return {\n    key: key_1,\n    first: null,\n\n    c() {\n      button = element(\"button\");\n      if_block.c();\n      attr(button, \"role\", button_role_value =\n      /*searchMode*/\n      ctx[7] ? \"option\" : \"menuitem\");\n      attr(button, \"aria-selected\", button_aria_selected_value =\n      /*searchMode*/\n      ctx[7] ?\n      /*i*/\n      ctx[67] ==\n      /*activeSearchItem*/\n      ctx[8] : \"\");\n      attr(button, \"aria-label\", button_aria_label_value =\n      /*labelWithSkin*/\n      ctx[26](\n      /*emoji*/\n      ctx[65],\n      /*currentSkinTone*/\n      ctx[14]));\n      attr(button, \"title\", button_title_value =\n      /*emoji*/\n      ctx[65].title);\n      attr(button, \"class\", button_class_value = \"emoji \" + (\n      /*searchMode*/\n      ctx[7] &&\n      /*i*/\n      ctx[67] ===\n      /*activeSearchItem*/\n      ctx[8] ? \"active\" : \"\"));\n      attr(button, \"id\", button_id_value = \"emo-\" +\n      /*emoji*/\n      ctx[65].id);\n      this.first = button;\n    },\n\n    m(target, anchor) {\n      insert(target, button, anchor);\n      if_block.m(button, null);\n    },\n\n    p(ctx, dirty) {\n      if (current_block_type === (current_block_type = select_block_type(ctx)) && if_block) {\n        if_block.p(ctx, dirty);\n      } else {\n        if_block.d(1);\n        if_block = current_block_type(ctx);\n\n        if (if_block) {\n          if_block.c();\n          if_block.m(button, null);\n        }\n      }\n\n      if (dirty[0] &\n      /*searchMode*/\n      128 && button_role_value !== (button_role_value =\n      /*searchMode*/\n      ctx[7] ? \"option\" : \"menuitem\")) {\n        attr(button, \"role\", button_role_value);\n      }\n\n      if (dirty[0] &\n      /*searchMode, currentEmojisWithCategories, activeSearchItem*/\n      388 && button_aria_selected_value !== (button_aria_selected_value =\n      /*searchMode*/\n      ctx[7] ?\n      /*i*/\n      ctx[67] ==\n      /*activeSearchItem*/\n      ctx[8] : \"\")) {\n        attr(button, \"aria-selected\", button_aria_selected_value);\n      }\n\n      if (dirty[0] &\n      /*currentEmojisWithCategories, currentSkinTone*/\n      16388 && button_aria_label_value !== (button_aria_label_value =\n      /*labelWithSkin*/\n      ctx[26](\n      /*emoji*/\n      ctx[65],\n      /*currentSkinTone*/\n      ctx[14]))) {\n        attr(button, \"aria-label\", button_aria_label_value);\n      }\n\n      if (dirty[0] &\n      /*currentEmojisWithCategories*/\n      4 && button_title_value !== (button_title_value =\n      /*emoji*/\n      ctx[65].title)) {\n        attr(button, \"title\", button_title_value);\n      }\n\n      if (dirty[0] &\n      /*searchMode, currentEmojisWithCategories, activeSearchItem*/\n      388 && button_class_value !== (button_class_value = \"emoji \" + (\n      /*searchMode*/\n      ctx[7] &&\n      /*i*/\n      ctx[67] ===\n      /*activeSearchItem*/\n      ctx[8] ? \"active\" : \"\"))) {\n        attr(button, \"class\", button_class_value);\n      }\n\n      if (dirty[0] &\n      /*currentEmojisWithCategories*/\n      4 && button_id_value !== (button_id_value = \"emo-\" +\n      /*emoji*/\n      ctx[65].id)) {\n        attr(button, \"id\", button_id_value);\n      }\n    },\n\n    d(detaching) {\n      if (detaching) detach(button);\n      if_block.d();\n    }\n\n  };\n} // (72:3) {#each currentEmojisWithCategories as emojiWithCategory, i (emojiWithCategory.category)}\n\n\nfunction create_each_block_1(key_1, ctx) {\n  let div0;\n  let t_value = (\n  /*searchMode*/\n  ctx[7] ?\n  /*i18n*/\n  ctx[0].searchResultsLabel :\n  /*emojiWithCategory*/\n  ctx[68].category ?\n  /*emojiWithCategory*/\n  ctx[68].category :\n  /*currentEmojisWithCategories*/\n  ctx[2].length > 1 ?\n  /*i18n*/\n  ctx[0].categories.custom :\n  /*i18n*/\n  ctx[0].categories[\n  /*currentGroup*/\n  ctx[23].name]) + \"\";\n  let t;\n  let div0_id_value;\n  let div0_class_value;\n  let div1;\n  let each_blocks = [];\n  let each_1_lookup = new Map_1();\n  let div1_role_value;\n  let div1_aria_labelledby_value;\n  let div1_id_value;\n  let calculateEmojiGridWidth_action;\n  let mounted;\n  let dispose;\n  let each_value_2 =\n  /*emojiWithCategory*/\n  ctx[68].emojis;\n\n  const get_key = ctx =>\n  /*emoji*/\n  ctx[65].id;\n\n  for (let i = 0; i < each_value_2.length; i += 1) {\n    let child_ctx = get_each_context_2(ctx, each_value_2, i);\n    let key = get_key(child_ctx);\n    each_1_lookup.set(key, each_blocks[i] = create_each_block_2(key, child_ctx));\n  }\n\n  return {\n    key: key_1,\n    first: null,\n\n    c() {\n      div0 = element(\"div\");\n      t = text(t_value);\n      div1 = element(\"div\");\n\n      for (let i = 0; i < each_blocks.length; i += 1) {\n        each_blocks[i].c();\n      }\n\n      attr(div0, \"id\", div0_id_value = \"menu-label-\" +\n      /*i*/\n      ctx[67]);\n      attr(div0, \"class\", div0_class_value = \"category \" + (\n      /*currentEmojisWithCategories*/\n      ctx[2].length > 1 ? \"\" : \"gone\"));\n      attr(div0, \"aria-hidden\", \"true\");\n      attr(div1, \"class\", \"emoji-menu\");\n      attr(div1, \"role\", div1_role_value =\n      /*searchMode*/\n      ctx[7] ? \"listbox\" : \"menu\");\n      attr(div1, \"aria-labelledby\", div1_aria_labelledby_value = \"menu-label-\" +\n      /*i*/\n      ctx[67]);\n      attr(div1, \"id\", div1_id_value =\n      /*searchMode*/\n      ctx[7] ? \"search-results\" : \"\");\n      this.first = div0;\n    },\n\n    m(target, anchor) {\n      insert(target, div0, anchor);\n      append(div0, t);\n      insert(target, div1, anchor);\n\n      for (let i = 0; i < each_blocks.length; i += 1) {\n        each_blocks[i].m(div1, null);\n      }\n\n      if (!mounted) {\n        dispose = action_destroyer(calculateEmojiGridWidth_action =\n        /*calculateEmojiGridWidth*/\n        ctx[27].call(null, div1));\n        mounted = true;\n      }\n    },\n\n    p(ctx, dirty) {\n      if (dirty[0] &\n      /*searchMode, i18n, currentEmojisWithCategories, currentGroup*/\n      8388741 && t_value !== (t_value = (\n      /*searchMode*/\n      ctx[7] ?\n      /*i18n*/\n      ctx[0].searchResultsLabel :\n      /*emojiWithCategory*/\n      ctx[68].category ?\n      /*emojiWithCategory*/\n      ctx[68].category :\n      /*currentEmojisWithCategories*/\n      ctx[2].length > 1 ?\n      /*i18n*/\n      ctx[0].categories.custom :\n      /*i18n*/\n      ctx[0].categories[\n      /*currentGroup*/\n      ctx[23].name]) + \"\")) set_data(t, t_value);\n\n      if (dirty[0] &\n      /*currentEmojisWithCategories*/\n      4 && div0_id_value !== (div0_id_value = \"menu-label-\" +\n      /*i*/\n      ctx[67])) {\n        attr(div0, \"id\", div0_id_value);\n      }\n\n      if (dirty[0] &\n      /*currentEmojisWithCategories*/\n      4 && div0_class_value !== (div0_class_value = \"category \" + (\n      /*currentEmojisWithCategories*/\n      ctx[2].length > 1 ? \"\" : \"gone\"))) {\n        attr(div0, \"class\", div0_class_value);\n      }\n\n      if (dirty[0] &\n      /*searchMode, currentEmojisWithCategories, activeSearchItem, labelWithSkin, currentSkinTone*/\n      67125636) {\n        const each_value_2 =\n        /*emojiWithCategory*/\n        ctx[68].emojis;\n        each_blocks = update_keyed_each(each_blocks, dirty, get_key, 1, ctx, each_value_2, each_1_lookup, div1, destroy_block, create_each_block_2, null, get_each_context_2);\n      }\n\n      if (dirty[0] &\n      /*searchMode*/\n      128 && div1_role_value !== (div1_role_value =\n      /*searchMode*/\n      ctx[7] ? \"listbox\" : \"menu\")) {\n        attr(div1, \"role\", div1_role_value);\n      }\n\n      if (dirty[0] &\n      /*currentEmojisWithCategories*/\n      4 && div1_aria_labelledby_value !== (div1_aria_labelledby_value = \"menu-label-\" +\n      /*i*/\n      ctx[67])) {\n        attr(div1, \"aria-labelledby\", div1_aria_labelledby_value);\n      }\n\n      if (dirty[0] &\n      /*searchMode*/\n      128 && div1_id_value !== (div1_id_value =\n      /*searchMode*/\n      ctx[7] ? \"search-results\" : \"\")) {\n        attr(div1, \"id\", div1_id_value);\n      }\n    },\n\n    d(detaching) {\n      if (detaching) detach(div0);\n      if (detaching) detach(div1);\n\n      for (let i = 0; i < each_blocks.length; i += 1) {\n        each_blocks[i].d();\n      }\n\n      mounted = false;\n      dispose();\n    }\n\n  };\n} // (104:94) {:else}\n\n\nfunction create_else_block(ctx) {\n  let img;\n  let img_src_value;\n  return {\n    c() {\n      img = element(\"img\");\n      attr(img, \"class\", \"custom-emoji\");\n      if (img.src !== (img_src_value =\n      /*emoji*/\n      ctx[65].url)) attr(img, \"src\", img_src_value);\n      attr(img, \"loading\", \"lazy\");\n      attr(img, \"alt\", \"\");\n    },\n\n    m(target, anchor) {\n      insert(target, img, anchor);\n    },\n\n    p(ctx, dirty) {\n      if (dirty[0] &\n      /*currentFavorites*/\n      1048576 && img.src !== (img_src_value =\n      /*emoji*/\n      ctx[65].url)) {\n        attr(img, \"src\", img_src_value);\n      }\n    },\n\n    d(detaching) {\n      if (detaching) detach(img);\n    }\n\n  };\n} // (104:34) {#if emoji.unicode}\n\n\nfunction create_if_block(ctx) {\n  let t_value = unicodeWithSkin(\n  /*emoji*/\n  ctx[65],\n  /*currentSkinTone*/\n  ctx[14]) + \"\";\n  let t;\n  return {\n    c() {\n      t = text(t_value);\n    },\n\n    m(target, anchor) {\n      insert(target, t, anchor);\n    },\n\n    p(ctx, dirty) {\n      if (dirty[0] &\n      /*currentFavorites, currentSkinTone*/\n      1064960 && t_value !== (t_value = unicodeWithSkin(\n      /*emoji*/\n      ctx[65],\n      /*currentSkinTone*/\n      ctx[14]) + \"\")) set_data(t, t_value);\n    },\n\n    d(detaching) {\n      if (detaching) detach(t);\n    }\n\n  };\n} // (100:62) {#each currentFavorites as emoji, i (emoji.id)}\n\n\nfunction create_each_block(key_1, ctx) {\n  let button;\n  let button_aria_label_value;\n  let button_title_value;\n  let button_id_value;\n\n  function select_block_type_1(ctx, dirty) {\n    if (\n    /*emoji*/\n    ctx[65].unicode) return create_if_block;\n    return create_else_block;\n  }\n\n  let current_block_type = select_block_type_1(ctx);\n  let if_block = current_block_type(ctx);\n  return {\n    key: key_1,\n    first: null,\n\n    c() {\n      button = element(\"button\");\n      if_block.c();\n      attr(button, \"role\", \"menuitem\");\n      attr(button, \"aria-label\", button_aria_label_value =\n      /*labelWithSkin*/\n      ctx[26](\n      /*emoji*/\n      ctx[65],\n      /*currentSkinTone*/\n      ctx[14]));\n      attr(button, \"title\", button_title_value =\n      /*emoji*/\n      ctx[65].title);\n      attr(button, \"class\", \"emoji\");\n      attr(button, \"id\", button_id_value = \"fav-\" +\n      /*emoji*/\n      ctx[65].id);\n      this.first = button;\n    },\n\n    m(target, anchor) {\n      insert(target, button, anchor);\n      if_block.m(button, null);\n    },\n\n    p(ctx, dirty) {\n      if (current_block_type === (current_block_type = select_block_type_1(ctx)) && if_block) {\n        if_block.p(ctx, dirty);\n      } else {\n        if_block.d(1);\n        if_block = current_block_type(ctx);\n\n        if (if_block) {\n          if_block.c();\n          if_block.m(button, null);\n        }\n      }\n\n      if (dirty[0] &\n      /*currentFavorites, currentSkinTone*/\n      1064960 && button_aria_label_value !== (button_aria_label_value =\n      /*labelWithSkin*/\n      ctx[26](\n      /*emoji*/\n      ctx[65],\n      /*currentSkinTone*/\n      ctx[14]))) {\n        attr(button, \"aria-label\", button_aria_label_value);\n      }\n\n      if (dirty[0] &\n      /*currentFavorites*/\n      1048576 && button_title_value !== (button_title_value =\n      /*emoji*/\n      ctx[65].title)) {\n        attr(button, \"title\", button_title_value);\n      }\n\n      if (dirty[0] &\n      /*currentFavorites*/\n      1048576 && button_id_value !== (button_id_value = \"fav-\" +\n      /*emoji*/\n      ctx[65].id)) {\n        attr(button, \"id\", button_id_value);\n      }\n    },\n\n    d(detaching) {\n      if (detaching) detach(button);\n      if_block.d();\n    }\n\n  };\n}\n\nfunction create_fragment(ctx) {\n  let section;\n  let div0;\n  let div4;\n  let div1;\n  let input;\n  let input_placeholder_value;\n  let input_aria_expanded_value;\n  let input_aria_activedescendant_value;\n  let label;\n  let t0_value =\n  /*i18n*/\n  ctx[0].searchLabel + \"\";\n  let t0;\n  let span0;\n  let t1_value =\n  /*i18n*/\n  ctx[0].searchDescription + \"\";\n  let t1;\n  let div2;\n  let button0;\n  let t2;\n  let button0_class_value;\n  let div2_class_value;\n  let span1;\n  let t3_value =\n  /*i18n*/\n  ctx[0].skinToneDescription + \"\";\n  let t3;\n  let div3;\n  let each_blocks_3 = [];\n  let each0_lookup = new Map_1();\n  let div3_class_value;\n  let div3_style_value;\n  let div3_aria_label_value;\n  let div3_aria_activedescendant_value;\n  let div3_aria_hidden_value;\n  let div5;\n  let each_blocks_2 = [];\n  let each1_lookup = new Map_1();\n  let div5_aria_label_value;\n  let div7;\n  let div6;\n  let calculateIndicatorWidth_action;\n  let div8;\n  let t4;\n  let div8_class_value;\n  let div9;\n  let each_blocks_1 = [];\n  let each2_lookup = new Map_1();\n  let div9_class_value;\n  let div9_role_value;\n  let div9_aria_label_value;\n  let div9_id_value;\n  let div10;\n  let each_blocks = [];\n  let each3_lookup = new Map_1();\n  let div10_class_value;\n  let div10_aria_label_value;\n  let div11;\n  let button1;\n  let section_aria_label_value;\n  let mounted;\n  let dispose;\n  let each_value_4 =\n  /*skinTones*/\n  ctx[19];\n\n  const get_key = ctx =>\n  /*skinTone*/\n  ctx[74];\n\n  for (let i = 0; i < each_value_4.length; i += 1) {\n    let child_ctx = get_each_context_4(ctx, each_value_4, i);\n    let key = get_key(child_ctx);\n    each0_lookup.set(key, each_blocks_3[i] = create_each_block_4(key, child_ctx));\n  }\n\n  let each_value_3 =\n  /*groups*/\n  ctx[22];\n\n  const get_key_1 = ctx =>\n  /*group*/\n  ctx[71].id;\n\n  for (let i = 0; i < each_value_3.length; i += 1) {\n    let child_ctx = get_each_context_3(ctx, each_value_3, i);\n    let key = get_key_1(child_ctx);\n    each1_lookup.set(key, each_blocks_2[i] = create_each_block_3(key, child_ctx));\n  }\n\n  let each_value_1 =\n  /*currentEmojisWithCategories*/\n  ctx[2];\n\n  const get_key_2 = ctx =>\n  /*emojiWithCategory*/\n  ctx[68].category;\n\n  for (let i = 0; i < each_value_1.length; i += 1) {\n    let child_ctx = get_each_context_1(ctx, each_value_1, i);\n    let key = get_key_2(child_ctx);\n    each2_lookup.set(key, each_blocks_1[i] = create_each_block_1(key, child_ctx));\n  }\n\n  let each_value =\n  /*currentFavorites*/\n  ctx[20];\n\n  const get_key_3 = ctx =>\n  /*emoji*/\n  ctx[65].id;\n\n  for (let i = 0; i < each_value.length; i += 1) {\n    let child_ctx = get_each_context(ctx, each_value, i);\n    let key = get_key_3(child_ctx);\n    each3_lookup.set(key, each_blocks[i] = create_each_block(key, child_ctx));\n  }\n\n  return {\n    c() {\n      section = element(\"section\");\n      div0 = element(\"div\");\n      div4 = element(\"div\");\n      div1 = element(\"div\");\n      input = element(\"input\");\n      label = element(\"label\");\n      t0 = text(t0_value);\n      span0 = element(\"span\");\n      t1 = text(t1_value);\n      div2 = element(\"div\");\n      button0 = element(\"button\");\n      t2 = text(\n      /*skinToneButtonText*/\n      ctx[16]);\n      span1 = element(\"span\");\n      t3 = text(t3_value);\n      div3 = element(\"div\");\n\n      for (let i = 0; i < each_blocks_3.length; i += 1) {\n        each_blocks_3[i].c();\n      }\n\n      div5 = element(\"div\");\n\n      for (let i = 0; i < each_blocks_2.length; i += 1) {\n        each_blocks_2[i].c();\n      }\n\n      div7 = element(\"div\");\n      div6 = element(\"div\");\n      div8 = element(\"div\");\n      t4 = text(\n      /*message*/\n      ctx[9]);\n      div9 = element(\"div\");\n\n      for (let i = 0; i < each_blocks_1.length; i += 1) {\n        each_blocks_1[i].c();\n      }\n\n      div10 = element(\"div\");\n\n      for (let i = 0; i < each_blocks.length; i += 1) {\n        each_blocks[i].c();\n      }\n\n      div11 = element(\"div\");\n      button1 = element(\"button\");\n      button1.textContent = \"ðŸ˜€\";\n      this.c = noop;\n      attr(div0, \"class\", \"pad-top\");\n      attr(input, \"id\", \"search\");\n      attr(input, \"class\", \"search\");\n      attr(input, \"type\", \"search\");\n      attr(input, \"role\", \"combobox\");\n      attr(input, \"enterkeyhint\", \"search\");\n      attr(input, \"placeholder\", input_placeholder_value =\n      /*i18n*/\n      ctx[0].searchLabel);\n      attr(input, \"autocapitalize\", \"none\");\n      attr(input, \"autocomplete\", \"off\");\n      attr(input, \"spellcheck\", \"true\");\n      attr(input, \"aria-expanded\", input_aria_expanded_value = !!(\n      /*searchMode*/\n      ctx[7] &&\n      /*currentEmojis*/\n      ctx[1].length));\n      attr(input, \"aria-controls\", \"search-results\");\n      attr(input, \"aria-owns\", \"search-results\");\n      attr(input, \"aria-describedby\", \"search-description\");\n      attr(input, \"aria-autocomplete\", \"list\");\n      attr(input, \"aria-activedescendant\", input_aria_activedescendant_value =\n      /*activeSearchItemId*/\n      ctx[25] ? `emo-${\n      /*activeSearchItemId*/\n      ctx[25]}` : \"\");\n      attr(label, \"class\", \"sr-only\");\n      attr(label, \"for\", \"search\");\n      attr(span0, \"id\", \"search-description\");\n      attr(span0, \"class\", \"sr-only\");\n      attr(div1, \"class\", \"search-wrapper\");\n      attr(button0, \"id\", \"skintone-button\");\n      attr(button0, \"class\", button0_class_value = \"emoji \" + (\n      /*skinTonePickerExpanded*/\n      ctx[11] ? \"hide-focus\" : \"\"));\n      attr(button0, \"aria-label\",\n      /*skinToneButtonLabel*/\n      ctx[18]);\n      attr(button0, \"title\",\n      /*skinToneButtonLabel*/\n      ctx[18]);\n      attr(button0, \"aria-describedby\", \"skintone-description\");\n      attr(button0, \"aria-haspopup\", \"listbox\");\n      attr(button0, \"aria-expanded\",\n      /*skinTonePickerExpanded*/\n      ctx[11]);\n      attr(button0, \"aria-controls\", \"skintone-list\");\n      attr(div2, \"class\", div2_class_value = \"skintone-button-wrapper \" + (\n      /*skinTonePickerExpandedAfterAnimation*/\n      ctx[12] ? \"expanded\" : \"\"));\n      attr(span1, \"id\", \"skintone-description\");\n      attr(span1, \"class\", \"sr-only\");\n      attr(div3, \"id\", \"skintone-list\");\n      attr(div3, \"class\", div3_class_value = \"skintone-list \" + (\n      /*skinTonePickerExpanded*/\n      ctx[11] ? \"\" : \"hidden no-animate\"));\n      attr(div3, \"style\", div3_style_value =\n      /*skinTonePickerExpanded*/\n      ctx[11] ? \"transform: translateY(0);\" : \"transform: translateY(calc(-1 * var(--num-skintones) * var(--total-emoji-size)))\");\n      attr(div3, \"role\", \"listbox\");\n      attr(div3, \"aria-label\", div3_aria_label_value =\n      /*i18n*/\n      ctx[0].skinTonesLabel);\n      attr(div3, \"aria-activedescendant\", div3_aria_activedescendant_value = \"skintone-\" +\n      /*activeSkinTone*/\n      ctx[15]);\n      attr(div3, \"aria-hidden\", div3_aria_hidden_value = !\n      /*skinTonePickerExpanded*/\n      ctx[11]);\n      attr(div4, \"class\", \"search-row\");\n      attr(div5, \"class\", \"nav\");\n      attr(div5, \"role\", \"tablist\");\n      set_style(div5, \"grid-template-columns\", \"repeat(\" +\n      /*groups*/\n      ctx[22].length + \", 1fr)\");\n      attr(div5, \"aria-label\", div5_aria_label_value =\n      /*i18n*/\n      ctx[0].categoriesLabel);\n      attr(div6, \"class\", \"indicator\");\n      attr(div6, \"style\",\n      /*indicatorStyle*/\n      ctx[10]);\n      attr(div7, \"class\", \"indicator-wrapper\");\n      attr(div7, \"aria-hidden\", \"true\");\n      attr(div8, \"class\", div8_class_value = \"message \" + (\n      /*message*/\n      ctx[9] ? \"\" : \"gone\"));\n      attr(div8, \"role\", \"alert\");\n      attr(div8, \"aria-live\", \"polite\");\n      attr(div9, \"class\", div9_class_value = \"tabpanel \" + (!\n      /*loaded*/\n      ctx[24] ||\n      /*message*/\n      ctx[9] ? \"gone\" : \"\"));\n      attr(div9, \"role\", div9_role_value =\n      /*searchMode*/\n      ctx[7] ? \"region\" : \"tabpanel\");\n      attr(div9, \"aria-label\", div9_aria_label_value =\n      /*searchMode*/\n      ctx[7] ?\n      /*i18n*/\n      ctx[0].searchResultsLabel :\n      /*i18n*/\n      ctx[0].categories[\n      /*currentGroup*/\n      ctx[23].name]);\n      attr(div9, \"id\", div9_id_value =\n      /*searchMode*/\n      ctx[7] ? \"\" : `tab-${\n      /*currentGroup*/\n      ctx[23].id}`);\n      attr(div9, \"tabindex\", \"0\");\n      attr(div10, \"class\", div10_class_value = \"favorites emoji-menu \" + (\n      /*message*/\n      ctx[9] ? \"gone\" : \"\"));\n      attr(div10, \"role\", \"menu\");\n      attr(div10, \"aria-label\", div10_aria_label_value =\n      /*i18n*/\n      ctx[0].favoritesLabel);\n      set_style(div10, \"padding-right\",\n      /*scrollbarWidth*/\n      ctx[21] + \"px\");\n      attr(button1, \"tabindex\", \"-1\");\n      attr(button1, \"class\", \"emoji baseline-emoji\");\n      attr(div11, \"aria-hidden\", \"true\");\n      attr(div11, \"class\", \"hidden abs-pos\");\n      attr(section, \"class\", \"picker\");\n      attr(section, \"aria-label\", section_aria_label_value =\n      /*i18n*/\n      ctx[0].regionLabel);\n      attr(section, \"style\",\n      /*pickerStyle*/\n      ctx[17]);\n    },\n\n    m(target, anchor) {\n      insert(target, section, anchor);\n      append(section, div0);\n      append(section, div4);\n      append(div4, div1);\n      append(div1, input);\n      set_input_value(input,\n      /*rawSearchText*/\n      ctx[3]);\n      append(div1, label);\n      append(label, t0);\n      append(div1, span0);\n      append(span0, t1);\n      append(div4, div2);\n      append(div2, button0);\n      append(button0, t2);\n      append(div4, span1);\n      append(span1, t3);\n      append(div4, div3);\n\n      for (let i = 0; i < each_blocks_3.length; i += 1) {\n        each_blocks_3[i].m(div3, null);\n      }\n      /*div3_binding*/\n\n\n      ctx[45](div3);\n      append(section, div5);\n\n      for (let i = 0; i < each_blocks_2.length; i += 1) {\n        each_blocks_2[i].m(div5, null);\n      }\n\n      append(section, div7);\n      append(div7, div6);\n      append(section, div8);\n      append(div8, t4);\n      append(section, div9);\n\n      for (let i = 0; i < each_blocks_1.length; i += 1) {\n        each_blocks_1[i].m(div9, null);\n      }\n      /*div9_binding*/\n\n\n      ctx[47](div9);\n      append(section, div10);\n\n      for (let i = 0; i < each_blocks.length; i += 1) {\n        each_blocks[i].m(div10, null);\n      }\n\n      append(section, div11);\n      append(div11, button1);\n      /*button1_binding*/\n\n      ctx[48](button1);\n      /*section_binding*/\n\n      ctx[49](section);\n\n      if (!mounted) {\n        dispose = [listen(input, \"input\",\n        /*input_input_handler*/\n        ctx[44]), listen(input, \"keydown\",\n        /*onSearchKeydown*/\n        ctx[29]), listen(button0, \"click\",\n        /*onClickSkinToneButton*/\n        ctx[34]), listen(div3, \"focusout\",\n        /*onSkinToneOptionsFocusOut*/\n        ctx[37]), listen(div3, \"click\",\n        /*onSkinToneOptionsClick*/\n        ctx[33]), listen(div3, \"keydown\",\n        /*onSkinToneOptionsKeydown*/\n        ctx[35]), listen(div3, \"keyup\",\n        /*onSkinToneOptionsKeyup*/\n        ctx[36]), listen(div5, \"keydown\",\n        /*onNavKeydown*/\n        ctx[31]), action_destroyer(calculateIndicatorWidth_action =\n        /*calculateIndicatorWidth*/\n        ctx[28].call(null, div6)), listen(div9, \"click\",\n        /*onEmojiClick*/\n        ctx[32]), listen(div10, \"click\",\n        /*onEmojiClick*/\n        ctx[32])];\n        mounted = true;\n      }\n    },\n\n    p(ctx, dirty) {\n      if (dirty[0] &\n      /*i18n*/\n      1 && input_placeholder_value !== (input_placeholder_value =\n      /*i18n*/\n      ctx[0].searchLabel)) {\n        attr(input, \"placeholder\", input_placeholder_value);\n      }\n\n      if (dirty[0] &\n      /*searchMode, currentEmojis*/\n      130 && input_aria_expanded_value !== (input_aria_expanded_value = !!(\n      /*searchMode*/\n      ctx[7] &&\n      /*currentEmojis*/\n      ctx[1].length))) {\n        attr(input, \"aria-expanded\", input_aria_expanded_value);\n      }\n\n      if (dirty[0] &\n      /*activeSearchItemId*/\n      33554432 && input_aria_activedescendant_value !== (input_aria_activedescendant_value =\n      /*activeSearchItemId*/\n      ctx[25] ? `emo-${\n      /*activeSearchItemId*/\n      ctx[25]}` : \"\")) {\n        attr(input, \"aria-activedescendant\", input_aria_activedescendant_value);\n      }\n\n      if (dirty[0] &\n      /*rawSearchText*/\n      8) {\n        set_input_value(input,\n        /*rawSearchText*/\n        ctx[3]);\n      }\n\n      if (dirty[0] &\n      /*i18n*/\n      1 && t0_value !== (t0_value =\n      /*i18n*/\n      ctx[0].searchLabel + \"\")) set_data(t0, t0_value);\n      if (dirty[0] &\n      /*i18n*/\n      1 && t1_value !== (t1_value =\n      /*i18n*/\n      ctx[0].searchDescription + \"\")) set_data(t1, t1_value);\n      if (dirty[0] &\n      /*skinToneButtonText*/\n      65536) set_data(t2,\n      /*skinToneButtonText*/\n      ctx[16]);\n\n      if (dirty[0] &\n      /*skinTonePickerExpanded*/\n      2048 && button0_class_value !== (button0_class_value = \"emoji \" + (\n      /*skinTonePickerExpanded*/\n      ctx[11] ? \"hide-focus\" : \"\"))) {\n        attr(button0, \"class\", button0_class_value);\n      }\n\n      if (dirty[0] &\n      /*skinToneButtonLabel*/\n      262144) {\n        attr(button0, \"aria-label\",\n        /*skinToneButtonLabel*/\n        ctx[18]);\n      }\n\n      if (dirty[0] &\n      /*skinToneButtonLabel*/\n      262144) {\n        attr(button0, \"title\",\n        /*skinToneButtonLabel*/\n        ctx[18]);\n      }\n\n      if (dirty[0] &\n      /*skinTonePickerExpanded*/\n      2048) {\n        attr(button0, \"aria-expanded\",\n        /*skinTonePickerExpanded*/\n        ctx[11]);\n      }\n\n      if (dirty[0] &\n      /*skinTonePickerExpandedAfterAnimation*/\n      4096 && div2_class_value !== (div2_class_value = \"skintone-button-wrapper \" + (\n      /*skinTonePickerExpandedAfterAnimation*/\n      ctx[12] ? \"expanded\" : \"\"))) {\n        attr(div2, \"class\", div2_class_value);\n      }\n\n      if (dirty[0] &\n      /*i18n*/\n      1 && t3_value !== (t3_value =\n      /*i18n*/\n      ctx[0].skinToneDescription + \"\")) set_data(t3, t3_value);\n\n      if (dirty[0] &\n      /*skinTones, activeSkinTone, i18n*/\n      557057) {\n        const each_value_4 =\n        /*skinTones*/\n        ctx[19];\n        each_blocks_3 = update_keyed_each(each_blocks_3, dirty, get_key, 1, ctx, each_value_4, each0_lookup, div3, destroy_block, create_each_block_4, null, get_each_context_4);\n      }\n\n      if (dirty[0] &\n      /*skinTonePickerExpanded*/\n      2048 && div3_class_value !== (div3_class_value = \"skintone-list \" + (\n      /*skinTonePickerExpanded*/\n      ctx[11] ? \"\" : \"hidden no-animate\"))) {\n        attr(div3, \"class\", div3_class_value);\n      }\n\n      if (dirty[0] &\n      /*skinTonePickerExpanded*/\n      2048 && div3_style_value !== (div3_style_value =\n      /*skinTonePickerExpanded*/\n      ctx[11] ? \"transform: translateY(0);\" : \"transform: translateY(calc(-1 * var(--num-skintones) * var(--total-emoji-size)))\")) {\n        attr(div3, \"style\", div3_style_value);\n      }\n\n      if (dirty[0] &\n      /*i18n*/\n      1 && div3_aria_label_value !== (div3_aria_label_value =\n      /*i18n*/\n      ctx[0].skinTonesLabel)) {\n        attr(div3, \"aria-label\", div3_aria_label_value);\n      }\n\n      if (dirty[0] &\n      /*activeSkinTone*/\n      32768 && div3_aria_activedescendant_value !== (div3_aria_activedescendant_value = \"skintone-\" +\n      /*activeSkinTone*/\n      ctx[15])) {\n        attr(div3, \"aria-activedescendant\", div3_aria_activedescendant_value);\n      }\n\n      if (dirty[0] &\n      /*skinTonePickerExpanded*/\n      2048 && div3_aria_hidden_value !== (div3_aria_hidden_value = !\n      /*skinTonePickerExpanded*/\n      ctx[11])) {\n        attr(div3, \"aria-hidden\", div3_aria_hidden_value);\n      }\n\n      if (dirty[0] &\n      /*groups, i18n, searchMode, currentGroup, onNavClick*/\n      1086324865) {\n        const each_value_3 =\n        /*groups*/\n        ctx[22];\n        each_blocks_2 = update_keyed_each(each_blocks_2, dirty, get_key_1, 1, ctx, each_value_3, each1_lookup, div5, destroy_block, create_each_block_3, null, get_each_context_3);\n      }\n\n      if (dirty[0] &\n      /*groups*/\n      4194304) {\n        set_style(div5, \"grid-template-columns\", \"repeat(\" +\n        /*groups*/\n        ctx[22].length + \", 1fr)\");\n      }\n\n      if (dirty[0] &\n      /*i18n*/\n      1 && div5_aria_label_value !== (div5_aria_label_value =\n      /*i18n*/\n      ctx[0].categoriesLabel)) {\n        attr(div5, \"aria-label\", div5_aria_label_value);\n      }\n\n      if (dirty[0] &\n      /*indicatorStyle*/\n      1024) {\n        attr(div6, \"style\",\n        /*indicatorStyle*/\n        ctx[10]);\n      }\n\n      if (dirty[0] &\n      /*message*/\n      512) set_data(t4,\n      /*message*/\n      ctx[9]);\n\n      if (dirty[0] &\n      /*message*/\n      512 && div8_class_value !== (div8_class_value = \"message \" + (\n      /*message*/\n      ctx[9] ? \"\" : \"gone\"))) {\n        attr(div8, \"class\", div8_class_value);\n      }\n\n      if (dirty[0] &\n      /*searchMode, currentEmojisWithCategories, activeSearchItem, labelWithSkin, currentSkinTone, i18n, currentGroup*/\n      75514245) {\n        const each_value_1 =\n        /*currentEmojisWithCategories*/\n        ctx[2];\n        each_blocks_1 = update_keyed_each(each_blocks_1, dirty, get_key_2, 1, ctx, each_value_1, each2_lookup, div9, destroy_block, create_each_block_1, null, get_each_context_1);\n      }\n\n      if (dirty[0] &\n      /*loaded, message*/\n      16777728 && div9_class_value !== (div9_class_value = \"tabpanel \" + (!\n      /*loaded*/\n      ctx[24] ||\n      /*message*/\n      ctx[9] ? \"gone\" : \"\"))) {\n        attr(div9, \"class\", div9_class_value);\n      }\n\n      if (dirty[0] &\n      /*searchMode*/\n      128 && div9_role_value !== (div9_role_value =\n      /*searchMode*/\n      ctx[7] ? \"region\" : \"tabpanel\")) {\n        attr(div9, \"role\", div9_role_value);\n      }\n\n      if (dirty[0] &\n      /*searchMode, i18n, currentGroup*/\n      8388737 && div9_aria_label_value !== (div9_aria_label_value =\n      /*searchMode*/\n      ctx[7] ?\n      /*i18n*/\n      ctx[0].searchResultsLabel :\n      /*i18n*/\n      ctx[0].categories[\n      /*currentGroup*/\n      ctx[23].name])) {\n        attr(div9, \"aria-label\", div9_aria_label_value);\n      }\n\n      if (dirty[0] &\n      /*searchMode, currentGroup*/\n      8388736 && div9_id_value !== (div9_id_value =\n      /*searchMode*/\n      ctx[7] ? \"\" : `tab-${\n      /*currentGroup*/\n      ctx[23].id}`)) {\n        attr(div9, \"id\", div9_id_value);\n      }\n\n      if (dirty[0] &\n      /*labelWithSkin, currentFavorites, currentSkinTone*/\n      68173824) {\n        const each_value =\n        /*currentFavorites*/\n        ctx[20];\n        each_blocks = update_keyed_each(each_blocks, dirty, get_key_3, 1, ctx, each_value, each3_lookup, div10, destroy_block, create_each_block, null, get_each_context);\n      }\n\n      if (dirty[0] &\n      /*message*/\n      512 && div10_class_value !== (div10_class_value = \"favorites emoji-menu \" + (\n      /*message*/\n      ctx[9] ? \"gone\" : \"\"))) {\n        attr(div10, \"class\", div10_class_value);\n      }\n\n      if (dirty[0] &\n      /*i18n*/\n      1 && div10_aria_label_value !== (div10_aria_label_value =\n      /*i18n*/\n      ctx[0].favoritesLabel)) {\n        attr(div10, \"aria-label\", div10_aria_label_value);\n      }\n\n      if (dirty[0] &\n      /*scrollbarWidth*/\n      2097152) {\n        set_style(div10, \"padding-right\",\n        /*scrollbarWidth*/\n        ctx[21] + \"px\");\n      }\n\n      if (dirty[0] &\n      /*i18n*/\n      1 && section_aria_label_value !== (section_aria_label_value =\n      /*i18n*/\n      ctx[0].regionLabel)) {\n        attr(section, \"aria-label\", section_aria_label_value);\n      }\n\n      if (dirty[0] &\n      /*pickerStyle*/\n      131072) {\n        attr(section, \"style\",\n        /*pickerStyle*/\n        ctx[17]);\n      }\n    },\n\n    i: noop,\n    o: noop,\n\n    d(detaching) {\n      if (detaching) detach(section);\n\n      for (let i = 0; i < each_blocks_3.length; i += 1) {\n        each_blocks_3[i].d();\n      }\n      /*div3_binding*/\n\n\n      ctx[45](null);\n\n      for (let i = 0; i < each_blocks_2.length; i += 1) {\n        each_blocks_2[i].d();\n      }\n\n      for (let i = 0; i < each_blocks_1.length; i += 1) {\n        each_blocks_1[i].d();\n      }\n      /*div9_binding*/\n\n\n      ctx[47](null);\n\n      for (let i = 0; i < each_blocks.length; i += 1) {\n        each_blocks[i].d();\n      }\n      /*button1_binding*/\n\n\n      ctx[48](null);\n      /*section_binding*/\n\n      ctx[49](null);\n      mounted = false;\n      run_all(dispose);\n    }\n\n  };\n}\n\nfunction unicodeWithSkin(emoji, currentSkinTone) {\n  return currentSkinTone && emoji.skins && emoji.skins[currentSkinTone] || emoji.unicode;\n}\n\nfunction instance($$self, $$props, $$invalidate) {\n  let {\n    locale = null\n  } = $$props;\n  let {\n    dataSource = null\n  } = $$props;\n  let {\n    skinToneEmoji = DEFAULT_SKIN_TONE_EMOJI\n  } = $$props;\n  let {\n    i18n = enI18n\n  } = $$props;\n  let {\n    database = null\n  } = $$props;\n  let {\n    customEmoji = null\n  } = $$props;\n  let {\n    customCategorySorting = (a, b) => a < b ? -1 : a > b ? 1 : 0\n  } = $$props; // private\n\n  let initialLoad = true;\n  let currentEmojis = [];\n  let currentEmojisWithCategories = []; // eslint-disable-line no-unused-vars\n\n  let rawSearchText = \"\";\n  let searchText = \"\";\n  let rootElement;\n  let baselineEmoji;\n  let tabpanelElement;\n  let searchMode = false; // eslint-disable-line no-unused-vars\n\n  let activeSearchItem = -1;\n  let message; // eslint-disable-line no-unused-vars\n\n  let computedIndicatorWidth = 0;\n  let indicatorStyle = \"\"; // eslint-disable-line no-unused-vars\n\n  let skinTonePickerExpanded = false;\n  let skinTonePickerExpandedAfterAnimation = false; // eslint-disable-line no-unused-vars\n\n  let skinToneDropdown;\n  let currentSkinTone = 0;\n  let activeSkinTone = 0;\n  let skinToneButtonText; // eslint-disable-line no-unused-vars\n\n  let pickerStyle; // eslint-disable-line no-unused-vars\n\n  let skinToneButtonLabel = \"\"; // eslint-disable-line no-unused-vars\n\n  let skinTones = [];\n  let currentFavorites = []; // eslint-disable-line no-unused-vars\n\n  let defaultFavoriteEmojis;\n  let numColumns = DEFAULT_NUM_COLUMNS;\n  let scrollbarWidth = 0; // eslint-disable-line no-unused-vars\n\n  let currentGroupIndex = 0;\n  let groups$1 = groups;\n  let currentGroup;\n  let loaded = false; // eslint-disable-line no-unused-vars\n\n  let activeSearchItemId; // eslint-disable-line no-unused-vars\n  //\n  // Utils/helpers\n  //\n\n  function focus(id) {\n    rootElement.getRootNode().getElementById(id).focus();\n  } // fire a custom event that crosses the shadow boundary\n\n\n  function fireEvent(name, detail) {\n    rootElement.dispatchEvent(new CustomEvent(name, {\n      detail,\n      bubbles: true,\n      composed: true\n    }));\n  } // eslint-disable-next-line no-unused-vars\n\n\n  function labelWithSkin(emoji, currentSkinTone) {\n    return uniq([emoji.name || unicodeWithSkin(emoji, currentSkinTone), ...emoji.shortcodes]).join(\", \");\n  } //\n  // Determine the emoji support level (in requestIdleCallback)\n  //\n\n\n  emojiSupportLevelPromise.then(level => {\n    if (!level) {\n      $$invalidate(9, message = i18n.emojiUnsupportedMessage);\n    }\n  }); // TODO: this is a bizarre way to set these default properties, but currently Svelte\n  // renders custom elements in an odd way - props are not set when calling the constructor,\n  // but are only set later. This would cause a double render or a double-fetch of\n  // the dataSource, which is bad. Delaying with a microtask avoids this.\n  // See https://github.com/sveltejs/svelte/pull/4527\n\n  onMount(async () => {\n    await tick();\n    $$invalidate(38, locale = locale || DEFAULT_LOCALE);\n    $$invalidate(39, dataSource = dataSource || DEFAULT_DATA_SOURCE);\n  });\n  onDestroy(async () => {\n    if (database) {\n      await database.close();\n    }\n  }); //\n  // Calculate the width of the emoji grid. This serves two purposes:\n  // 1) Re-calculate the --num-columns var because it may have changed\n  // 2) Re-calculate the scrollbar width because it may have changed\n  //   (i.e. because the number of items changed)\n  //\n  // eslint-disable-next-line no-unused-vars\n\n  function calculateEmojiGridWidth(node) {\n    return calculateWidth(node, width => {\n      const newNumColumns = \"production\" === \"test\" ? DEFAULT_NUM_COLUMNS : parseInt(getComputedStyle(rootElement).getPropertyValue(\"--num-columns\"), 10);\n      const parentWidth = \"production\" === \"test\" ? 1 : node.parentElement.getBoundingClientRect().width; // jsdom throws an error here occasionally\n\n      const newScrollbarWidth = parentWidth - width;\n      $$invalidate(54, numColumns = newNumColumns);\n      $$invalidate(21, scrollbarWidth = newScrollbarWidth);\n    });\n  } //\n  // Animate the indicator\n  //\n  // eslint-disable-next-line no-unused-vars\n\n\n  function calculateIndicatorWidth(node) {\n    return calculateWidth(node, width => {\n      $$invalidate(52, computedIndicatorWidth = width);\n    });\n  }\n\n  function checkZwjSupportAndUpdate(zwjEmojisToCheck) {\n    const rootNode = rootElement.getRootNode(); // Jest doesn't seem to understand that shadowRoot.getElementById() is a thing\n\n    const emojiToDomNode = \"production\" === \"test\" ? emoji => rootNode.querySelector(`[id=${JSON.stringify(\"emo-\" + emoji.id)}]`) : emoji => rootNode.getElementById(`emo-${emoji.id}`);\n    checkZwjSupport(zwjEmojisToCheck, baselineEmoji, emojiToDomNode); // force update\n\n    $$invalidate(1, currentEmojis = currentEmojis); // eslint-disable-line no-self-assign\n  }\n\n  function isZwjSupported(emoji) {\n    return !emoji.unicode || !hasZwj(emoji) || supportedZwjEmojis.get(emoji.unicode);\n  }\n\n  async function filterEmojisByVersion(emojis) {\n    const emojiSupportLevel = await emojiSupportLevelPromise; // !version corresponds to custom emoji\n\n    return emojis.filter(({\n      version\n    }) => !version || version <= emojiSupportLevel);\n  }\n\n  async function summarizeEmojis(emojis) {\n    return summarizeEmojisForUI(emojis, await emojiSupportLevelPromise);\n  }\n\n  async function getEmojisByGroup(group) {\n    if (typeof group === \"undefined\") {\n      return [];\n    } // -1 is custom emoji\n\n\n    const emoji = group === -1 ? customEmoji : await database.getEmojiByGroup(group);\n    return summarizeEmojis(await filterEmojisByVersion(emoji));\n  }\n\n  async function getEmojisBySearchQuery(query) {\n    return summarizeEmojis(await filterEmojisByVersion(await database.getEmojiBySearchQuery(query)));\n  } // eslint-disable-next-line no-unused-vars\n\n\n  function onSearchKeydown(event) {\n    if (!searchMode || !currentEmojis.length) {\n      return;\n    }\n\n    const goToNextOrPrevious = previous => {\n      halt(event);\n      $$invalidate(8, activeSearchItem = incrementOrDecrement(previous, activeSearchItem, currentEmojis));\n    };\n\n    switch (event.key) {\n      case \"ArrowDown\":\n        return goToNextOrPrevious(false);\n\n      case \"ArrowUp\":\n        return goToNextOrPrevious(true);\n\n      case \"Enter\":\n        if (activeSearchItem !== -1) {\n          halt(event);\n          return clickEmoji(currentEmojis[activeSearchItem].id);\n        } else if (currentEmojis.length) {\n          $$invalidate(8, activeSearchItem = 0);\n        }\n\n    }\n  } //\n  // Handle user input on nav\n  //\n  // eslint-disable-next-line no-unused-vars\n\n\n  function onNavClick(group) {\n    $$invalidate(3, rawSearchText = \"\");\n    $$invalidate(51, searchText = \"\");\n    $$invalidate(8, activeSearchItem = -1);\n    $$invalidate(55, currentGroupIndex = groups$1.findIndex(_ => _.id === group.id));\n  } // eslint-disable-next-line no-unused-vars\n\n\n  function onNavKeydown(event) {\n    const {\n      target,\n      key\n    } = event;\n\n    const doFocus = el => {\n      if (el) {\n        halt(event);\n        el.focus();\n      }\n    };\n\n    switch (key) {\n      case \"ArrowLeft\":\n        return doFocus(target.previousSibling);\n\n      case \"ArrowRight\":\n        return doFocus(target.nextSibling);\n\n      case \"Home\":\n        return doFocus(target.parentElement.firstChild);\n\n      case \"End\":\n        return doFocus(target.parentElement.lastChild);\n    }\n  } //\n  // Handle user input on an emoji\n  //\n\n\n  async function clickEmoji(unicodeOrName) {\n    const emoji = await database.getEmojiByUnicodeOrName(unicodeOrName);\n    const emojiSummary = [...currentEmojis, ...currentFavorites].find(_ => _.id === unicodeOrName);\n    const skinTonedUnicode = emojiSummary.unicode && unicodeWithSkin(emojiSummary, currentSkinTone);\n    await database.incrementFavoriteEmojiCount(unicodeOrName); // eslint-disable-next-line no-self-assign\n\n    $$invalidate(53, defaultFavoriteEmojis = defaultFavoriteEmojis); // force favorites to re-render\n\n    fireEvent(\"emoji-click\", {\n      emoji,\n      skinTone: currentSkinTone,\n      ...(skinTonedUnicode && {\n        unicode: skinTonedUnicode\n      }),\n      ...(emojiSummary.name && {\n        name: emojiSummary.name\n      })\n    });\n  } // eslint-disable-next-line no-unused-vars\n\n\n  async function onEmojiClick(event) {\n    const {\n      target\n    } = event;\n\n    if (!target.classList.contains(\"emoji\")) {\n      return;\n    }\n\n    halt(event);\n    const id = target.id.substring(4); // replace 'emo-' or 'fav-' prefix\n\n    /* no await */\n\n    clickEmoji(id);\n  } //\n  // Handle user input on the skintone picker\n  //\n  // eslint-disable-next-line no-unused-vars\n\n\n  async function onSkinToneOptionsClick(event) {\n    const {\n      target\n    } = event;\n\n    if (!target.classList.contains(\"skintone-option\")) {\n      return;\n    }\n\n    halt(event);\n    const skinTone = parseInt(target.id.slice(9), 10); // remove 'skintone-' prefix\n\n    $$invalidate(14, currentSkinTone = skinTone);\n    $$invalidate(11, skinTonePickerExpanded = false);\n    focus(\"skintone-button\");\n    fireEvent(\"skin-tone-change\", {\n      skinTone\n    });\n    /* no await */\n\n    database.setPreferredSkinTone(skinTone);\n  } // eslint-disable-next-line no-unused-vars\n\n\n  async function onClickSkinToneButton(event) {\n    $$invalidate(11, skinTonePickerExpanded = !skinTonePickerExpanded);\n    $$invalidate(15, activeSkinTone = currentSkinTone);\n\n    if (skinTonePickerExpanded) {\n      halt(event);\n      rAF(() => focus(`skintone-${activeSkinTone}`));\n    }\n  } // eslint-disable-next-line no-unused-vars\n\n\n  function onSkinToneOptionsKeydown(event) {\n    if (!skinTonePickerExpanded) {\n      return;\n    }\n\n    const changeActiveSkinTone = async nextSkinTone => {\n      halt(event);\n      $$invalidate(15, activeSkinTone = nextSkinTone);\n      await tick();\n      focus(`skintone-${activeSkinTone}`);\n    };\n\n    switch (event.key) {\n      case \"ArrowUp\":\n        return changeActiveSkinTone(incrementOrDecrement(true, activeSkinTone, skinTones));\n\n      case \"ArrowDown\":\n        return changeActiveSkinTone(incrementOrDecrement(false, activeSkinTone, skinTones));\n\n      case \"Home\":\n        return changeActiveSkinTone(0);\n\n      case \"End\":\n        return changeActiveSkinTone(skinTones.length - 1);\n\n      case \"Enter\":\n        // enter on keydown, space on keyup. this is just how browsers work for buttons\n        // https://lists.w3.org/Archives/Public/w3c-wai-ig/2019JanMar/0086.html\n        return onSkinToneOptionsClick(event);\n\n      case \"Escape\":\n        halt(event);\n        return focus(\"skintone-button\");\n    }\n  } // eslint-disable-next-line no-unused-vars\n\n\n  function onSkinToneOptionsKeyup(event) {\n    if (!skinTonePickerExpanded) {\n      return;\n    }\n\n    switch (event.key) {\n      case \" \":\n        // enter on keydown, space on keyup. this is just how browsers work for buttons\n        // https://lists.w3.org/Archives/Public/w3c-wai-ig/2019JanMar/0086.html\n        return onSkinToneOptionsClick(event);\n    }\n  } // eslint-disable-next-line no-unused-vars\n\n\n  async function onSkinToneOptionsFocusOut(event) {\n    // On blur outside of the skintone options, collapse the skintone picker.\n    // Except if focus is just moving to another skintone option, e.g. pressing up/down to change focus\n    const {\n      relatedTarget\n    } = event;\n\n    if (!relatedTarget || !relatedTarget.classList.contains(\"skintone-option\")) {\n      $$invalidate(11, skinTonePickerExpanded = false);\n    }\n  }\n\n  function input_input_handler() {\n    rawSearchText = this.value;\n    $$invalidate(3, rawSearchText);\n  }\n\n  function div3_binding($$value) {\n    binding_callbacks[$$value ? \"unshift\" : \"push\"](() => {\n      skinToneDropdown = $$value;\n      $$invalidate(13, skinToneDropdown);\n    });\n  }\n\n  const click_handler = group => onNavClick(group);\n\n  function div9_binding($$value) {\n    binding_callbacks[$$value ? \"unshift\" : \"push\"](() => {\n      tabpanelElement = $$value;\n      ((((((((($$invalidate(6, tabpanelElement), $$invalidate(1, currentEmojis)), $$invalidate(40, database)), $$invalidate(51, searchText)), $$invalidate(23, currentGroup)), $$invalidate(38, locale)), $$invalidate(39, dataSource)), $$invalidate(42, customEmoji)), $$invalidate(3, rawSearchText)), $$invalidate(22, groups$1)), $$invalidate(55, currentGroupIndex);\n    });\n  }\n\n  function button1_binding($$value) {\n    binding_callbacks[$$value ? \"unshift\" : \"push\"](() => {\n      baselineEmoji = $$value;\n      $$invalidate(5, baselineEmoji);\n    });\n  }\n\n  function section_binding($$value) {\n    binding_callbacks[$$value ? \"unshift\" : \"push\"](() => {\n      rootElement = $$value;\n      $$invalidate(4, rootElement);\n    });\n  }\n\n  $$self.$$set = $$props => {\n    if (\"locale\" in $$props) $$invalidate(38, locale = $$props.locale);\n    if (\"dataSource\" in $$props) $$invalidate(39, dataSource = $$props.dataSource);\n    if (\"skinToneEmoji\" in $$props) $$invalidate(41, skinToneEmoji = $$props.skinToneEmoji);\n    if (\"i18n\" in $$props) $$invalidate(0, i18n = $$props.i18n);\n    if (\"database\" in $$props) $$invalidate(40, database = $$props.database);\n    if (\"customEmoji\" in $$props) $$invalidate(42, customEmoji = $$props.customEmoji);\n    if (\"customCategorySorting\" in $$props) $$invalidate(43, customCategorySorting = $$props.customCategorySorting);\n  };\n\n  $$self.$$.update = () => {\n    if ($$self.$$.dirty[1] &\n    /*locale, dataSource, database*/\n    896) {\n      {\n        if (locale && dataSource && (!database || database.locale !== locale && database.dataSource !== dataSource)) {\n          $$invalidate(40, database = new Database({\n            dataSource,\n            locale\n          }));\n        }\n      }\n    }\n\n    if ($$self.$$.dirty[1] &\n    /*customEmoji, database*/\n    2560) {\n      //\n      // Set or update the customEmoji\n      //\n      {\n        if (customEmoji && database) {\n          $$invalidate(40, database.customEmoji = customEmoji, database);\n        }\n      }\n    }\n\n    if ($$self.$$.dirty[0] &\n    /*i18n, message*/\n    513 | $$self.$$.dirty[1] &\n    /*database*/\n    512) {\n      //\n      // Set or update the database object\n      //\n      {\n        // show a Loading message if it takes a long time, or show an error if there's a network/IDB error\n        async function handleDatabaseLoading() {\n          const timeoutHandle = setTimeout(() => {\n            $$invalidate(9, message = i18n.loadingMessage);\n          }, TIMEOUT_BEFORE_LOADING_MESSAGE);\n\n          try {\n            await database.ready();\n            $$invalidate(24, loaded = true);\n          } catch (err) {\n            console.error(err);\n            $$invalidate(9, message = i18n.networkErrorMessage);\n          } finally {\n            clearTimeout(timeoutHandle);\n\n            if (message === i18n.loadingMessage) {\n              $$invalidate(9, message = \"\");\n            }\n          }\n        }\n\n        if (database) {\n          /* no await */\n          handleDatabaseLoading();\n        }\n      }\n    }\n\n    if ($$self.$$.dirty[0] &\n    /*groups*/\n    4194304 | $$self.$$.dirty[1] &\n    /*customEmoji*/\n    2048) {\n      {\n        if (customEmoji && customEmoji.length) {\n          $$invalidate(22, groups$1 = [customGroup, ...groups]);\n        } else if (groups$1 !== groups) {\n          $$invalidate(22, groups$1 = groups);\n        }\n      }\n    }\n\n    if ($$self.$$.dirty[0] &\n    /*rawSearchText*/\n    8) {\n      //\n      // Handle user input on the search input\n      //\n      {\n        rIC(() => {\n          $$invalidate(51, searchText = (rawSearchText || \"\").trim()); // defer to avoid input delays, plus we can trim here\n\n          $$invalidate(8, activeSearchItem = -1);\n        });\n      }\n    }\n\n    if ($$self.$$.dirty[0] &\n    /*groups*/\n    4194304 | $$self.$$.dirty[1] &\n    /*currentGroupIndex*/\n    16777216) {\n      //\n      // Update the current group based on the currentGroupIndex\n      //\n      $$invalidate(23, currentGroup = groups$1[currentGroupIndex]);\n    }\n\n    if ($$self.$$.dirty[0] &\n    /*currentGroup*/\n    8388608 | $$self.$$.dirty[1] &\n    /*database, searchText*/\n    1049088) {\n      //\n      // Set or update the currentEmojis. Check for invalid ZWJ renderings\n      // (i.e. double emoji).\n      //\n      {\n        async function updateEmojis() {\n          if (!database) {\n            $$invalidate(1, currentEmojis = []);\n            $$invalidate(7, searchMode = false);\n          } else if (searchText.length >= MIN_SEARCH_TEXT_LENGTH) {\n            $$invalidate(1, currentEmojis = await getEmojisBySearchQuery(searchText));\n            $$invalidate(7, searchMode = true);\n          } else if (currentGroup) {\n            $$invalidate(1, currentEmojis = await getEmojisByGroup(currentGroup.id));\n            $$invalidate(7, searchMode = false);\n          }\n        }\n        /* no await */\n\n\n        updateEmojis();\n      }\n    }\n\n    if ($$self.$$.dirty[0] &\n    /*groups, searchMode*/\n    4194432) {\n      //\n      // Global styles for the entire picker\n      //\n      $$invalidate(17, pickerStyle = `\n  --font-family: ${FONT_FAMILY};\n  --num-groups: ${groups$1.length}; \n  --indicator-opacity: ${searchMode ? 0 : 1}; \n  --num-skintones: ${NUM_SKIN_TONES};`);\n    }\n\n    if ($$self.$$.dirty[1] &\n    /*database*/\n    512) {\n      //\n      // Set or update the preferred skin tone\n      //\n      {\n        async function updatePreferredSkinTone() {\n          if (database) {\n            $$invalidate(14, currentSkinTone = await database.getPreferredSkinTone());\n          }\n        }\n        /* no await */\n\n\n        updatePreferredSkinTone();\n      }\n    }\n\n    if ($$self.$$.dirty[1] &\n    /*skinToneEmoji*/\n    1024) {\n      $$invalidate(19, skinTones = Array(NUM_SKIN_TONES).fill().map((_, i) => applySkinTone(skinToneEmoji, i)));\n    }\n\n    if ($$self.$$.dirty[0] &\n    /*skinTones, currentSkinTone*/\n    540672) {\n      $$invalidate(16, skinToneButtonText = skinTones[currentSkinTone]);\n    }\n\n    if ($$self.$$.dirty[0] &\n    /*i18n, currentSkinTone*/\n    16385) {\n      $$invalidate(18, skinToneButtonLabel = i18n.skinToneLabel.replace(\"{skinTone}\", i18n.skinTones[currentSkinTone]));\n    }\n\n    if ($$self.$$.dirty[1] &\n    /*database*/\n    512) {\n      //\n      // Set or update the favorites emojis\n      //\n      {\n        async function updateDefaultFavoriteEmojis() {\n          $$invalidate(53, defaultFavoriteEmojis = (await Promise.all(MOST_COMMONLY_USED_EMOJI.map(unicode => database.getEmojiByUnicodeOrName(unicode)))).filter(Boolean)); // filter because in Jest tests we don't have all the emoji in the DB\n        }\n\n        if (database) {\n          /* no await */\n          updateDefaultFavoriteEmojis();\n        }\n      }\n    }\n\n    if ($$self.$$.dirty[1] &\n    /*database, numColumns, defaultFavoriteEmojis*/\n    12583424) {\n      {\n        async function updateFavorites() {\n          const dbFavorites = await database.getTopFavoriteEmoji(numColumns);\n          const favorites = await summarizeEmojis(uniqBy([...dbFavorites, ...defaultFavoriteEmojis], _ => _.unicode || _.name).slice(0, numColumns));\n          $$invalidate(20, currentFavorites = favorites);\n        }\n\n        if (database && defaultFavoriteEmojis) {\n          /* no await */\n          updateFavorites();\n        }\n      }\n    }\n\n    if ($$self.$$.dirty[1] &\n    /*currentGroupIndex, computedIndicatorWidth*/\n    18874368) {\n      // TODO: Chrome has an unfortunate bug where we can't use a simple percent-based transform\n      // here, becuause it's janky. You can especially see this on a Nexus 5.\n      // So we calculate of the indicator and use exact pixel values in the animation instead\n      // (where ResizeObserver is supported).\n      {\n        /* istanbul ignore if */\n        if (resizeObserverSupported) {\n          $$invalidate(10, indicatorStyle = `transform: translateX(${currentGroupIndex * computedIndicatorWidth}px);`); // exact pixels\n        } else {\n          $$invalidate(10, indicatorStyle = `transform: translateX(${currentGroupIndex * 100}%);`); // fallback to percent-based\n        }\n      }\n    }\n\n    if ($$self.$$.dirty[0] &\n    /*currentEmojis*/\n    2) {\n      // Some emojis have their ligatures rendered as two or more consecutive emojis\n      // We want to treat these the same as unsupported emojis, so we compare their\n      // widths against the baseline widths and remove them as necessary\n      {\n        const zwjEmojisToCheck = currentEmojis.filter(emoji => emoji.unicode).filter(emoji => hasZwj(emoji) && !supportedZwjEmojis.has(emoji.unicode)); // filter custom emoji\n\n        if (zwjEmojisToCheck.length) {\n          // render now, check their length later\n          rAF(() => checkZwjSupportAndUpdate(zwjEmojisToCheck));\n        } else {\n          $$invalidate(1, currentEmojis = currentEmojis.filter(isZwjSupported));\n          rAF(() => {\n            // reset scroll top to 0 when emojis change\n            if (\"production\" !== \"test\") {\n              $$invalidate(6, tabpanelElement.scrollTop = 0, tabpanelElement);\n            }\n          });\n        }\n      }\n    }\n\n    if ($$self.$$.dirty[0] &\n    /*currentEmojis, currentFavorites*/\n    1048578 | $$self.$$.dirty[1] &\n    /*initialLoad*/\n    524288) {\n      {\n        // consider initialLoad to be complete when the first tabpanel and favorites are rendered\n        if (\"production\" !== \"production\" || false) {\n          if (currentEmojis.length && currentFavorites.length && initialLoad) {\n            $$invalidate(50, initialLoad = false);\n            requestPostAnimationFrame(() => stop());\n          }\n        }\n      }\n    }\n\n    if ($$self.$$.dirty[0] &\n    /*searchMode, currentEmojis*/\n    130 | $$self.$$.dirty[1] &\n    /*customCategorySorting*/\n    4096) {\n      //\n      // Derive currentEmojisWithCategories from currentEmojis. This is always done even if there\n      // are no categories, because it's just easier to code the HTML this way.\n      //\n      {\n        function calculateCurrentEmojisWithCategories() {\n          if (searchMode) {\n            return [{\n              category: \"\",\n              emojis: currentEmojis\n            }];\n          }\n\n          const categoriesToEmoji = new Map();\n\n          for (const emoji of currentEmojis) {\n            const category = emoji.category || \"\";\n            let emojis = categoriesToEmoji.get(category);\n\n            if (!emojis) {\n              emojis = [];\n              categoriesToEmoji.set(category, emojis);\n            }\n\n            emojis.push(emoji);\n          }\n\n          return [...categoriesToEmoji.entries()].map(([category, emojis]) => ({\n            category,\n            emojis\n          })).sort((a, b) => customCategorySorting(a.category, b.category));\n        }\n\n        $$invalidate(2, currentEmojisWithCategories = calculateCurrentEmojisWithCategories());\n      }\n    }\n\n    if ($$self.$$.dirty[0] &\n    /*activeSearchItem, currentEmojis*/\n    258) {\n      //\n      // Handle active search item (i.e. pressing up or down while searching)\n      //\n      $$invalidate(25, activeSearchItemId = activeSearchItem !== -1 && currentEmojis[activeSearchItem].id);\n    }\n\n    if ($$self.$$.dirty[0] &\n    /*skinTonePickerExpanded, skinToneDropdown*/\n    10240) {\n      // To make the animation nicer, change the z-index of the skintone picker button\n      // *after* the animation has played. This makes it appear that the picker box\n      // is expanding \"below\" the button\n      {\n        if (skinTonePickerExpanded) {\n          skinToneDropdown.addEventListener(\"transitionend\", () => {\n            $$invalidate(12, skinTonePickerExpandedAfterAnimation = true);\n          }, {\n            once: true\n          });\n        } else {\n          $$invalidate(12, skinTonePickerExpandedAfterAnimation = false);\n        }\n      }\n    }\n  };\n\n  return [i18n, currentEmojis, currentEmojisWithCategories, rawSearchText, rootElement, baselineEmoji, tabpanelElement, searchMode, activeSearchItem, message, indicatorStyle, skinTonePickerExpanded, skinTonePickerExpandedAfterAnimation, skinToneDropdown, currentSkinTone, activeSkinTone, skinToneButtonText, pickerStyle, skinToneButtonLabel, skinTones, currentFavorites, scrollbarWidth, groups$1, currentGroup, loaded, activeSearchItemId, labelWithSkin, calculateEmojiGridWidth, calculateIndicatorWidth, onSearchKeydown, onNavClick, onNavKeydown, onEmojiClick, onSkinToneOptionsClick, onClickSkinToneButton, onSkinToneOptionsKeydown, onSkinToneOptionsKeyup, onSkinToneOptionsFocusOut, locale, dataSource, database, skinToneEmoji, customEmoji, customCategorySorting, input_input_handler, div3_binding, click_handler, div9_binding, button1_binding, section_binding];\n}\n\nclass Picker extends SvelteElement {\n  constructor(options) {\n    super();\n    this.shadowRoot.innerHTML = `<style>:host{--emoji-padding:0.5rem;--emoji-size:1.375rem;--indicator-height:3px;--input-border-radius:0.5rem;--input-border-size:1px;--input-font-size:1rem;--input-line-height:1.5;--input-padding:0.25rem;--num-columns:8;--outline-size:2px;--border-size:1px;--skintone-border-radius:1rem;--category-font-size:1rem;display:flex;width:min-content;height:400px}:host,:host(.light){--background:#fff;--border-color:#e0e0e0;--indicator-color:#385ac1;--input-border-color:#999;--input-font-color:#111;--input-placeholder-color:#999;--outline-color:#999;--category-font-color:#111;--button-active-background:#e6e6e6;--button-hover-background:#d9d9d9}:host(.dark){--background:#222;--border-color:#444;--indicator-color:#5373ec;--input-border-color:#ccc;--input-font-color:#efefef;--input-placeholder-color:#ccc;--outline-color:#fff;--category-font-color:#efefef;--button-active-background:#555;--button-hover-background:#484848}@media(prefers-color-scheme:dark){:host{--background:#222;--border-color:#444;--indicator-color:#5373ec;--input-border-color:#ccc;--input-font-color:#efefef;--input-placeholder-color:#ccc;--outline-color:#fff;--category-font-color:#efefef;--button-active-background:#555;--button-hover-background:#484848}}button{margin:0;padding:0;border:none;background:none;box-shadow:none;cursor:pointer;-webkit-tap-highlight-color:transparent}button::-moz-focus-inner{border:0}input{padding:0;margin:0;line-height:1.15;font-family:inherit}input[type=search]{-webkit-appearance:none}:focus{outline:var(--outline-color) solid var(--outline-size);outline-offset:calc(-1*var(--outline-size))}:host([data-js-focus-visible]) :focus:not([data-focus-visible-added]){outline:none}:focus:not(:focus-visible){outline:none}.hide-focus{outline:none}*{box-sizing:border-box}.picker{contain:content;display:flex;flex-direction:column;background:var(--background);border:var(--border-size) solid var(--border-color);width:100%;height:100%;overflow:hidden;--total-emoji-size:calc(var(--emoji-size) + 2*var(--emoji-padding))}.sr-only{position:absolute;width:1px;height:1px;padding:0;margin:-1px;overflow:hidden;clip:rect(0,0,0,0);border:0}.hidden{opacity:0;pointer-events:none}.abs-pos{position:absolute;left:0;top:0}.gone{display:none!important}.cursor-pointer{cursor:pointer}.skintone-button-wrapper{background:var(--background);z-index:3}.skintone-button-wrapper.expanded{z-index:1}.skintone-list{position:absolute;right:0;top:0;z-index:2;overflow:visible;background:var(--background);border-bottom:var(--border-size) solid var(--border-color);border-radius:0 0 var(--skintone-border-radius) var(--skintone-border-radius);will-change:transform;transition:transform .2s ease-in-out;transform-origin:center 0}@media(prefers-reduced-motion:reduce){.skintone-list{transition-duration:1ms}}.skintone-list.no-animate{transition:none}.tabpanel{overflow-y:auto;-webkit-overflow-scrolling:touch;will-change:transform;min-height:0;flex:1;contain:content}.emoji-menu{display:grid;grid-template-columns:repeat(var(--num-columns),var(--total-emoji-size));justify-content:space-around;align-items:flex-start;width:100%}.category{padding:var(--emoji-padding);font-size:var(--category-font-size);color:var(--category-font-color)}.emoji,button.emoji{font-size:var(--emoji-size);display:flex;align-items:center;justify-content:center;border-radius:100%;height:var(--total-emoji-size);width:var(--total-emoji-size);line-height:1;overflow:hidden;font-family:var(--font-family)}@media(hover:hover) and (pointer:fine){.emoji:hover,button.emoji:hover{background:var(--button-hover-background)}}.emoji.active,.emoji:active,button.emoji.active,button.emoji:active{background:var(--button-active-background)}.custom-emoji{height:var(--total-emoji-size);width:var(--total-emoji-size);padding:var(--emoji-padding);object-fit:contain;pointer-events:none;background-repeat:no-repeat;background-position:50%;background-size:var(--emoji-size) var(--emoji-size)}.nav{display:grid;justify-content:space-between;contain:content}.nav,.nav-button{align-items:center}.nav-button{display:flex;justify-content:center}.indicator-wrapper{display:flex;border-bottom:1px solid var(--border-color)}.indicator{width:calc(100%/var(--num-groups));height:var(--indicator-height);opacity:var(--indicator-opacity);background-color:var(--indicator-color);will-change:transform,opacity;transition:opacity .1s linear,transform .25s ease-in-out}@media(prefers-reduced-motion:reduce){.indicator{will-change:opacity;transition:opacity .1s linear}}.pad-top{width:100%;height:var(--emoji-padding);z-index:3;background:var(--background)}.search-row{display:flex;align-items:center;position:relative;padding-left:var(--emoji-padding);padding-bottom:var(--emoji-padding)}.search-wrapper{flex:1;min-width:0}input.search{padding:var(--input-padding);border-radius:var(--input-border-radius);border:var(--input-border-size) solid var(--input-border-color);background:var(--background);color:var(--input-font-color);width:100%;font-size:var(--input-font-size);line-height:var(--input-line-height)}input.search::placeholder{color:var(--input-placeholder-color)}.favorites{display:flex;flex-direction:row;border-top:var(--border-size) solid var(--border-color);contain:content}.message{padding:var(--emoji-padding)}</style>`;\n    init(this, {\n      target: this.shadowRoot\n    }, instance, create_fragment, safe_not_equal, {\n      locale: 38,\n      dataSource: 39,\n      skinToneEmoji: 41,\n      i18n: 0,\n      database: 40,\n      customEmoji: 42,\n      customCategorySorting: 43\n    }, [-1, -1, -1]);\n\n    if (options) {\n      if (options.target) {\n        insert(options.target, this, options.anchor);\n      }\n\n      if (options.props) {\n        this.$set(options.props);\n        flush();\n      }\n    }\n  }\n\n  static get observedAttributes() {\n    return [\"locale\", \"dataSource\", \"skinToneEmoji\", \"i18n\", \"database\", \"customEmoji\", \"customCategorySorting\"];\n  }\n\n  get locale() {\n    return this.$$.ctx[38];\n  }\n\n  set locale(locale) {\n    this.$set({\n      locale\n    });\n    flush();\n  }\n\n  get dataSource() {\n    return this.$$.ctx[39];\n  }\n\n  set dataSource(dataSource) {\n    this.$set({\n      dataSource\n    });\n    flush();\n  }\n\n  get skinToneEmoji() {\n    return this.$$.ctx[41];\n  }\n\n  set skinToneEmoji(skinToneEmoji) {\n    this.$set({\n      skinToneEmoji\n    });\n    flush();\n  }\n\n  get i18n() {\n    return this.$$.ctx[0];\n  }\n\n  set i18n(i18n) {\n    this.$set({\n      i18n\n    });\n    flush();\n  }\n\n  get database() {\n    return this.$$.ctx[40];\n  }\n\n  set database(database) {\n    this.$set({\n      database\n    });\n    flush();\n  }\n\n  get customEmoji() {\n    return this.$$.ctx[42];\n  }\n\n  set customEmoji(customEmoji) {\n    this.$set({\n      customEmoji\n    });\n    flush();\n  }\n\n  get customCategorySorting() {\n    return this.$$.ctx[43];\n  }\n\n  set customCategorySorting(customCategorySorting) {\n    this.$set({\n      customCategorySorting\n    });\n    flush();\n  }\n\n}\n\nclass Picker$1 extends Picker {\n  constructor(props) {\n    // Make the API simpler, directly pass in the props\n    super({\n      props\n    });\n  }\n\n  disconnectedCallback() {\n    this.$destroy();\n  }\n\n  static get observedAttributes() {\n    return ['locale', 'data-source', 'skin-tone-emoji']; // complex objects aren't supported, also use kebab-case\n  } // via https://github.com/sveltejs/svelte/issues/3852#issuecomment-665037015\n\n\n  attributeChangedCallback(attrName, oldValue, newValue) {\n    super.attributeChangedCallback(attrName.replace(/-([a-z])/g, (_, up) => up.toUpperCase()), oldValue, newValue);\n  }\n\n}\n\ncustomElements.define('emoji-picker', Picker$1);\nexport default Picker$1;","map":{"version":3,"sources":["/home/joaquim/internship/superchat/node_modules/emoji-picker-element/picker.js"],"names":["Database","noop","run","fn","blank_object","Object","create","run_all","fns","forEach","is_function","thing","safe_not_equal","a","b","is_empty","obj","keys","length","action_destroyer","action_result","destroy","append","target","node","appendChild","insert","anchor","insertBefore","detach","parentNode","removeChild","element","name","document","createElement","text","data","createTextNode","listen","event","handler","options","addEventListener","removeEventListener","attr","attribute","value","removeAttribute","getAttribute","setAttribute","children","Array","from","childNodes","set_data","wholeText","set_input_value","input","set_style","key","important","style","setProperty","current_component","set_current_component","component","get_current_component","Error","onMount","$$","on_mount","push","onDestroy","on_destroy","dirty_components","binding_callbacks","render_callbacks","flush_callbacks","resolved_promise","Promise","resolve","update_scheduled","schedule_update","then","flush","tick","add_render_callback","flushing","seen_callbacks","Set","i","update","pop","callback","has","add","clear","fragment","before_update","dirty","p","ctx","after_update","outroing","transition_in","block","local","delete","globals","window","globalThis","global","destroy_block","lookup","d","update_keyed_each","old_blocks","get_key","dynamic","list","create_each_block","next","get_context","o","n","old_indexes","new_blocks","new_lookup","Map","deltas","child_ctx","get","c","set","Math","abs","will_move","did_move","m","first","new_block","old_block","new_key","old_key","mount_component","new_on_destroy","map","filter","destroy_component","detaching","make_dirty","fill","init","instance","create_fragment","not_equal","props","parent_component","prop_values","bound","context","callbacks","skip_bound","ready","ret","rest","hydrate","nodes","l","intro","SvelteElement","HTMLElement","constructor","attachShadow","mode","connectedCallback","slotted","attributeChangedCallback","_oldValue","newValue","$destroy","$on","type","index","indexOf","splice","$set","$$props","$$set","enI18n","categoriesLabel","emojiUnsupportedMessage","favoritesLabel","loadingMessage","networkErrorMessage","regionLabel","searchDescription","searchLabel","searchResultsLabel","skinToneDescription","skinToneLabel","skinTonesLabel","skinTones","categories","custom","activities","objects","symbols","flags","allGroups","id","emoji","groups","slice","customGroup","DEFAULT_DATA_SOURCE","DEFAULT_LOCALE","MIN_SEARCH_TEXT_LENGTH","NUM_SKIN_TONES","rIC","requestIdleCallback","setTimeout","hasZwj","unicode","includes","stop","str","versionsAndTestEmoji","TIMEOUT_BEFORE_LOADING_MESSAGE","DEFAULT_SKIN_TONE_EMOJI","DEFAULT_NUM_COLUMNS","MOST_COMMONLY_USED_EMOJI","FONT_FAMILY","getTextFeature","color","canvas","width","height","getContext","textBaseline","font","fillStyle","scale","fillText","getImageData","e","compareFeatures","feature1","feature2","feature1Str","join","feature2Str","startsWith","testColorEmojiSupported","determineEmojiSupportLevel","res","version","entries","log","emojiSupportLevelPromise","supportedZwjEmojis","VARIATION_SELECTOR","SKINTONE_MODIFIER","ZWJ","LIGHT_SKIN_TONE","LIGHT_SKIN_TONE_MODIFIER","applySkinTone","skinTone","zwjIndex","substring","String","fromCodePoint","endsWith","halt","preventDefault","stopPropagation","incrementOrDecrement","decrement","val","arr","uniqBy","func","item","summarizeEmojisForUI","emojis","emojiSupportLevel","toSimpleSkinsMap","skins","skin","tone","shortcodes","url","category","title","rAF","requestAnimationFrame","resizeObserverSupported","ResizeObserver","calculateWidth","onUpdate","resizeObserver","contentRect","observe","getBoundingClientRect","disconnect","calculateTextWidth","range","createRange","selectNode","firstChild","baselineEmojiWidth","checkZwjSupport","zwjEmojisToCheck","baselineEmoji","emojiToDomNode","domNode","emojiWidth","supported","requestPostAnimationFrame","uniq","_","Map_1","get_each_context","get_each_context_2","get_each_context_1","get_each_context_3","get_each_context_4","create_each_block_4","key_1","div","t_value","t","div_id_value","div_class_value","div_aria_selected_value","div_title_value","div_aria_label_value","create_each_block_3","button","button_aria_controls_value","button_aria_label_value","button_aria_selected_value","button_title_value","mounted","dispose","click_handler","args","new_ctx","create_else_block_1","create_if_block_1","unicodeWithSkin","create_each_block_2","button_role_value","button_class_value","button_id_value","select_block_type","current_block_type","if_block","create_each_block_1","div0","div0_id_value","div0_class_value","div1","each_blocks","each_1_lookup","div1_role_value","div1_aria_labelledby_value","div1_id_value","calculateEmojiGridWidth_action","each_value_2","call","create_else_block","img","img_src_value","src","create_if_block","select_block_type_1","section","div4","input_placeholder_value","input_aria_expanded_value","input_aria_activedescendant_value","label","t0_value","t0","span0","t1_value","t1","div2","button0","t2","button0_class_value","div2_class_value","span1","t3_value","t3","div3","each_blocks_3","each0_lookup","div3_class_value","div3_style_value","div3_aria_label_value","div3_aria_activedescendant_value","div3_aria_hidden_value","div5","each_blocks_2","each1_lookup","div5_aria_label_value","div7","div6","calculateIndicatorWidth_action","div8","t4","div8_class_value","div9","each_blocks_1","each2_lookup","div9_class_value","div9_role_value","div9_aria_label_value","div9_id_value","div10","each3_lookup","div10_class_value","div10_aria_label_value","div11","button1","section_aria_label_value","each_value_4","each_value_3","get_key_1","each_value_1","get_key_2","each_value","get_key_3","textContent","currentSkinTone","$$self","$$invalidate","locale","dataSource","skinToneEmoji","i18n","database","customEmoji","customCategorySorting","initialLoad","currentEmojis","currentEmojisWithCategories","rawSearchText","searchText","rootElement","tabpanelElement","searchMode","activeSearchItem","message","computedIndicatorWidth","indicatorStyle","skinTonePickerExpanded","skinTonePickerExpandedAfterAnimation","skinToneDropdown","activeSkinTone","skinToneButtonText","pickerStyle","skinToneButtonLabel","currentFavorites","defaultFavoriteEmojis","numColumns","scrollbarWidth","currentGroupIndex","groups$1","currentGroup","loaded","activeSearchItemId","focus","getRootNode","getElementById","fireEvent","detail","dispatchEvent","CustomEvent","bubbles","composed","labelWithSkin","level","close","calculateEmojiGridWidth","newNumColumns","parseInt","getComputedStyle","getPropertyValue","parentWidth","parentElement","newScrollbarWidth","calculateIndicatorWidth","checkZwjSupportAndUpdate","rootNode","querySelector","JSON","stringify","isZwjSupported","filterEmojisByVersion","summarizeEmojis","getEmojisByGroup","group","getEmojiByGroup","getEmojisBySearchQuery","query","getEmojiBySearchQuery","onSearchKeydown","goToNextOrPrevious","previous","clickEmoji","onNavClick","findIndex","onNavKeydown","doFocus","el","previousSibling","nextSibling","lastChild","unicodeOrName","getEmojiByUnicodeOrName","emojiSummary","find","skinTonedUnicode","incrementFavoriteEmojiCount","onEmojiClick","classList","contains","onSkinToneOptionsClick","setPreferredSkinTone","onClickSkinToneButton","onSkinToneOptionsKeydown","changeActiveSkinTone","nextSkinTone","onSkinToneOptionsKeyup","onSkinToneOptionsFocusOut","relatedTarget","input_input_handler","div3_binding","$$value","div9_binding","button1_binding","section_binding","handleDatabaseLoading","timeoutHandle","err","console","error","clearTimeout","trim","updateEmojis","updatePreferredSkinTone","getPreferredSkinTone","replace","updateDefaultFavoriteEmojis","all","Boolean","updateFavorites","dbFavorites","getTopFavoriteEmoji","favorites","scrollTop","calculateCurrentEmojisWithCategories","categoriesToEmoji","sort","once","Picker","shadowRoot","innerHTML","observedAttributes","Picker$1","disconnectedCallback","attrName","oldValue","up","toUpperCase","customElements","define"],"mappings":"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","sourcesContent":["import Database from './database.js';\n\nfunction noop() { }\nfunction run(fn) {\n    return fn();\n}\nfunction blank_object() {\n    return Object.create(null);\n}\nfunction run_all(fns) {\n    fns.forEach(run);\n}\nfunction is_function(thing) {\n    return typeof thing === 'function';\n}\nfunction safe_not_equal(a, b) {\n    return a != a ? b == b : a !== b || ((a && typeof a === 'object') || typeof a === 'function');\n}\nfunction is_empty(obj) {\n    return Object.keys(obj).length === 0;\n}\nfunction action_destroyer(action_result) {\n    return action_result && is_function(action_result.destroy) ? action_result.destroy : noop;\n}\n\nfunction append(target, node) {\n    target.appendChild(node);\n}\nfunction insert(target, node, anchor) {\n    target.insertBefore(node, anchor || null);\n}\nfunction detach(node) {\n    node.parentNode.removeChild(node);\n}\nfunction element(name) {\n    return document.createElement(name);\n}\nfunction text(data) {\n    return document.createTextNode(data);\n}\nfunction listen(node, event, handler, options) {\n    node.addEventListener(event, handler, options);\n    return () => node.removeEventListener(event, handler, options);\n}\nfunction attr(node, attribute, value) {\n    if (value == null)\n        node.removeAttribute(attribute);\n    else if (node.getAttribute(attribute) !== value)\n        node.setAttribute(attribute, value);\n}\nfunction children(element) {\n    return Array.from(element.childNodes);\n}\nfunction set_data(text, data) {\n    data = '' + data;\n    if (text.wholeText !== data)\n        text.data = data;\n}\nfunction set_input_value(input, value) {\n    input.value = value == null ? '' : value;\n}\nfunction set_style(node, key, value, important) {\n    node.style.setProperty(key, value, important ? 'important' : '');\n}\n\nlet current_component;\nfunction set_current_component(component) {\n    current_component = component;\n}\nfunction get_current_component() {\n    if (!current_component)\n        throw new Error(`Function called outside component initialization`);\n    return current_component;\n}\nfunction onMount(fn) {\n    get_current_component().$$.on_mount.push(fn);\n}\nfunction onDestroy(fn) {\n    get_current_component().$$.on_destroy.push(fn);\n}\n\nconst dirty_components = [];\nconst binding_callbacks = [];\nconst render_callbacks = [];\nconst flush_callbacks = [];\nconst resolved_promise = Promise.resolve();\nlet update_scheduled = false;\nfunction schedule_update() {\n    if (!update_scheduled) {\n        update_scheduled = true;\n        resolved_promise.then(flush);\n    }\n}\nfunction tick() {\n    schedule_update();\n    return resolved_promise;\n}\nfunction add_render_callback(fn) {\n    render_callbacks.push(fn);\n}\nlet flushing = false;\nconst seen_callbacks = new Set();\nfunction flush() {\n    if (flushing)\n        return;\n    flushing = true;\n    do {\n        // first, call beforeUpdate functions\n        // and update components\n        for (let i = 0; i < dirty_components.length; i += 1) {\n            const component = dirty_components[i];\n            set_current_component(component);\n            update(component.$$);\n        }\n        dirty_components.length = 0;\n        while (binding_callbacks.length)\n            binding_callbacks.pop()();\n        // then, once components are updated, call\n        // afterUpdate functions. This may cause\n        // subsequent updates...\n        for (let i = 0; i < render_callbacks.length; i += 1) {\n            const callback = render_callbacks[i];\n            if (!seen_callbacks.has(callback)) {\n                // ...so guard against infinite loops\n                seen_callbacks.add(callback);\n                callback();\n            }\n        }\n        render_callbacks.length = 0;\n    } while (dirty_components.length);\n    while (flush_callbacks.length) {\n        flush_callbacks.pop()();\n    }\n    update_scheduled = false;\n    flushing = false;\n    seen_callbacks.clear();\n}\nfunction update($$) {\n    if ($$.fragment !== null) {\n        $$.update();\n        run_all($$.before_update);\n        const dirty = $$.dirty;\n        $$.dirty = [-1];\n        $$.fragment && $$.fragment.p($$.ctx, dirty);\n        $$.after_update.forEach(add_render_callback);\n    }\n}\nconst outroing = new Set();\nfunction transition_in(block, local) {\n    if (block && block.i) {\n        outroing.delete(block);\n        block.i(local);\n    }\n}\n\nconst globals = (typeof window !== 'undefined'\n    ? window\n    : typeof globalThis !== 'undefined'\n        ? globalThis\n        : global);\n\nfunction destroy_block(block, lookup) {\n    block.d(1);\n    lookup.delete(block.key);\n}\nfunction update_keyed_each(old_blocks, dirty, get_key, dynamic, ctx, list, lookup, node, destroy, create_each_block, next, get_context) {\n    let o = old_blocks.length;\n    let n = list.length;\n    let i = o;\n    const old_indexes = {};\n    while (i--)\n        old_indexes[old_blocks[i].key] = i;\n    const new_blocks = [];\n    const new_lookup = new Map();\n    const deltas = new Map();\n    i = n;\n    while (i--) {\n        const child_ctx = get_context(ctx, list, i);\n        const key = get_key(child_ctx);\n        let block = lookup.get(key);\n        if (!block) {\n            block = create_each_block(key, child_ctx);\n            block.c();\n        }\n        else if (dynamic) {\n            block.p(child_ctx, dirty);\n        }\n        new_lookup.set(key, new_blocks[i] = block);\n        if (key in old_indexes)\n            deltas.set(key, Math.abs(i - old_indexes[key]));\n    }\n    const will_move = new Set();\n    const did_move = new Set();\n    function insert(block) {\n        transition_in(block, 1);\n        block.m(node, next);\n        lookup.set(block.key, block);\n        next = block.first;\n        n--;\n    }\n    while (o && n) {\n        const new_block = new_blocks[n - 1];\n        const old_block = old_blocks[o - 1];\n        const new_key = new_block.key;\n        const old_key = old_block.key;\n        if (new_block === old_block) {\n            // do nothing\n            next = new_block.first;\n            o--;\n            n--;\n        }\n        else if (!new_lookup.has(old_key)) {\n            // remove old block\n            destroy(old_block, lookup);\n            o--;\n        }\n        else if (!lookup.has(new_key) || will_move.has(new_key)) {\n            insert(new_block);\n        }\n        else if (did_move.has(old_key)) {\n            o--;\n        }\n        else if (deltas.get(new_key) > deltas.get(old_key)) {\n            did_move.add(new_key);\n            insert(new_block);\n        }\n        else {\n            will_move.add(old_key);\n            o--;\n        }\n    }\n    while (o--) {\n        const old_block = old_blocks[o];\n        if (!new_lookup.has(old_block.key))\n            destroy(old_block, lookup);\n    }\n    while (n)\n        insert(new_blocks[n - 1]);\n    return new_blocks;\n}\nfunction mount_component(component, target, anchor) {\n    const { fragment, on_mount, on_destroy, after_update } = component.$$;\n    fragment && fragment.m(target, anchor);\n    // onMount happens before the initial afterUpdate\n    add_render_callback(() => {\n        const new_on_destroy = on_mount.map(run).filter(is_function);\n        if (on_destroy) {\n            on_destroy.push(...new_on_destroy);\n        }\n        else {\n            // Edge case - component was destroyed immediately,\n            // most likely as a result of a binding initialising\n            run_all(new_on_destroy);\n        }\n        component.$$.on_mount = [];\n    });\n    after_update.forEach(add_render_callback);\n}\nfunction destroy_component(component, detaching) {\n    const $$ = component.$$;\n    if ($$.fragment !== null) {\n        run_all($$.on_destroy);\n        $$.fragment && $$.fragment.d(detaching);\n        // TODO null out other refs, including component.$$ (but need to\n        // preserve final state?)\n        $$.on_destroy = $$.fragment = null;\n        $$.ctx = [];\n    }\n}\nfunction make_dirty(component, i) {\n    if (component.$$.dirty[0] === -1) {\n        dirty_components.push(component);\n        schedule_update();\n        component.$$.dirty.fill(0);\n    }\n    component.$$.dirty[(i / 31) | 0] |= (1 << (i % 31));\n}\nfunction init(component, options, instance, create_fragment, not_equal, props, dirty = [-1]) {\n    const parent_component = current_component;\n    set_current_component(component);\n    const prop_values = options.props || {};\n    const $$ = component.$$ = {\n        fragment: null,\n        ctx: null,\n        // state\n        props,\n        update: noop,\n        not_equal,\n        bound: blank_object(),\n        // lifecycle\n        on_mount: [],\n        on_destroy: [],\n        before_update: [],\n        after_update: [],\n        context: new Map(parent_component ? parent_component.$$.context : []),\n        // everything else\n        callbacks: blank_object(),\n        dirty,\n        skip_bound: false\n    };\n    let ready = false;\n    $$.ctx = instance\n        ? instance(component, prop_values, (i, ret, ...rest) => {\n            const value = rest.length ? rest[0] : ret;\n            if ($$.ctx && not_equal($$.ctx[i], $$.ctx[i] = value)) {\n                if (!$$.skip_bound && $$.bound[i])\n                    $$.bound[i](value);\n                if (ready)\n                    make_dirty(component, i);\n            }\n            return ret;\n        })\n        : [];\n    $$.update();\n    ready = true;\n    run_all($$.before_update);\n    // `false` as a special case of no DOM component\n    $$.fragment = create_fragment ? create_fragment($$.ctx) : false;\n    if (options.target) {\n        if (options.hydrate) {\n            const nodes = children(options.target);\n            // eslint-disable-next-line @typescript-eslint/no-non-null-assertion\n            $$.fragment && $$.fragment.l(nodes);\n            nodes.forEach(detach);\n        }\n        else {\n            // eslint-disable-next-line @typescript-eslint/no-non-null-assertion\n            $$.fragment && $$.fragment.c();\n        }\n        if (options.intro)\n            transition_in(component.$$.fragment);\n        mount_component(component, options.target, options.anchor);\n        flush();\n    }\n    set_current_component(parent_component);\n}\nlet SvelteElement;\nif (typeof HTMLElement === 'function') {\n    SvelteElement = class extends HTMLElement {\n        constructor() {\n            super();\n            this.attachShadow({ mode: 'open' });\n        }\n        connectedCallback() {\n            // @ts-ignore todo: improve typings\n            for (const key in this.$$.slotted) {\n                // @ts-ignore todo: improve typings\n                this.appendChild(this.$$.slotted[key]);\n            }\n        }\n        attributeChangedCallback(attr, _oldValue, newValue) {\n            this[attr] = newValue;\n        }\n        $destroy() {\n            destroy_component(this, 1);\n            this.$destroy = noop;\n        }\n        $on(type, callback) {\n            // TODO should this delegate to addEventListener?\n            const callbacks = (this.$$.callbacks[type] || (this.$$.callbacks[type] = []));\n            callbacks.push(callback);\n            return () => {\n                const index = callbacks.indexOf(callback);\n                if (index !== -1)\n                    callbacks.splice(index, 1);\n            };\n        }\n        $set($$props) {\n            if (this.$$set && !is_empty($$props)) {\n                this.$$.skip_bound = true;\n                this.$$set($$props);\n                this.$$.skip_bound = false;\n            }\n        }\n    };\n}\n\nvar enI18n = {\n  categoriesLabel: 'Categories',\n  emojiUnsupportedMessage: 'Your browser does not support color emoji.',\n  favoritesLabel: 'Favorites',\n  loadingMessage: 'Loadingâ€¦',\n  networkErrorMessage: 'Could not load emoji. Try refreshing.',\n  regionLabel: 'Emoji picker',\n  searchDescription: 'When search results are available, press up or down to select and enter to choose.',\n  searchLabel: 'Search',\n  searchResultsLabel: 'Search results',\n  skinToneDescription: 'When expanded, press up or down to select and enter to choose.',\n  skinToneLabel: 'Choose a skin tone (currently {skinTone})',\n  skinTonesLabel: 'Skin tones',\n  skinTones: [\n    'Default',\n    'Light',\n    'Medium-Light',\n    'Medium',\n    'Medium-Dark',\n    'Dark'\n  ],\n  categories: {\n    custom: 'Custom',\n    'smileys-emotion': 'Smileys and emoticons',\n    'people-body': 'People and body',\n    'animals-nature': 'Animals and nature',\n    'food-drink': 'Food and drink',\n    'travel-places': 'Travel and places',\n    activities: 'Activities',\n    objects: 'Objects',\n    symbols: 'Symbols',\n    flags: 'Flags'\n  }\n};\n\n// via https://unpkg.com/browse/emojibase-data@5.0.1/meta/groups.json\nconst allGroups = [\n  [-1, 'âœ¨', 'custom'],\n  [0, 'ðŸ˜€', 'smileys-emotion'],\n  [1, 'ðŸ‘‹', 'people-body'],\n  [3, 'ðŸ±', 'animals-nature'],\n  [4, 'ðŸŽ', 'food-drink'],\n  [5, 'ðŸ ï¸', 'travel-places'],\n  [6, 'âš½', 'activities'],\n  [7, 'ðŸ“', 'objects'],\n  [8, 'â›”ï¸', 'symbols'],\n  [9, 'ðŸ', 'flags']\n].map(([id, emoji, name]) => ({ id, emoji, name }));\n\nconst groups = allGroups.slice(1);\nconst customGroup = allGroups[0];\n\nconst DEFAULT_DATA_SOURCE = 'https://cdn.jsdelivr.net/npm/emojibase-data@5/en/data.json';\nconst DEFAULT_LOCALE = 'en';\n\nconst MIN_SEARCH_TEXT_LENGTH = 2;\nconst NUM_SKIN_TONES = 6;\n\nconst rIC = typeof requestIdleCallback === 'function' ? requestIdleCallback : setTimeout;\n\n// check for ZWJ (zero width joiner) character\nfunction hasZwj (emoji) {\n  return emoji.unicode.includes('\\u200d')\n}\n\n// @rollup/plugin-strip doesn't properly strip performance.mark/measure\n\nfunction stop (str) {\n}\n\n// Find one good representative emoji to test. Ideally it should have color in the center.\n// For some inspiration, see: https://about.gitlab.com/blog/2018/05/30/journey-in-native-unicode-emoji/\nconst versionsAndTestEmoji = {\n  'ðŸ˜ƒ': 0.6,\n  'ðŸ˜ï¸': 0.7,\n  'ðŸ˜€': 1,\n  'ðŸ‘ï¸â€ðŸ—¨ï¸': 2,\n  'ðŸ¤£': 3,\n  'ðŸ‘±â€â™€ï¸': 4,\n  'ðŸ¤©': 5,\n  'ðŸ¥°': 11, // smiling face with hearts\n  'ðŸ¥»': 12, // sari\n  'ðŸ§‘â€ðŸ¦°': 12.1, // person: red hair\n  'ðŸ¥²': 13 // smiling face with tear\n};\n\nconst TIMEOUT_BEFORE_LOADING_MESSAGE = 1000; // 1 second\nconst DEFAULT_SKIN_TONE_EMOJI = 'ðŸ–ï¸';\nconst DEFAULT_NUM_COLUMNS = 8;\n\n// Based on https://fivethirtyeight.com/features/the-100-most-used-emojis/ and\n// https://blog.emojipedia.org/facebook-reveals-most-and-least-used-emojis/ with\n// a bit of my own curation. (E.g. avoid the \"OK\" gesture because of connotations:\n// https://emojipedia.org/ok-hand/)\nconst MOST_COMMONLY_USED_EMOJI = [\n  'ðŸ˜Š',\n  'ðŸ˜’',\n  'â™¥ï¸',\n  'ðŸ‘ï¸',\n  'ðŸ˜',\n  'ðŸ˜‚',\n  'ðŸ˜­',\n  'â˜ºï¸',\n  'ðŸ˜”',\n  'ðŸ˜©',\n  'ðŸ˜',\n  'ðŸ’•',\n  'ðŸ™Œ',\n  'ðŸ˜˜'\n];\n\nconst FONT_FAMILY = '\"Apple Color Emoji\",\"Segoe UI Emoji\",\"Segoe UI Symbol\",' +\n  '\"Twemoji Mozilla\",\"Noto Color Emoji\",\"EmojiOne Color\",\"Android Emoji\",sans-serif';\n\n// Test if an emoji is supported by rendering it to canvas and checking that the color is not black\n\nconst getTextFeature = (text, color) => {\n  try {\n    const canvas = document.createElement('canvas');\n    canvas.width = canvas.height = 1;\n\n    const ctx = canvas.getContext('2d');\n    ctx.textBaseline = 'top';\n    ctx.font = `100px ${FONT_FAMILY}`;\n    ctx.fillStyle = color;\n    ctx.scale(0.01, 0.01);\n    ctx.fillText(text, 0, 0);\n\n    return ctx.getImageData(0, 0, 1, 1).data\n  } catch (e) { /* ignore, return undefined */ }\n};\n\nconst compareFeatures = (feature1, feature2) => {\n  const feature1Str = [...feature1].join(',');\n  const feature2Str = [...feature2].join(',');\n  // This is RGBA, so for 0,0,0, we are checking that the first RGB is not all zeroes.\n  // Most of the time when unsupported this is 0,0,0,0, but on Chrome on Mac it is\n  // 0,0,0,61 - there is a transparency here.\n  return feature1Str === feature2Str && !feature1Str.startsWith('0,0,0,')\n};\n\nfunction testColorEmojiSupported (text) {\n  // Render white and black and then compare them to each other and ensure they're the same\n  // color, and neither one is black. This shows that the emoji was rendered in color.\n  const feature1 = getTextFeature(text, '#000');\n  const feature2 = getTextFeature(text, '#fff');\n  return feature1 && feature2 && compareFeatures(feature1, feature2)\n}\n\n// rather than check every emoji ever, which would be expensive, just check some representatives from the\n\nfunction determineEmojiSupportLevel () {\n  let res;\n  for (const [emoji, version] of Object.entries(versionsAndTestEmoji)) {\n    /* istanbul ignore else */\n    if (testColorEmojiSupported(emoji)) {\n      res = version;\n    } else {\n      break\n    }\n  }\n  return res\n}\n\n// @rollup/plugin-strip doesn't strip console.logs properly\n\nfunction log () {\n}\n\n// Check which emojis we know for sure aren't supported, based on Unicode version level\nconst emojiSupportLevelPromise = new Promise(resolve => (\n  rIC(() => (\n    resolve(determineEmojiSupportLevel()) // delay so ideally this can run while IDB is first populating\n  ))\n));\n// determine which emojis containing ZWJ (zero width joiner) characters\n// are supported (rendered as one glyph) rather than unsupported (rendered as two or more glyphs)\nconst supportedZwjEmojis = new Map();\n\nconst VARIATION_SELECTOR = '\\ufe0f';\nconst SKINTONE_MODIFIER = '\\ud83c';\nconst ZWJ = '\\u200d';\nconst LIGHT_SKIN_TONE = 0x1F3FB;\nconst LIGHT_SKIN_TONE_MODIFIER = 0xdffb;\n\n// TODO: this is a naive implementation, we can improve it later\n// It's only used for the skintone picker, so as long as people don't customize with\n// really exotic emoji then it should work fine\nfunction applySkinTone (str, skinTone) {\n  if (skinTone === 0) {\n    return str\n  }\n  const zwjIndex = str.indexOf(ZWJ);\n  if (zwjIndex !== -1) {\n    return str.substring(0, zwjIndex) +\n      String.fromCodePoint(LIGHT_SKIN_TONE + skinTone - 1) +\n      str.substring(zwjIndex)\n  }\n  if (str.endsWith(VARIATION_SELECTOR)) {\n    str = str.substring(0, str.length - 1);\n  }\n  return str + SKINTONE_MODIFIER + String.fromCodePoint(LIGHT_SKIN_TONE_MODIFIER + skinTone - 1)\n}\n\nfunction halt (event) {\n  event.preventDefault();\n  event.stopPropagation();\n}\n\n// Implementation left/right or up/down navigation, circling back when you\n// reach the start/end of the list\nfunction incrementOrDecrement (decrement, val, arr) {\n  val += (decrement ? -1 : 1);\n  if (val < 0) {\n    val = arr.length - 1;\n  } else if (val >= arr.length) {\n    val = 0;\n  }\n  return val\n}\n\n// like lodash's uniqBy but much smaller\nfunction uniqBy (arr, func) {\n  const set = new Set();\n  const res = [];\n  for (const item of arr) {\n    const key = func(item);\n    if (!set.has(key)) {\n      set.add(key);\n      res.push(item);\n    }\n  }\n  return res\n}\n\n// We don't need all the data on every emoji, and there are specific things we need\n// for the UI, so build a \"view model\" from the emoji object we got from the database\n\nfunction summarizeEmojisForUI (emojis, emojiSupportLevel) {\n  const toSimpleSkinsMap = skins => {\n    const res = {};\n    for (const skin of skins) {\n      // ignore arrays like [1, 2] with multiple skin tones\n      // also ignore variants that are in an unsupported emoji version\n      // (these do exist - variants from a different version than their base emoji)\n      if (typeof skin.tone === 'number' && skin.version <= emojiSupportLevel) {\n        res[skin.tone] = skin.unicode;\n      }\n    }\n    return res\n  };\n\n  return emojis.map(({ unicode, skins, shortcodes, url, name, category }) => ({\n    unicode,\n    name,\n    shortcodes,\n    url,\n    category,\n    id: unicode || name,\n    skins: skins && toSimpleSkinsMap(skins),\n    title: shortcodes.join(', ')\n  }))\n}\n\n// import rAF from one place so that the bundle size is a bit smaller\nconst rAF = requestAnimationFrame;\n\n// Svelte action to calculate the width of an element and auto-update\n\nconst resizeObserverSupported = typeof ResizeObserver === 'function';\n\nfunction calculateWidth (node, onUpdate) {\n  let resizeObserver;\n  /* istanbul ignore if */\n  if (resizeObserverSupported) {\n    resizeObserver = new ResizeObserver(entries => (\n      onUpdate(entries[0].contentRect.width)\n    ));\n    resizeObserver.observe(node);\n  } else { // just set the width once, don't bother trying to track it\n    rAF(() => (\n      onUpdate(node.getBoundingClientRect().width)\n    ));\n  }\n\n  return {\n    destroy () {\n      /* istanbul ignore if */\n      if (resizeObserver) {\n        resizeObserver.disconnect();\n      }\n    }\n  }\n}\n\n// get the width of the text inside of a DOM node, via https://stackoverflow.com/a/59525891/680742\nfunction calculateTextWidth (node) {\n  /* istanbul ignore else */\n  {\n    const range = document.createRange();\n    range.selectNode(node.firstChild);\n    return range.getBoundingClientRect().width\n  }\n}\n\nlet baselineEmojiWidth;\n\nfunction checkZwjSupport (zwjEmojisToCheck, baselineEmoji, emojiToDomNode) {\n  for (const emoji of zwjEmojisToCheck) {\n    const domNode = emojiToDomNode(emoji);\n    const emojiWidth = calculateTextWidth(domNode);\n    if (typeof baselineEmojiWidth === 'undefined') { // calculate the baseline emoji width only once\n      baselineEmojiWidth = calculateTextWidth(baselineEmoji);\n    }\n    // On Windows, some supported emoji are ~50% bigger than the baseline emoji, but what we really want to guard\n    // against are the ones that are 2x the size, because those are truly broken (person with red hair = person with\n    // floating red wig, black cat = cat with black square, polar bear = bear with snowflake, etc.)\n    // So here we set the threshold at 1.8 times the size of the baseline emoji.\n    const supported = emojiWidth / 1.8 < baselineEmojiWidth;\n    supportedZwjEmojis.set(emoji.unicode, supported);\n    /* istanbul ignore next */\n    if (!supported) {\n      log('Filtered unsupported emoji', emoji.unicode);\n    } else if (emojiWidth !== baselineEmojiWidth) {\n      log('Allowed borderline emoji', emoji.unicode);\n    }\n  }\n}\n\n// Measure after style/layout are complete\n\nconst requestPostAnimationFrame = callback => {\n  rAF(() => {\n    setTimeout(callback);\n  });\n};\n\n// like lodash's uniq\n\nfunction uniq (arr) {\n  return uniqBy(arr, _ => _)\n}\n\n/* src/picker/components/Picker/Picker.svelte generated by Svelte v3.24.1 */\n\nconst { Map: Map_1 } = globals;\n\nfunction get_each_context(ctx, list, i) {\n\tconst child_ctx = ctx.slice();\n\tchild_ctx[65] = list[i];\n\tchild_ctx[67] = i;\n\treturn child_ctx;\n}\n\nfunction get_each_context_2(ctx, list, i) {\n\tconst child_ctx = ctx.slice();\n\tchild_ctx[65] = list[i];\n\tchild_ctx[67] = i;\n\treturn child_ctx;\n}\n\nfunction get_each_context_1(ctx, list, i) {\n\tconst child_ctx = ctx.slice();\n\tchild_ctx[68] = list[i];\n\tchild_ctx[67] = i;\n\treturn child_ctx;\n}\n\nfunction get_each_context_3(ctx, list, i) {\n\tconst child_ctx = ctx.slice();\n\tchild_ctx[71] = list[i];\n\treturn child_ctx;\n}\n\nfunction get_each_context_4(ctx, list, i) {\n\tconst child_ctx = ctx.slice();\n\tchild_ctx[74] = list[i];\n\tchild_ctx[67] = i;\n\treturn child_ctx;\n}\n\n// (44:38) {#each skinTones as skinTone, i (skinTone)}\nfunction create_each_block_4(key_1, ctx) {\n\tlet div;\n\tlet t_value = /*skinTone*/ ctx[74] + \"\";\n\tlet t;\n\tlet div_id_value;\n\tlet div_class_value;\n\tlet div_aria_selected_value;\n\tlet div_title_value;\n\tlet div_aria_label_value;\n\n\treturn {\n\t\tkey: key_1,\n\t\tfirst: null,\n\t\tc() {\n\t\t\tdiv = element(\"div\");\n\t\t\tt = text(t_value);\n\t\t\tattr(div, \"id\", div_id_value = \"skintone-\" + /*i*/ ctx[67]);\n\n\t\t\tattr(div, \"class\", div_class_value = \"emoji skintone-option cursor-pointer hide-focus \" + (/*i*/ ctx[67] === /*activeSkinTone*/ ctx[15]\n\t\t\t? \"active\"\n\t\t\t: \"\"));\n\n\t\t\tattr(div, \"aria-selected\", div_aria_selected_value = /*i*/ ctx[67] === /*activeSkinTone*/ ctx[15]);\n\t\t\tattr(div, \"role\", \"option\");\n\t\t\tattr(div, \"title\", div_title_value = /*i18n*/ ctx[0].skinTones[/*i*/ ctx[67]]);\n\t\t\tattr(div, \"tabindex\", \"-1\");\n\t\t\tattr(div, \"aria-label\", div_aria_label_value = /*i18n*/ ctx[0].skinTones[/*i*/ ctx[67]]);\n\t\t\tthis.first = div;\n\t\t},\n\t\tm(target, anchor) {\n\t\t\tinsert(target, div, anchor);\n\t\t\tappend(div, t);\n\t\t},\n\t\tp(ctx, dirty) {\n\t\t\tif (dirty[0] & /*skinTones*/ 524288 && t_value !== (t_value = /*skinTone*/ ctx[74] + \"\")) set_data(t, t_value);\n\n\t\t\tif (dirty[0] & /*skinTones*/ 524288 && div_id_value !== (div_id_value = \"skintone-\" + /*i*/ ctx[67])) {\n\t\t\t\tattr(div, \"id\", div_id_value);\n\t\t\t}\n\n\t\t\tif (dirty[0] & /*skinTones, activeSkinTone*/ 557056 && div_class_value !== (div_class_value = \"emoji skintone-option cursor-pointer hide-focus \" + (/*i*/ ctx[67] === /*activeSkinTone*/ ctx[15]\n\t\t\t? \"active\"\n\t\t\t: \"\"))) {\n\t\t\t\tattr(div, \"class\", div_class_value);\n\t\t\t}\n\n\t\t\tif (dirty[0] & /*skinTones, activeSkinTone*/ 557056 && div_aria_selected_value !== (div_aria_selected_value = /*i*/ ctx[67] === /*activeSkinTone*/ ctx[15])) {\n\t\t\t\tattr(div, \"aria-selected\", div_aria_selected_value);\n\t\t\t}\n\n\t\t\tif (dirty[0] & /*i18n, skinTones*/ 524289 && div_title_value !== (div_title_value = /*i18n*/ ctx[0].skinTones[/*i*/ ctx[67]])) {\n\t\t\t\tattr(div, \"title\", div_title_value);\n\t\t\t}\n\n\t\t\tif (dirty[0] & /*i18n, skinTones*/ 524289 && div_aria_label_value !== (div_aria_label_value = /*i18n*/ ctx[0].skinTones[/*i*/ ctx[67]])) {\n\t\t\t\tattr(div, \"aria-label\", div_aria_label_value);\n\t\t\t}\n\t\t},\n\t\td(detaching) {\n\t\t\tif (detaching) detach(div);\n\t\t}\n\t};\n}\n\n// (54:33) {#each groups as group (group.id)}\nfunction create_each_block_3(key_1, ctx) {\n\tlet button;\n\tlet div;\n\tlet t_value = /*group*/ ctx[71].emoji + \"\";\n\tlet t;\n\tlet button_aria_controls_value;\n\tlet button_aria_label_value;\n\tlet button_aria_selected_value;\n\tlet button_title_value;\n\tlet mounted;\n\tlet dispose;\n\n\tfunction click_handler(...args) {\n\t\treturn /*click_handler*/ ctx[46](/*group*/ ctx[71], ...args);\n\t}\n\n\treturn {\n\t\tkey: key_1,\n\t\tfirst: null,\n\t\tc() {\n\t\t\tbutton = element(\"button\");\n\t\t\tdiv = element(\"div\");\n\t\t\tt = text(t_value);\n\t\t\tattr(div, \"class\", \"emoji\");\n\t\t\tattr(button, \"role\", \"tab\");\n\t\t\tattr(button, \"class\", \"nav-button\");\n\t\t\tattr(button, \"aria-controls\", button_aria_controls_value = \"tab-\" + /*group*/ ctx[71].id);\n\t\t\tattr(button, \"aria-label\", button_aria_label_value = /*i18n*/ ctx[0].categories[/*group*/ ctx[71].name]);\n\t\t\tattr(button, \"aria-selected\", button_aria_selected_value = !/*searchMode*/ ctx[7] && /*currentGroup*/ ctx[23].id === /*group*/ ctx[71].id);\n\t\t\tattr(button, \"title\", button_title_value = /*i18n*/ ctx[0].categories[/*group*/ ctx[71].name]);\n\t\t\tthis.first = button;\n\t\t},\n\t\tm(target, anchor) {\n\t\t\tinsert(target, button, anchor);\n\t\t\tappend(button, div);\n\t\t\tappend(div, t);\n\n\t\t\tif (!mounted) {\n\t\t\t\tdispose = listen(button, \"click\", click_handler);\n\t\t\t\tmounted = true;\n\t\t\t}\n\t\t},\n\t\tp(new_ctx, dirty) {\n\t\t\tctx = new_ctx;\n\t\t\tif (dirty[0] & /*groups*/ 4194304 && t_value !== (t_value = /*group*/ ctx[71].emoji + \"\")) set_data(t, t_value);\n\n\t\t\tif (dirty[0] & /*groups*/ 4194304 && button_aria_controls_value !== (button_aria_controls_value = \"tab-\" + /*group*/ ctx[71].id)) {\n\t\t\t\tattr(button, \"aria-controls\", button_aria_controls_value);\n\t\t\t}\n\n\t\t\tif (dirty[0] & /*i18n, groups*/ 4194305 && button_aria_label_value !== (button_aria_label_value = /*i18n*/ ctx[0].categories[/*group*/ ctx[71].name])) {\n\t\t\t\tattr(button, \"aria-label\", button_aria_label_value);\n\t\t\t}\n\n\t\t\tif (dirty[0] & /*searchMode, currentGroup, groups*/ 12583040 && button_aria_selected_value !== (button_aria_selected_value = !/*searchMode*/ ctx[7] && /*currentGroup*/ ctx[23].id === /*group*/ ctx[71].id)) {\n\t\t\t\tattr(button, \"aria-selected\", button_aria_selected_value);\n\t\t\t}\n\n\t\t\tif (dirty[0] & /*i18n, groups*/ 4194305 && button_title_value !== (button_title_value = /*i18n*/ ctx[0].categories[/*group*/ ctx[71].name])) {\n\t\t\t\tattr(button, \"title\", button_title_value);\n\t\t\t}\n\t\t},\n\t\td(detaching) {\n\t\t\tif (detaching) detach(button);\n\t\t\tmounted = false;\n\t\t\tdispose();\n\t\t}\n\t};\n}\n\n// (90:98) {:else}\nfunction create_else_block_1(ctx) {\n\tlet div;\n\n\treturn {\n\t\tc() {\n\t\t\tdiv = element(\"div\");\n\t\t\tattr(div, \"class\", \"custom-emoji\");\n\t\t\tset_style(div, \"background-image\", \"url(\" + /*emoji*/ ctx[65].url + \")\");\n\t\t},\n\t\tm(target, anchor) {\n\t\t\tinsert(target, div, anchor);\n\t\t},\n\t\tp(ctx, dirty) {\n\t\t\tif (dirty[0] & /*currentEmojisWithCategories*/ 4) {\n\t\t\t\tset_style(div, \"background-image\", \"url(\" + /*emoji*/ ctx[65].url + \")\");\n\t\t\t}\n\t\t},\n\t\td(detaching) {\n\t\t\tif (detaching) detach(div);\n\t\t}\n\t};\n}\n\n// (90:38) {#if emoji.unicode}\nfunction create_if_block_1(ctx) {\n\tlet t_value = unicodeWithSkin(/*emoji*/ ctx[65], /*currentSkinTone*/ ctx[14]) + \"\";\n\tlet t;\n\n\treturn {\n\t\tc() {\n\t\t\tt = text(t_value);\n\t\t},\n\t\tm(target, anchor) {\n\t\t\tinsert(target, t, anchor);\n\t\t},\n\t\tp(ctx, dirty) {\n\t\t\tif (dirty[0] & /*currentEmojisWithCategories, currentSkinTone*/ 16388 && t_value !== (t_value = unicodeWithSkin(/*emoji*/ ctx[65], /*currentSkinTone*/ ctx[14]) + \"\")) set_data(t, t_value);\n\t\t},\n\t\td(detaching) {\n\t\t\tif (detaching) detach(t);\n\t\t}\n\t};\n}\n\n// (85:39) {#each emojiWithCategory.emojis as emoji, i (emoji.id)}\nfunction create_each_block_2(key_1, ctx) {\n\tlet button;\n\tlet button_role_value;\n\tlet button_aria_selected_value;\n\tlet button_aria_label_value;\n\tlet button_title_value;\n\tlet button_class_value;\n\tlet button_id_value;\n\n\tfunction select_block_type(ctx, dirty) {\n\t\tif (/*emoji*/ ctx[65].unicode) return create_if_block_1;\n\t\treturn create_else_block_1;\n\t}\n\n\tlet current_block_type = select_block_type(ctx);\n\tlet if_block = current_block_type(ctx);\n\n\treturn {\n\t\tkey: key_1,\n\t\tfirst: null,\n\t\tc() {\n\t\t\tbutton = element(\"button\");\n\t\t\tif_block.c();\n\t\t\tattr(button, \"role\", button_role_value = /*searchMode*/ ctx[7] ? \"option\" : \"menuitem\");\n\n\t\t\tattr(button, \"aria-selected\", button_aria_selected_value = /*searchMode*/ ctx[7]\n\t\t\t? /*i*/ ctx[67] == /*activeSearchItem*/ ctx[8]\n\t\t\t: \"\");\n\n\t\t\tattr(button, \"aria-label\", button_aria_label_value = /*labelWithSkin*/ ctx[26](/*emoji*/ ctx[65], /*currentSkinTone*/ ctx[14]));\n\t\t\tattr(button, \"title\", button_title_value = /*emoji*/ ctx[65].title);\n\n\t\t\tattr(button, \"class\", button_class_value = \"emoji \" + (/*searchMode*/ ctx[7] && /*i*/ ctx[67] === /*activeSearchItem*/ ctx[8]\n\t\t\t? \"active\"\n\t\t\t: \"\"));\n\n\t\t\tattr(button, \"id\", button_id_value = \"emo-\" + /*emoji*/ ctx[65].id);\n\t\t\tthis.first = button;\n\t\t},\n\t\tm(target, anchor) {\n\t\t\tinsert(target, button, anchor);\n\t\t\tif_block.m(button, null);\n\t\t},\n\t\tp(ctx, dirty) {\n\t\t\tif (current_block_type === (current_block_type = select_block_type(ctx)) && if_block) {\n\t\t\t\tif_block.p(ctx, dirty);\n\t\t\t} else {\n\t\t\t\tif_block.d(1);\n\t\t\t\tif_block = current_block_type(ctx);\n\n\t\t\t\tif (if_block) {\n\t\t\t\t\tif_block.c();\n\t\t\t\t\tif_block.m(button, null);\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tif (dirty[0] & /*searchMode*/ 128 && button_role_value !== (button_role_value = /*searchMode*/ ctx[7] ? \"option\" : \"menuitem\")) {\n\t\t\t\tattr(button, \"role\", button_role_value);\n\t\t\t}\n\n\t\t\tif (dirty[0] & /*searchMode, currentEmojisWithCategories, activeSearchItem*/ 388 && button_aria_selected_value !== (button_aria_selected_value = /*searchMode*/ ctx[7]\n\t\t\t? /*i*/ ctx[67] == /*activeSearchItem*/ ctx[8]\n\t\t\t: \"\")) {\n\t\t\t\tattr(button, \"aria-selected\", button_aria_selected_value);\n\t\t\t}\n\n\t\t\tif (dirty[0] & /*currentEmojisWithCategories, currentSkinTone*/ 16388 && button_aria_label_value !== (button_aria_label_value = /*labelWithSkin*/ ctx[26](/*emoji*/ ctx[65], /*currentSkinTone*/ ctx[14]))) {\n\t\t\t\tattr(button, \"aria-label\", button_aria_label_value);\n\t\t\t}\n\n\t\t\tif (dirty[0] & /*currentEmojisWithCategories*/ 4 && button_title_value !== (button_title_value = /*emoji*/ ctx[65].title)) {\n\t\t\t\tattr(button, \"title\", button_title_value);\n\t\t\t}\n\n\t\t\tif (dirty[0] & /*searchMode, currentEmojisWithCategories, activeSearchItem*/ 388 && button_class_value !== (button_class_value = \"emoji \" + (/*searchMode*/ ctx[7] && /*i*/ ctx[67] === /*activeSearchItem*/ ctx[8]\n\t\t\t? \"active\"\n\t\t\t: \"\"))) {\n\t\t\t\tattr(button, \"class\", button_class_value);\n\t\t\t}\n\n\t\t\tif (dirty[0] & /*currentEmojisWithCategories*/ 4 && button_id_value !== (button_id_value = \"emo-\" + /*emoji*/ ctx[65].id)) {\n\t\t\t\tattr(button, \"id\", button_id_value);\n\t\t\t}\n\t\t},\n\t\td(detaching) {\n\t\t\tif (detaching) detach(button);\n\t\t\tif_block.d();\n\t\t}\n\t};\n}\n\n// (72:3) {#each currentEmojisWithCategories as emojiWithCategory, i (emojiWithCategory.category)}\nfunction create_each_block_1(key_1, ctx) {\n\tlet div0;\n\n\tlet t_value = (/*searchMode*/ ctx[7]\n\t? /*i18n*/ ctx[0].searchResultsLabel\n\t: /*emojiWithCategory*/ ctx[68].category\n\t\t? /*emojiWithCategory*/ ctx[68].category\n\t\t: /*currentEmojisWithCategories*/ ctx[2].length > 1\n\t\t\t? /*i18n*/ ctx[0].categories.custom\n\t\t\t: /*i18n*/ ctx[0].categories[/*currentGroup*/ ctx[23].name]) + \"\";\n\n\tlet t;\n\tlet div0_id_value;\n\tlet div0_class_value;\n\tlet div1;\n\tlet each_blocks = [];\n\tlet each_1_lookup = new Map_1();\n\tlet div1_role_value;\n\tlet div1_aria_labelledby_value;\n\tlet div1_id_value;\n\tlet calculateEmojiGridWidth_action;\n\tlet mounted;\n\tlet dispose;\n\tlet each_value_2 = /*emojiWithCategory*/ ctx[68].emojis;\n\tconst get_key = ctx => /*emoji*/ ctx[65].id;\n\n\tfor (let i = 0; i < each_value_2.length; i += 1) {\n\t\tlet child_ctx = get_each_context_2(ctx, each_value_2, i);\n\t\tlet key = get_key(child_ctx);\n\t\teach_1_lookup.set(key, each_blocks[i] = create_each_block_2(key, child_ctx));\n\t}\n\n\treturn {\n\t\tkey: key_1,\n\t\tfirst: null,\n\t\tc() {\n\t\t\tdiv0 = element(\"div\");\n\t\t\tt = text(t_value);\n\t\t\tdiv1 = element(\"div\");\n\n\t\t\tfor (let i = 0; i < each_blocks.length; i += 1) {\n\t\t\t\teach_blocks[i].c();\n\t\t\t}\n\n\t\t\tattr(div0, \"id\", div0_id_value = \"menu-label-\" + /*i*/ ctx[67]);\n\n\t\t\tattr(div0, \"class\", div0_class_value = \"category \" + (/*currentEmojisWithCategories*/ ctx[2].length > 1\n\t\t\t? \"\"\n\t\t\t: \"gone\"));\n\n\t\t\tattr(div0, \"aria-hidden\", \"true\");\n\t\t\tattr(div1, \"class\", \"emoji-menu\");\n\t\t\tattr(div1, \"role\", div1_role_value = /*searchMode*/ ctx[7] ? \"listbox\" : \"menu\");\n\t\t\tattr(div1, \"aria-labelledby\", div1_aria_labelledby_value = \"menu-label-\" + /*i*/ ctx[67]);\n\t\t\tattr(div1, \"id\", div1_id_value = /*searchMode*/ ctx[7] ? \"search-results\" : \"\");\n\t\t\tthis.first = div0;\n\t\t},\n\t\tm(target, anchor) {\n\t\t\tinsert(target, div0, anchor);\n\t\t\tappend(div0, t);\n\t\t\tinsert(target, div1, anchor);\n\n\t\t\tfor (let i = 0; i < each_blocks.length; i += 1) {\n\t\t\t\teach_blocks[i].m(div1, null);\n\t\t\t}\n\n\t\t\tif (!mounted) {\n\t\t\t\tdispose = action_destroyer(calculateEmojiGridWidth_action = /*calculateEmojiGridWidth*/ ctx[27].call(null, div1));\n\t\t\t\tmounted = true;\n\t\t\t}\n\t\t},\n\t\tp(ctx, dirty) {\n\t\t\tif (dirty[0] & /*searchMode, i18n, currentEmojisWithCategories, currentGroup*/ 8388741 && t_value !== (t_value = (/*searchMode*/ ctx[7]\n\t\t\t? /*i18n*/ ctx[0].searchResultsLabel\n\t\t\t: /*emojiWithCategory*/ ctx[68].category\n\t\t\t\t? /*emojiWithCategory*/ ctx[68].category\n\t\t\t\t: /*currentEmojisWithCategories*/ ctx[2].length > 1\n\t\t\t\t\t? /*i18n*/ ctx[0].categories.custom\n\t\t\t\t\t: /*i18n*/ ctx[0].categories[/*currentGroup*/ ctx[23].name]) + \"\")) set_data(t, t_value);\n\n\t\t\tif (dirty[0] & /*currentEmojisWithCategories*/ 4 && div0_id_value !== (div0_id_value = \"menu-label-\" + /*i*/ ctx[67])) {\n\t\t\t\tattr(div0, \"id\", div0_id_value);\n\t\t\t}\n\n\t\t\tif (dirty[0] & /*currentEmojisWithCategories*/ 4 && div0_class_value !== (div0_class_value = \"category \" + (/*currentEmojisWithCategories*/ ctx[2].length > 1\n\t\t\t? \"\"\n\t\t\t: \"gone\"))) {\n\t\t\t\tattr(div0, \"class\", div0_class_value);\n\t\t\t}\n\n\t\t\tif (dirty[0] & /*searchMode, currentEmojisWithCategories, activeSearchItem, labelWithSkin, currentSkinTone*/ 67125636) {\n\t\t\t\tconst each_value_2 = /*emojiWithCategory*/ ctx[68].emojis;\n\t\t\t\teach_blocks = update_keyed_each(each_blocks, dirty, get_key, 1, ctx, each_value_2, each_1_lookup, div1, destroy_block, create_each_block_2, null, get_each_context_2);\n\t\t\t}\n\n\t\t\tif (dirty[0] & /*searchMode*/ 128 && div1_role_value !== (div1_role_value = /*searchMode*/ ctx[7] ? \"listbox\" : \"menu\")) {\n\t\t\t\tattr(div1, \"role\", div1_role_value);\n\t\t\t}\n\n\t\t\tif (dirty[0] & /*currentEmojisWithCategories*/ 4 && div1_aria_labelledby_value !== (div1_aria_labelledby_value = \"menu-label-\" + /*i*/ ctx[67])) {\n\t\t\t\tattr(div1, \"aria-labelledby\", div1_aria_labelledby_value);\n\t\t\t}\n\n\t\t\tif (dirty[0] & /*searchMode*/ 128 && div1_id_value !== (div1_id_value = /*searchMode*/ ctx[7] ? \"search-results\" : \"\")) {\n\t\t\t\tattr(div1, \"id\", div1_id_value);\n\t\t\t}\n\t\t},\n\t\td(detaching) {\n\t\t\tif (detaching) detach(div0);\n\t\t\tif (detaching) detach(div1);\n\n\t\t\tfor (let i = 0; i < each_blocks.length; i += 1) {\n\t\t\t\teach_blocks[i].d();\n\t\t\t}\n\n\t\t\tmounted = false;\n\t\t\tdispose();\n\t\t}\n\t};\n}\n\n// (104:94) {:else}\nfunction create_else_block(ctx) {\n\tlet img;\n\tlet img_src_value;\n\n\treturn {\n\t\tc() {\n\t\t\timg = element(\"img\");\n\t\t\tattr(img, \"class\", \"custom-emoji\");\n\t\t\tif (img.src !== (img_src_value = /*emoji*/ ctx[65].url)) attr(img, \"src\", img_src_value);\n\t\t\tattr(img, \"loading\", \"lazy\");\n\t\t\tattr(img, \"alt\", \"\");\n\t\t},\n\t\tm(target, anchor) {\n\t\t\tinsert(target, img, anchor);\n\t\t},\n\t\tp(ctx, dirty) {\n\t\t\tif (dirty[0] & /*currentFavorites*/ 1048576 && img.src !== (img_src_value = /*emoji*/ ctx[65].url)) {\n\t\t\t\tattr(img, \"src\", img_src_value);\n\t\t\t}\n\t\t},\n\t\td(detaching) {\n\t\t\tif (detaching) detach(img);\n\t\t}\n\t};\n}\n\n// (104:34) {#if emoji.unicode}\nfunction create_if_block(ctx) {\n\tlet t_value = unicodeWithSkin(/*emoji*/ ctx[65], /*currentSkinTone*/ ctx[14]) + \"\";\n\tlet t;\n\n\treturn {\n\t\tc() {\n\t\t\tt = text(t_value);\n\t\t},\n\t\tm(target, anchor) {\n\t\t\tinsert(target, t, anchor);\n\t\t},\n\t\tp(ctx, dirty) {\n\t\t\tif (dirty[0] & /*currentFavorites, currentSkinTone*/ 1064960 && t_value !== (t_value = unicodeWithSkin(/*emoji*/ ctx[65], /*currentSkinTone*/ ctx[14]) + \"\")) set_data(t, t_value);\n\t\t},\n\t\td(detaching) {\n\t\t\tif (detaching) detach(t);\n\t\t}\n\t};\n}\n\n// (100:62) {#each currentFavorites as emoji, i (emoji.id)}\nfunction create_each_block(key_1, ctx) {\n\tlet button;\n\tlet button_aria_label_value;\n\tlet button_title_value;\n\tlet button_id_value;\n\n\tfunction select_block_type_1(ctx, dirty) {\n\t\tif (/*emoji*/ ctx[65].unicode) return create_if_block;\n\t\treturn create_else_block;\n\t}\n\n\tlet current_block_type = select_block_type_1(ctx);\n\tlet if_block = current_block_type(ctx);\n\n\treturn {\n\t\tkey: key_1,\n\t\tfirst: null,\n\t\tc() {\n\t\t\tbutton = element(\"button\");\n\t\t\tif_block.c();\n\t\t\tattr(button, \"role\", \"menuitem\");\n\t\t\tattr(button, \"aria-label\", button_aria_label_value = /*labelWithSkin*/ ctx[26](/*emoji*/ ctx[65], /*currentSkinTone*/ ctx[14]));\n\t\t\tattr(button, \"title\", button_title_value = /*emoji*/ ctx[65].title);\n\t\t\tattr(button, \"class\", \"emoji\");\n\t\t\tattr(button, \"id\", button_id_value = \"fav-\" + /*emoji*/ ctx[65].id);\n\t\t\tthis.first = button;\n\t\t},\n\t\tm(target, anchor) {\n\t\t\tinsert(target, button, anchor);\n\t\t\tif_block.m(button, null);\n\t\t},\n\t\tp(ctx, dirty) {\n\t\t\tif (current_block_type === (current_block_type = select_block_type_1(ctx)) && if_block) {\n\t\t\t\tif_block.p(ctx, dirty);\n\t\t\t} else {\n\t\t\t\tif_block.d(1);\n\t\t\t\tif_block = current_block_type(ctx);\n\n\t\t\t\tif (if_block) {\n\t\t\t\t\tif_block.c();\n\t\t\t\t\tif_block.m(button, null);\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tif (dirty[0] & /*currentFavorites, currentSkinTone*/ 1064960 && button_aria_label_value !== (button_aria_label_value = /*labelWithSkin*/ ctx[26](/*emoji*/ ctx[65], /*currentSkinTone*/ ctx[14]))) {\n\t\t\t\tattr(button, \"aria-label\", button_aria_label_value);\n\t\t\t}\n\n\t\t\tif (dirty[0] & /*currentFavorites*/ 1048576 && button_title_value !== (button_title_value = /*emoji*/ ctx[65].title)) {\n\t\t\t\tattr(button, \"title\", button_title_value);\n\t\t\t}\n\n\t\t\tif (dirty[0] & /*currentFavorites*/ 1048576 && button_id_value !== (button_id_value = \"fav-\" + /*emoji*/ ctx[65].id)) {\n\t\t\t\tattr(button, \"id\", button_id_value);\n\t\t\t}\n\t\t},\n\t\td(detaching) {\n\t\t\tif (detaching) detach(button);\n\t\t\tif_block.d();\n\t\t}\n\t};\n}\n\nfunction create_fragment(ctx) {\n\tlet section;\n\tlet div0;\n\tlet div4;\n\tlet div1;\n\tlet input;\n\tlet input_placeholder_value;\n\tlet input_aria_expanded_value;\n\tlet input_aria_activedescendant_value;\n\tlet label;\n\tlet t0_value = /*i18n*/ ctx[0].searchLabel + \"\";\n\tlet t0;\n\tlet span0;\n\tlet t1_value = /*i18n*/ ctx[0].searchDescription + \"\";\n\tlet t1;\n\tlet div2;\n\tlet button0;\n\tlet t2;\n\tlet button0_class_value;\n\tlet div2_class_value;\n\tlet span1;\n\tlet t3_value = /*i18n*/ ctx[0].skinToneDescription + \"\";\n\tlet t3;\n\tlet div3;\n\tlet each_blocks_3 = [];\n\tlet each0_lookup = new Map_1();\n\tlet div3_class_value;\n\tlet div3_style_value;\n\tlet div3_aria_label_value;\n\tlet div3_aria_activedescendant_value;\n\tlet div3_aria_hidden_value;\n\tlet div5;\n\tlet each_blocks_2 = [];\n\tlet each1_lookup = new Map_1();\n\tlet div5_aria_label_value;\n\tlet div7;\n\tlet div6;\n\tlet calculateIndicatorWidth_action;\n\tlet div8;\n\tlet t4;\n\tlet div8_class_value;\n\tlet div9;\n\tlet each_blocks_1 = [];\n\tlet each2_lookup = new Map_1();\n\tlet div9_class_value;\n\tlet div9_role_value;\n\tlet div9_aria_label_value;\n\tlet div9_id_value;\n\tlet div10;\n\tlet each_blocks = [];\n\tlet each3_lookup = new Map_1();\n\tlet div10_class_value;\n\tlet div10_aria_label_value;\n\tlet div11;\n\tlet button1;\n\tlet section_aria_label_value;\n\tlet mounted;\n\tlet dispose;\n\tlet each_value_4 = /*skinTones*/ ctx[19];\n\tconst get_key = ctx => /*skinTone*/ ctx[74];\n\n\tfor (let i = 0; i < each_value_4.length; i += 1) {\n\t\tlet child_ctx = get_each_context_4(ctx, each_value_4, i);\n\t\tlet key = get_key(child_ctx);\n\t\teach0_lookup.set(key, each_blocks_3[i] = create_each_block_4(key, child_ctx));\n\t}\n\n\tlet each_value_3 = /*groups*/ ctx[22];\n\tconst get_key_1 = ctx => /*group*/ ctx[71].id;\n\n\tfor (let i = 0; i < each_value_3.length; i += 1) {\n\t\tlet child_ctx = get_each_context_3(ctx, each_value_3, i);\n\t\tlet key = get_key_1(child_ctx);\n\t\teach1_lookup.set(key, each_blocks_2[i] = create_each_block_3(key, child_ctx));\n\t}\n\n\tlet each_value_1 = /*currentEmojisWithCategories*/ ctx[2];\n\tconst get_key_2 = ctx => /*emojiWithCategory*/ ctx[68].category;\n\n\tfor (let i = 0; i < each_value_1.length; i += 1) {\n\t\tlet child_ctx = get_each_context_1(ctx, each_value_1, i);\n\t\tlet key = get_key_2(child_ctx);\n\t\teach2_lookup.set(key, each_blocks_1[i] = create_each_block_1(key, child_ctx));\n\t}\n\n\tlet each_value = /*currentFavorites*/ ctx[20];\n\tconst get_key_3 = ctx => /*emoji*/ ctx[65].id;\n\n\tfor (let i = 0; i < each_value.length; i += 1) {\n\t\tlet child_ctx = get_each_context(ctx, each_value, i);\n\t\tlet key = get_key_3(child_ctx);\n\t\teach3_lookup.set(key, each_blocks[i] = create_each_block(key, child_ctx));\n\t}\n\n\treturn {\n\t\tc() {\n\t\t\tsection = element(\"section\");\n\t\t\tdiv0 = element(\"div\");\n\t\t\tdiv4 = element(\"div\");\n\t\t\tdiv1 = element(\"div\");\n\t\t\tinput = element(\"input\");\n\t\t\tlabel = element(\"label\");\n\t\t\tt0 = text(t0_value);\n\t\t\tspan0 = element(\"span\");\n\t\t\tt1 = text(t1_value);\n\t\t\tdiv2 = element(\"div\");\n\t\t\tbutton0 = element(\"button\");\n\t\t\tt2 = text(/*skinToneButtonText*/ ctx[16]);\n\t\t\tspan1 = element(\"span\");\n\t\t\tt3 = text(t3_value);\n\t\t\tdiv3 = element(\"div\");\n\n\t\t\tfor (let i = 0; i < each_blocks_3.length; i += 1) {\n\t\t\t\teach_blocks_3[i].c();\n\t\t\t}\n\n\t\t\tdiv5 = element(\"div\");\n\n\t\t\tfor (let i = 0; i < each_blocks_2.length; i += 1) {\n\t\t\t\teach_blocks_2[i].c();\n\t\t\t}\n\n\t\t\tdiv7 = element(\"div\");\n\t\t\tdiv6 = element(\"div\");\n\t\t\tdiv8 = element(\"div\");\n\t\t\tt4 = text(/*message*/ ctx[9]);\n\t\t\tdiv9 = element(\"div\");\n\n\t\t\tfor (let i = 0; i < each_blocks_1.length; i += 1) {\n\t\t\t\teach_blocks_1[i].c();\n\t\t\t}\n\n\t\t\tdiv10 = element(\"div\");\n\n\t\t\tfor (let i = 0; i < each_blocks.length; i += 1) {\n\t\t\t\teach_blocks[i].c();\n\t\t\t}\n\n\t\t\tdiv11 = element(\"div\");\n\t\t\tbutton1 = element(\"button\");\n\t\t\tbutton1.textContent = \"ðŸ˜€\";\n\t\t\tthis.c = noop;\n\t\t\tattr(div0, \"class\", \"pad-top\");\n\t\t\tattr(input, \"id\", \"search\");\n\t\t\tattr(input, \"class\", \"search\");\n\t\t\tattr(input, \"type\", \"search\");\n\t\t\tattr(input, \"role\", \"combobox\");\n\t\t\tattr(input, \"enterkeyhint\", \"search\");\n\t\t\tattr(input, \"placeholder\", input_placeholder_value = /*i18n*/ ctx[0].searchLabel);\n\t\t\tattr(input, \"autocapitalize\", \"none\");\n\t\t\tattr(input, \"autocomplete\", \"off\");\n\t\t\tattr(input, \"spellcheck\", \"true\");\n\t\t\tattr(input, \"aria-expanded\", input_aria_expanded_value = !!(/*searchMode*/ ctx[7] && /*currentEmojis*/ ctx[1].length));\n\t\t\tattr(input, \"aria-controls\", \"search-results\");\n\t\t\tattr(input, \"aria-owns\", \"search-results\");\n\t\t\tattr(input, \"aria-describedby\", \"search-description\");\n\t\t\tattr(input, \"aria-autocomplete\", \"list\");\n\n\t\t\tattr(input, \"aria-activedescendant\", input_aria_activedescendant_value = /*activeSearchItemId*/ ctx[25]\n\t\t\t? `emo-${/*activeSearchItemId*/ ctx[25]}`\n\t\t\t: \"\");\n\n\t\t\tattr(label, \"class\", \"sr-only\");\n\t\t\tattr(label, \"for\", \"search\");\n\t\t\tattr(span0, \"id\", \"search-description\");\n\t\t\tattr(span0, \"class\", \"sr-only\");\n\t\t\tattr(div1, \"class\", \"search-wrapper\");\n\t\t\tattr(button0, \"id\", \"skintone-button\");\n\t\t\tattr(button0, \"class\", button0_class_value = \"emoji \" + (/*skinTonePickerExpanded*/ ctx[11] ? \"hide-focus\" : \"\"));\n\t\t\tattr(button0, \"aria-label\", /*skinToneButtonLabel*/ ctx[18]);\n\t\t\tattr(button0, \"title\", /*skinToneButtonLabel*/ ctx[18]);\n\t\t\tattr(button0, \"aria-describedby\", \"skintone-description\");\n\t\t\tattr(button0, \"aria-haspopup\", \"listbox\");\n\t\t\tattr(button0, \"aria-expanded\", /*skinTonePickerExpanded*/ ctx[11]);\n\t\t\tattr(button0, \"aria-controls\", \"skintone-list\");\n\n\t\t\tattr(div2, \"class\", div2_class_value = \"skintone-button-wrapper \" + (/*skinTonePickerExpandedAfterAnimation*/ ctx[12]\n\t\t\t? \"expanded\"\n\t\t\t: \"\"));\n\n\t\t\tattr(span1, \"id\", \"skintone-description\");\n\t\t\tattr(span1, \"class\", \"sr-only\");\n\t\t\tattr(div3, \"id\", \"skintone-list\");\n\n\t\t\tattr(div3, \"class\", div3_class_value = \"skintone-list \" + (/*skinTonePickerExpanded*/ ctx[11]\n\t\t\t? \"\"\n\t\t\t: \"hidden no-animate\"));\n\n\t\t\tattr(div3, \"style\", div3_style_value = /*skinTonePickerExpanded*/ ctx[11]\n\t\t\t? \"transform: translateY(0);\"\n\t\t\t: \"transform: translateY(calc(-1 * var(--num-skintones) * var(--total-emoji-size)))\");\n\n\t\t\tattr(div3, \"role\", \"listbox\");\n\t\t\tattr(div3, \"aria-label\", div3_aria_label_value = /*i18n*/ ctx[0].skinTonesLabel);\n\t\t\tattr(div3, \"aria-activedescendant\", div3_aria_activedescendant_value = \"skintone-\" + /*activeSkinTone*/ ctx[15]);\n\t\t\tattr(div3, \"aria-hidden\", div3_aria_hidden_value = !/*skinTonePickerExpanded*/ ctx[11]);\n\t\t\tattr(div4, \"class\", \"search-row\");\n\t\t\tattr(div5, \"class\", \"nav\");\n\t\t\tattr(div5, \"role\", \"tablist\");\n\t\t\tset_style(div5, \"grid-template-columns\", \"repeat(\" + /*groups*/ ctx[22].length + \", 1fr)\");\n\t\t\tattr(div5, \"aria-label\", div5_aria_label_value = /*i18n*/ ctx[0].categoriesLabel);\n\t\t\tattr(div6, \"class\", \"indicator\");\n\t\t\tattr(div6, \"style\", /*indicatorStyle*/ ctx[10]);\n\t\t\tattr(div7, \"class\", \"indicator-wrapper\");\n\t\t\tattr(div7, \"aria-hidden\", \"true\");\n\t\t\tattr(div8, \"class\", div8_class_value = \"message \" + (/*message*/ ctx[9] ? \"\" : \"gone\"));\n\t\t\tattr(div8, \"role\", \"alert\");\n\t\t\tattr(div8, \"aria-live\", \"polite\");\n\t\t\tattr(div9, \"class\", div9_class_value = \"tabpanel \" + (!/*loaded*/ ctx[24] || /*message*/ ctx[9] ? \"gone\" : \"\"));\n\t\t\tattr(div9, \"role\", div9_role_value = /*searchMode*/ ctx[7] ? \"region\" : \"tabpanel\");\n\n\t\t\tattr(div9, \"aria-label\", div9_aria_label_value = /*searchMode*/ ctx[7]\n\t\t\t? /*i18n*/ ctx[0].searchResultsLabel\n\t\t\t: /*i18n*/ ctx[0].categories[/*currentGroup*/ ctx[23].name]);\n\n\t\t\tattr(div9, \"id\", div9_id_value = /*searchMode*/ ctx[7]\n\t\t\t? \"\"\n\t\t\t: `tab-${/*currentGroup*/ ctx[23].id}`);\n\n\t\t\tattr(div9, \"tabindex\", \"0\");\n\t\t\tattr(div10, \"class\", div10_class_value = \"favorites emoji-menu \" + (/*message*/ ctx[9] ? \"gone\" : \"\"));\n\t\t\tattr(div10, \"role\", \"menu\");\n\t\t\tattr(div10, \"aria-label\", div10_aria_label_value = /*i18n*/ ctx[0].favoritesLabel);\n\t\t\tset_style(div10, \"padding-right\", /*scrollbarWidth*/ ctx[21] + \"px\");\n\t\t\tattr(button1, \"tabindex\", \"-1\");\n\t\t\tattr(button1, \"class\", \"emoji baseline-emoji\");\n\t\t\tattr(div11, \"aria-hidden\", \"true\");\n\t\t\tattr(div11, \"class\", \"hidden abs-pos\");\n\t\t\tattr(section, \"class\", \"picker\");\n\t\t\tattr(section, \"aria-label\", section_aria_label_value = /*i18n*/ ctx[0].regionLabel);\n\t\t\tattr(section, \"style\", /*pickerStyle*/ ctx[17]);\n\t\t},\n\t\tm(target, anchor) {\n\t\t\tinsert(target, section, anchor);\n\t\t\tappend(section, div0);\n\t\t\tappend(section, div4);\n\t\t\tappend(div4, div1);\n\t\t\tappend(div1, input);\n\t\t\tset_input_value(input, /*rawSearchText*/ ctx[3]);\n\t\t\tappend(div1, label);\n\t\t\tappend(label, t0);\n\t\t\tappend(div1, span0);\n\t\t\tappend(span0, t1);\n\t\t\tappend(div4, div2);\n\t\t\tappend(div2, button0);\n\t\t\tappend(button0, t2);\n\t\t\tappend(div4, span1);\n\t\t\tappend(span1, t3);\n\t\t\tappend(div4, div3);\n\n\t\t\tfor (let i = 0; i < each_blocks_3.length; i += 1) {\n\t\t\t\teach_blocks_3[i].m(div3, null);\n\t\t\t}\n\n\t\t\t/*div3_binding*/ ctx[45](div3);\n\t\t\tappend(section, div5);\n\n\t\t\tfor (let i = 0; i < each_blocks_2.length; i += 1) {\n\t\t\t\teach_blocks_2[i].m(div5, null);\n\t\t\t}\n\n\t\t\tappend(section, div7);\n\t\t\tappend(div7, div6);\n\t\t\tappend(section, div8);\n\t\t\tappend(div8, t4);\n\t\t\tappend(section, div9);\n\n\t\t\tfor (let i = 0; i < each_blocks_1.length; i += 1) {\n\t\t\t\teach_blocks_1[i].m(div9, null);\n\t\t\t}\n\n\t\t\t/*div9_binding*/ ctx[47](div9);\n\t\t\tappend(section, div10);\n\n\t\t\tfor (let i = 0; i < each_blocks.length; i += 1) {\n\t\t\t\teach_blocks[i].m(div10, null);\n\t\t\t}\n\n\t\t\tappend(section, div11);\n\t\t\tappend(div11, button1);\n\t\t\t/*button1_binding*/ ctx[48](button1);\n\t\t\t/*section_binding*/ ctx[49](section);\n\n\t\t\tif (!mounted) {\n\t\t\t\tdispose = [\n\t\t\t\t\tlisten(input, \"input\", /*input_input_handler*/ ctx[44]),\n\t\t\t\t\tlisten(input, \"keydown\", /*onSearchKeydown*/ ctx[29]),\n\t\t\t\t\tlisten(button0, \"click\", /*onClickSkinToneButton*/ ctx[34]),\n\t\t\t\t\tlisten(div3, \"focusout\", /*onSkinToneOptionsFocusOut*/ ctx[37]),\n\t\t\t\t\tlisten(div3, \"click\", /*onSkinToneOptionsClick*/ ctx[33]),\n\t\t\t\t\tlisten(div3, \"keydown\", /*onSkinToneOptionsKeydown*/ ctx[35]),\n\t\t\t\t\tlisten(div3, \"keyup\", /*onSkinToneOptionsKeyup*/ ctx[36]),\n\t\t\t\t\tlisten(div5, \"keydown\", /*onNavKeydown*/ ctx[31]),\n\t\t\t\t\taction_destroyer(calculateIndicatorWidth_action = /*calculateIndicatorWidth*/ ctx[28].call(null, div6)),\n\t\t\t\t\tlisten(div9, \"click\", /*onEmojiClick*/ ctx[32]),\n\t\t\t\t\tlisten(div10, \"click\", /*onEmojiClick*/ ctx[32])\n\t\t\t\t];\n\n\t\t\t\tmounted = true;\n\t\t\t}\n\t\t},\n\t\tp(ctx, dirty) {\n\t\t\tif (dirty[0] & /*i18n*/ 1 && input_placeholder_value !== (input_placeholder_value = /*i18n*/ ctx[0].searchLabel)) {\n\t\t\t\tattr(input, \"placeholder\", input_placeholder_value);\n\t\t\t}\n\n\t\t\tif (dirty[0] & /*searchMode, currentEmojis*/ 130 && input_aria_expanded_value !== (input_aria_expanded_value = !!(/*searchMode*/ ctx[7] && /*currentEmojis*/ ctx[1].length))) {\n\t\t\t\tattr(input, \"aria-expanded\", input_aria_expanded_value);\n\t\t\t}\n\n\t\t\tif (dirty[0] & /*activeSearchItemId*/ 33554432 && input_aria_activedescendant_value !== (input_aria_activedescendant_value = /*activeSearchItemId*/ ctx[25]\n\t\t\t? `emo-${/*activeSearchItemId*/ ctx[25]}`\n\t\t\t: \"\")) {\n\t\t\t\tattr(input, \"aria-activedescendant\", input_aria_activedescendant_value);\n\t\t\t}\n\n\t\t\tif (dirty[0] & /*rawSearchText*/ 8) {\n\t\t\t\tset_input_value(input, /*rawSearchText*/ ctx[3]);\n\t\t\t}\n\n\t\t\tif (dirty[0] & /*i18n*/ 1 && t0_value !== (t0_value = /*i18n*/ ctx[0].searchLabel + \"\")) set_data(t0, t0_value);\n\t\t\tif (dirty[0] & /*i18n*/ 1 && t1_value !== (t1_value = /*i18n*/ ctx[0].searchDescription + \"\")) set_data(t1, t1_value);\n\t\t\tif (dirty[0] & /*skinToneButtonText*/ 65536) set_data(t2, /*skinToneButtonText*/ ctx[16]);\n\n\t\t\tif (dirty[0] & /*skinTonePickerExpanded*/ 2048 && button0_class_value !== (button0_class_value = \"emoji \" + (/*skinTonePickerExpanded*/ ctx[11] ? \"hide-focus\" : \"\"))) {\n\t\t\t\tattr(button0, \"class\", button0_class_value);\n\t\t\t}\n\n\t\t\tif (dirty[0] & /*skinToneButtonLabel*/ 262144) {\n\t\t\t\tattr(button0, \"aria-label\", /*skinToneButtonLabel*/ ctx[18]);\n\t\t\t}\n\n\t\t\tif (dirty[0] & /*skinToneButtonLabel*/ 262144) {\n\t\t\t\tattr(button0, \"title\", /*skinToneButtonLabel*/ ctx[18]);\n\t\t\t}\n\n\t\t\tif (dirty[0] & /*skinTonePickerExpanded*/ 2048) {\n\t\t\t\tattr(button0, \"aria-expanded\", /*skinTonePickerExpanded*/ ctx[11]);\n\t\t\t}\n\n\t\t\tif (dirty[0] & /*skinTonePickerExpandedAfterAnimation*/ 4096 && div2_class_value !== (div2_class_value = \"skintone-button-wrapper \" + (/*skinTonePickerExpandedAfterAnimation*/ ctx[12]\n\t\t\t? \"expanded\"\n\t\t\t: \"\"))) {\n\t\t\t\tattr(div2, \"class\", div2_class_value);\n\t\t\t}\n\n\t\t\tif (dirty[0] & /*i18n*/ 1 && t3_value !== (t3_value = /*i18n*/ ctx[0].skinToneDescription + \"\")) set_data(t3, t3_value);\n\n\t\t\tif (dirty[0] & /*skinTones, activeSkinTone, i18n*/ 557057) {\n\t\t\t\tconst each_value_4 = /*skinTones*/ ctx[19];\n\t\t\t\teach_blocks_3 = update_keyed_each(each_blocks_3, dirty, get_key, 1, ctx, each_value_4, each0_lookup, div3, destroy_block, create_each_block_4, null, get_each_context_4);\n\t\t\t}\n\n\t\t\tif (dirty[0] & /*skinTonePickerExpanded*/ 2048 && div3_class_value !== (div3_class_value = \"skintone-list \" + (/*skinTonePickerExpanded*/ ctx[11]\n\t\t\t? \"\"\n\t\t\t: \"hidden no-animate\"))) {\n\t\t\t\tattr(div3, \"class\", div3_class_value);\n\t\t\t}\n\n\t\t\tif (dirty[0] & /*skinTonePickerExpanded*/ 2048 && div3_style_value !== (div3_style_value = /*skinTonePickerExpanded*/ ctx[11]\n\t\t\t? \"transform: translateY(0);\"\n\t\t\t: \"transform: translateY(calc(-1 * var(--num-skintones) * var(--total-emoji-size)))\")) {\n\t\t\t\tattr(div3, \"style\", div3_style_value);\n\t\t\t}\n\n\t\t\tif (dirty[0] & /*i18n*/ 1 && div3_aria_label_value !== (div3_aria_label_value = /*i18n*/ ctx[0].skinTonesLabel)) {\n\t\t\t\tattr(div3, \"aria-label\", div3_aria_label_value);\n\t\t\t}\n\n\t\t\tif (dirty[0] & /*activeSkinTone*/ 32768 && div3_aria_activedescendant_value !== (div3_aria_activedescendant_value = \"skintone-\" + /*activeSkinTone*/ ctx[15])) {\n\t\t\t\tattr(div3, \"aria-activedescendant\", div3_aria_activedescendant_value);\n\t\t\t}\n\n\t\t\tif (dirty[0] & /*skinTonePickerExpanded*/ 2048 && div3_aria_hidden_value !== (div3_aria_hidden_value = !/*skinTonePickerExpanded*/ ctx[11])) {\n\t\t\t\tattr(div3, \"aria-hidden\", div3_aria_hidden_value);\n\t\t\t}\n\n\t\t\tif (dirty[0] & /*groups, i18n, searchMode, currentGroup, onNavClick*/ 1086324865) {\n\t\t\t\tconst each_value_3 = /*groups*/ ctx[22];\n\t\t\t\teach_blocks_2 = update_keyed_each(each_blocks_2, dirty, get_key_1, 1, ctx, each_value_3, each1_lookup, div5, destroy_block, create_each_block_3, null, get_each_context_3);\n\t\t\t}\n\n\t\t\tif (dirty[0] & /*groups*/ 4194304) {\n\t\t\t\tset_style(div5, \"grid-template-columns\", \"repeat(\" + /*groups*/ ctx[22].length + \", 1fr)\");\n\t\t\t}\n\n\t\t\tif (dirty[0] & /*i18n*/ 1 && div5_aria_label_value !== (div5_aria_label_value = /*i18n*/ ctx[0].categoriesLabel)) {\n\t\t\t\tattr(div5, \"aria-label\", div5_aria_label_value);\n\t\t\t}\n\n\t\t\tif (dirty[0] & /*indicatorStyle*/ 1024) {\n\t\t\t\tattr(div6, \"style\", /*indicatorStyle*/ ctx[10]);\n\t\t\t}\n\n\t\t\tif (dirty[0] & /*message*/ 512) set_data(t4, /*message*/ ctx[9]);\n\n\t\t\tif (dirty[0] & /*message*/ 512 && div8_class_value !== (div8_class_value = \"message \" + (/*message*/ ctx[9] ? \"\" : \"gone\"))) {\n\t\t\t\tattr(div8, \"class\", div8_class_value);\n\t\t\t}\n\n\t\t\tif (dirty[0] & /*searchMode, currentEmojisWithCategories, activeSearchItem, labelWithSkin, currentSkinTone, i18n, currentGroup*/ 75514245) {\n\t\t\t\tconst each_value_1 = /*currentEmojisWithCategories*/ ctx[2];\n\t\t\t\teach_blocks_1 = update_keyed_each(each_blocks_1, dirty, get_key_2, 1, ctx, each_value_1, each2_lookup, div9, destroy_block, create_each_block_1, null, get_each_context_1);\n\t\t\t}\n\n\t\t\tif (dirty[0] & /*loaded, message*/ 16777728 && div9_class_value !== (div9_class_value = \"tabpanel \" + (!/*loaded*/ ctx[24] || /*message*/ ctx[9] ? \"gone\" : \"\"))) {\n\t\t\t\tattr(div9, \"class\", div9_class_value);\n\t\t\t}\n\n\t\t\tif (dirty[0] & /*searchMode*/ 128 && div9_role_value !== (div9_role_value = /*searchMode*/ ctx[7] ? \"region\" : \"tabpanel\")) {\n\t\t\t\tattr(div9, \"role\", div9_role_value);\n\t\t\t}\n\n\t\t\tif (dirty[0] & /*searchMode, i18n, currentGroup*/ 8388737 && div9_aria_label_value !== (div9_aria_label_value = /*searchMode*/ ctx[7]\n\t\t\t? /*i18n*/ ctx[0].searchResultsLabel\n\t\t\t: /*i18n*/ ctx[0].categories[/*currentGroup*/ ctx[23].name])) {\n\t\t\t\tattr(div9, \"aria-label\", div9_aria_label_value);\n\t\t\t}\n\n\t\t\tif (dirty[0] & /*searchMode, currentGroup*/ 8388736 && div9_id_value !== (div9_id_value = /*searchMode*/ ctx[7]\n\t\t\t? \"\"\n\t\t\t: `tab-${/*currentGroup*/ ctx[23].id}`)) {\n\t\t\t\tattr(div9, \"id\", div9_id_value);\n\t\t\t}\n\n\t\t\tif (dirty[0] & /*labelWithSkin, currentFavorites, currentSkinTone*/ 68173824) {\n\t\t\t\tconst each_value = /*currentFavorites*/ ctx[20];\n\t\t\t\teach_blocks = update_keyed_each(each_blocks, dirty, get_key_3, 1, ctx, each_value, each3_lookup, div10, destroy_block, create_each_block, null, get_each_context);\n\t\t\t}\n\n\t\t\tif (dirty[0] & /*message*/ 512 && div10_class_value !== (div10_class_value = \"favorites emoji-menu \" + (/*message*/ ctx[9] ? \"gone\" : \"\"))) {\n\t\t\t\tattr(div10, \"class\", div10_class_value);\n\t\t\t}\n\n\t\t\tif (dirty[0] & /*i18n*/ 1 && div10_aria_label_value !== (div10_aria_label_value = /*i18n*/ ctx[0].favoritesLabel)) {\n\t\t\t\tattr(div10, \"aria-label\", div10_aria_label_value);\n\t\t\t}\n\n\t\t\tif (dirty[0] & /*scrollbarWidth*/ 2097152) {\n\t\t\t\tset_style(div10, \"padding-right\", /*scrollbarWidth*/ ctx[21] + \"px\");\n\t\t\t}\n\n\t\t\tif (dirty[0] & /*i18n*/ 1 && section_aria_label_value !== (section_aria_label_value = /*i18n*/ ctx[0].regionLabel)) {\n\t\t\t\tattr(section, \"aria-label\", section_aria_label_value);\n\t\t\t}\n\n\t\t\tif (dirty[0] & /*pickerStyle*/ 131072) {\n\t\t\t\tattr(section, \"style\", /*pickerStyle*/ ctx[17]);\n\t\t\t}\n\t\t},\n\t\ti: noop,\n\t\to: noop,\n\t\td(detaching) {\n\t\t\tif (detaching) detach(section);\n\n\t\t\tfor (let i = 0; i < each_blocks_3.length; i += 1) {\n\t\t\t\teach_blocks_3[i].d();\n\t\t\t}\n\n\t\t\t/*div3_binding*/ ctx[45](null);\n\n\t\t\tfor (let i = 0; i < each_blocks_2.length; i += 1) {\n\t\t\t\teach_blocks_2[i].d();\n\t\t\t}\n\n\t\t\tfor (let i = 0; i < each_blocks_1.length; i += 1) {\n\t\t\t\teach_blocks_1[i].d();\n\t\t\t}\n\n\t\t\t/*div9_binding*/ ctx[47](null);\n\n\t\t\tfor (let i = 0; i < each_blocks.length; i += 1) {\n\t\t\t\teach_blocks[i].d();\n\t\t\t}\n\n\t\t\t/*button1_binding*/ ctx[48](null);\n\t\t\t/*section_binding*/ ctx[49](null);\n\t\t\tmounted = false;\n\t\t\trun_all(dispose);\n\t\t}\n\t};\n}\n\nfunction unicodeWithSkin(emoji, currentSkinTone) {\n\treturn currentSkinTone && emoji.skins && emoji.skins[currentSkinTone] || emoji.unicode;\n}\n\nfunction instance($$self, $$props, $$invalidate) {\n\tlet { locale = null } = $$props;\n\tlet { dataSource = null } = $$props;\n\tlet { skinToneEmoji = DEFAULT_SKIN_TONE_EMOJI } = $$props;\n\tlet { i18n = enI18n } = $$props;\n\tlet { database = null } = $$props;\n\tlet { customEmoji = null } = $$props;\n\tlet { customCategorySorting = (a, b) => a < b ? -1 : a > b ? 1 : 0 } = $$props;\n\n\t// private\n\tlet initialLoad = true;\n\n\tlet currentEmojis = [];\n\tlet currentEmojisWithCategories = []; // eslint-disable-line no-unused-vars\n\tlet rawSearchText = \"\";\n\tlet searchText = \"\";\n\tlet rootElement;\n\tlet baselineEmoji;\n\tlet tabpanelElement;\n\tlet searchMode = false; // eslint-disable-line no-unused-vars\n\tlet activeSearchItem = -1;\n\tlet message; // eslint-disable-line no-unused-vars\n\tlet computedIndicatorWidth = 0;\n\tlet indicatorStyle = \"\"; // eslint-disable-line no-unused-vars\n\tlet skinTonePickerExpanded = false;\n\tlet skinTonePickerExpandedAfterAnimation = false; // eslint-disable-line no-unused-vars\n\tlet skinToneDropdown;\n\tlet currentSkinTone = 0;\n\tlet activeSkinTone = 0;\n\tlet skinToneButtonText; // eslint-disable-line no-unused-vars\n\tlet pickerStyle; // eslint-disable-line no-unused-vars\n\tlet skinToneButtonLabel = \"\"; // eslint-disable-line no-unused-vars\n\tlet skinTones = [];\n\tlet currentFavorites = []; // eslint-disable-line no-unused-vars\n\tlet defaultFavoriteEmojis;\n\tlet numColumns = DEFAULT_NUM_COLUMNS;\n\tlet scrollbarWidth = 0; // eslint-disable-line no-unused-vars\n\tlet currentGroupIndex = 0;\n\tlet groups$1 = groups;\n\tlet currentGroup;\n\tlet loaded = false; // eslint-disable-line no-unused-vars\n\tlet activeSearchItemId; // eslint-disable-line no-unused-vars\n\n\t//\n\t// Utils/helpers\n\t//\n\tfunction focus(id) {\n\t\trootElement.getRootNode().getElementById(id).focus();\n\t}\n\n\t// fire a custom event that crosses the shadow boundary\n\tfunction fireEvent(name, detail) {\n\t\trootElement.dispatchEvent(new CustomEvent(name, { detail, bubbles: true, composed: true }));\n\t}\n\n\t// eslint-disable-next-line no-unused-vars\n\tfunction labelWithSkin(emoji, currentSkinTone) {\n\t\treturn uniq([emoji.name || unicodeWithSkin(emoji, currentSkinTone), ...emoji.shortcodes]).join(\", \");\n\t}\n\n\t//\n\t// Determine the emoji support level (in requestIdleCallback)\n\t//\n\temojiSupportLevelPromise.then(level => {\n\t\tif (!level) {\n\t\t\t$$invalidate(9, message = i18n.emojiUnsupportedMessage);\n\t\t}\n\t});\n\n\t// TODO: this is a bizarre way to set these default properties, but currently Svelte\n\t// renders custom elements in an odd way - props are not set when calling the constructor,\n\t// but are only set later. This would cause a double render or a double-fetch of\n\t// the dataSource, which is bad. Delaying with a microtask avoids this.\n\t// See https://github.com/sveltejs/svelte/pull/4527\n\tonMount(async () => {\n\t\tawait tick();\n\t\t$$invalidate(38, locale = locale || DEFAULT_LOCALE);\n\t\t$$invalidate(39, dataSource = dataSource || DEFAULT_DATA_SOURCE);\n\t});\n\n\tonDestroy(async () => {\n\t\tif (database) {\n\t\t\tawait database.close();\n\t\t}\n\t});\n\n\t//\n\t// Calculate the width of the emoji grid. This serves two purposes:\n\t// 1) Re-calculate the --num-columns var because it may have changed\n\t// 2) Re-calculate the scrollbar width because it may have changed\n\t//   (i.e. because the number of items changed)\n\t//\n\t// eslint-disable-next-line no-unused-vars\n\tfunction calculateEmojiGridWidth(node) {\n\t\treturn calculateWidth(node, width => {\n\t\t\tconst newNumColumns = \"production\" === \"test\"\n\t\t\t? DEFAULT_NUM_COLUMNS\n\t\t\t: parseInt(getComputedStyle(rootElement).getPropertyValue(\"--num-columns\"), 10);\n\n\t\t\tconst parentWidth = \"production\" === \"test\"\n\t\t\t? 1\n\t\t\t: node.parentElement.getBoundingClientRect().width; // jsdom throws an error here occasionally\n\n\t\t\tconst newScrollbarWidth = parentWidth - width;\n\t\t\t$$invalidate(54, numColumns = newNumColumns);\n\t\t\t$$invalidate(21, scrollbarWidth = newScrollbarWidth);\n\t\t});\n\t}\n\n\t//\n\t// Animate the indicator\n\t//\n\t// eslint-disable-next-line no-unused-vars\n\tfunction calculateIndicatorWidth(node) {\n\t\treturn calculateWidth(node, width => {\n\t\t\t$$invalidate(52, computedIndicatorWidth = width);\n\t\t});\n\t}\n\n\tfunction checkZwjSupportAndUpdate(zwjEmojisToCheck) {\n\t\tconst rootNode = rootElement.getRootNode();\n\n\t\t// Jest doesn't seem to understand that shadowRoot.getElementById() is a thing\n\t\tconst emojiToDomNode = \"production\" === \"test\"\n\t\t? emoji => rootNode.querySelector(`[id=${JSON.stringify(\"emo-\" + emoji.id)}]`)\n\t\t: emoji => rootNode.getElementById(`emo-${emoji.id}`);\n\n\t\tcheckZwjSupport(zwjEmojisToCheck, baselineEmoji, emojiToDomNode);\n\n\t\t// force update\n\t\t$$invalidate(1, currentEmojis = currentEmojis); // eslint-disable-line no-self-assign\n\t}\n\n\tfunction isZwjSupported(emoji) {\n\t\treturn !emoji.unicode || !hasZwj(emoji) || supportedZwjEmojis.get(emoji.unicode);\n\t}\n\n\tasync function filterEmojisByVersion(emojis) {\n\t\tconst emojiSupportLevel = await emojiSupportLevelPromise;\n\n\t\t// !version corresponds to custom emoji\n\t\treturn emojis.filter(({ version }) => !version || version <= emojiSupportLevel);\n\t}\n\n\tasync function summarizeEmojis(emojis) {\n\t\treturn summarizeEmojisForUI(emojis, await emojiSupportLevelPromise);\n\t}\n\n\tasync function getEmojisByGroup(group) {\n\n\t\tif (typeof group === \"undefined\") {\n\t\t\treturn [];\n\t\t}\n\n\t\t// -1 is custom emoji\n\t\tconst emoji = group === -1\n\t\t? customEmoji\n\t\t: await database.getEmojiByGroup(group);\n\n\t\treturn summarizeEmojis(await filterEmojisByVersion(emoji));\n\t}\n\n\tasync function getEmojisBySearchQuery(query) {\n\t\treturn summarizeEmojis(await filterEmojisByVersion(await database.getEmojiBySearchQuery(query)));\n\t}\n\n\t// eslint-disable-next-line no-unused-vars\n\tfunction onSearchKeydown(event) {\n\t\tif (!searchMode || !currentEmojis.length) {\n\t\t\treturn;\n\t\t}\n\n\t\tconst goToNextOrPrevious = previous => {\n\t\t\thalt(event);\n\t\t\t$$invalidate(8, activeSearchItem = incrementOrDecrement(previous, activeSearchItem, currentEmojis));\n\t\t};\n\n\t\tswitch (event.key) {\n\t\t\tcase \"ArrowDown\":\n\t\t\t\treturn goToNextOrPrevious(false);\n\t\t\tcase \"ArrowUp\":\n\t\t\t\treturn goToNextOrPrevious(true);\n\t\t\tcase \"Enter\":\n\t\t\t\tif (activeSearchItem !== -1) {\n\t\t\t\t\thalt(event);\n\t\t\t\t\treturn clickEmoji(currentEmojis[activeSearchItem].id);\n\t\t\t\t} else if (currentEmojis.length) {\n\t\t\t\t\t$$invalidate(8, activeSearchItem = 0);\n\t\t\t\t}\n\t\t}\n\t}\n\n\t//\n\t// Handle user input on nav\n\t//\n\t// eslint-disable-next-line no-unused-vars\n\tfunction onNavClick(group) {\n\t\t$$invalidate(3, rawSearchText = \"\");\n\t\t$$invalidate(51, searchText = \"\");\n\t\t$$invalidate(8, activeSearchItem = -1);\n\t\t$$invalidate(55, currentGroupIndex = groups$1.findIndex(_ => _.id === group.id));\n\t}\n\n\t// eslint-disable-next-line no-unused-vars\n\tfunction onNavKeydown(event) {\n\t\tconst { target, key } = event;\n\n\t\tconst doFocus = el => {\n\t\t\tif (el) {\n\t\t\t\thalt(event);\n\t\t\t\tel.focus();\n\t\t\t}\n\t\t};\n\n\t\tswitch (key) {\n\t\t\tcase \"ArrowLeft\":\n\t\t\t\treturn doFocus(target.previousSibling);\n\t\t\tcase \"ArrowRight\":\n\t\t\t\treturn doFocus(target.nextSibling);\n\t\t\tcase \"Home\":\n\t\t\t\treturn doFocus(target.parentElement.firstChild);\n\t\t\tcase \"End\":\n\t\t\t\treturn doFocus(target.parentElement.lastChild);\n\t\t}\n\t}\n\n\t//\n\t// Handle user input on an emoji\n\t//\n\tasync function clickEmoji(unicodeOrName) {\n\t\tconst emoji = await database.getEmojiByUnicodeOrName(unicodeOrName);\n\t\tconst emojiSummary = [...currentEmojis, ...currentFavorites].find(_ => _.id === unicodeOrName);\n\t\tconst skinTonedUnicode = emojiSummary.unicode && unicodeWithSkin(emojiSummary, currentSkinTone);\n\t\tawait database.incrementFavoriteEmojiCount(unicodeOrName);\n\n\t\t// eslint-disable-next-line no-self-assign\n\t\t$$invalidate(53, defaultFavoriteEmojis = defaultFavoriteEmojis); // force favorites to re-render\n\n\t\tfireEvent(\"emoji-click\", {\n\t\t\temoji,\n\t\t\tskinTone: currentSkinTone,\n\t\t\t...skinTonedUnicode && { unicode: skinTonedUnicode },\n\t\t\t...emojiSummary.name && { name: emojiSummary.name }\n\t\t});\n\t}\n\n\t// eslint-disable-next-line no-unused-vars\n\tasync function onEmojiClick(event) {\n\t\tconst { target } = event;\n\n\t\tif (!target.classList.contains(\"emoji\")) {\n\t\t\treturn;\n\t\t}\n\n\t\thalt(event);\n\t\tconst id = target.id.substring(4); // replace 'emo-' or 'fav-' prefix\n\n\t\t/* no await */\n\t\tclickEmoji(id);\n\t}\n\n\t//\n\t// Handle user input on the skintone picker\n\t//\n\t// eslint-disable-next-line no-unused-vars\n\tasync function onSkinToneOptionsClick(event) {\n\t\tconst { target } = event;\n\n\t\tif (!target.classList.contains(\"skintone-option\")) {\n\t\t\treturn;\n\t\t}\n\n\t\thalt(event);\n\t\tconst skinTone = parseInt(target.id.slice(9), 10); // remove 'skintone-' prefix\n\t\t$$invalidate(14, currentSkinTone = skinTone);\n\t\t$$invalidate(11, skinTonePickerExpanded = false);\n\t\tfocus(\"skintone-button\");\n\t\tfireEvent(\"skin-tone-change\", { skinTone });\n\n\t\t/* no await */\n\t\tdatabase.setPreferredSkinTone(skinTone);\n\t}\n\n\t// eslint-disable-next-line no-unused-vars\n\tasync function onClickSkinToneButton(event) {\n\t\t$$invalidate(11, skinTonePickerExpanded = !skinTonePickerExpanded);\n\t\t$$invalidate(15, activeSkinTone = currentSkinTone);\n\n\t\tif (skinTonePickerExpanded) {\n\t\t\thalt(event);\n\t\t\trAF(() => focus(`skintone-${activeSkinTone}`));\n\t\t}\n\t}\n\n\t// eslint-disable-next-line no-unused-vars\n\tfunction onSkinToneOptionsKeydown(event) {\n\t\tif (!skinTonePickerExpanded) {\n\t\t\treturn;\n\t\t}\n\n\t\tconst changeActiveSkinTone = async nextSkinTone => {\n\t\t\thalt(event);\n\t\t\t$$invalidate(15, activeSkinTone = nextSkinTone);\n\t\t\tawait tick();\n\t\t\tfocus(`skintone-${activeSkinTone}`);\n\t\t};\n\n\t\tswitch (event.key) {\n\t\t\tcase \"ArrowUp\":\n\t\t\t\treturn changeActiveSkinTone(incrementOrDecrement(true, activeSkinTone, skinTones));\n\t\t\tcase \"ArrowDown\":\n\t\t\t\treturn changeActiveSkinTone(incrementOrDecrement(false, activeSkinTone, skinTones));\n\t\t\tcase \"Home\":\n\t\t\t\treturn changeActiveSkinTone(0);\n\t\t\tcase \"End\":\n\t\t\t\treturn changeActiveSkinTone(skinTones.length - 1);\n\t\t\tcase \"Enter\":\n\t\t\t\t// enter on keydown, space on keyup. this is just how browsers work for buttons\n\t\t\t\t// https://lists.w3.org/Archives/Public/w3c-wai-ig/2019JanMar/0086.html\n\t\t\t\treturn onSkinToneOptionsClick(event);\n\t\t\tcase \"Escape\":\n\t\t\t\thalt(event);\n\t\t\t\treturn focus(\"skintone-button\");\n\t\t}\n\t}\n\n\t// eslint-disable-next-line no-unused-vars\n\tfunction onSkinToneOptionsKeyup(event) {\n\t\tif (!skinTonePickerExpanded) {\n\t\t\treturn;\n\t\t}\n\n\t\tswitch (event.key) {\n\t\t\tcase \" \":\n\t\t\t\t// enter on keydown, space on keyup. this is just how browsers work for buttons\n\t\t\t\t// https://lists.w3.org/Archives/Public/w3c-wai-ig/2019JanMar/0086.html\n\t\t\t\treturn onSkinToneOptionsClick(event);\n\t\t}\n\t}\n\n\t// eslint-disable-next-line no-unused-vars\n\tasync function onSkinToneOptionsFocusOut(event) {\n\t\t// On blur outside of the skintone options, collapse the skintone picker.\n\t\t// Except if focus is just moving to another skintone option, e.g. pressing up/down to change focus\n\t\tconst { relatedTarget } = event;\n\n\t\tif (!relatedTarget || !relatedTarget.classList.contains(\"skintone-option\")) {\n\t\t\t$$invalidate(11, skinTonePickerExpanded = false);\n\t\t}\n\t}\n\n\tfunction input_input_handler() {\n\t\trawSearchText = this.value;\n\t\t$$invalidate(3, rawSearchText);\n\t}\n\n\tfunction div3_binding($$value) {\n\t\tbinding_callbacks[$$value ? \"unshift\" : \"push\"](() => {\n\t\t\tskinToneDropdown = $$value;\n\t\t\t$$invalidate(13, skinToneDropdown);\n\t\t});\n\t}\n\n\tconst click_handler = group => onNavClick(group);\n\n\tfunction div9_binding($$value) {\n\t\tbinding_callbacks[$$value ? \"unshift\" : \"push\"](() => {\n\t\t\ttabpanelElement = $$value;\n\t\t\t(((((((((($$invalidate(6, tabpanelElement), $$invalidate(1, currentEmojis)), $$invalidate(40, database)), $$invalidate(51, searchText)), $$invalidate(23, currentGroup)), $$invalidate(38, locale)), $$invalidate(39, dataSource)), $$invalidate(42, customEmoji)), $$invalidate(3, rawSearchText)), $$invalidate(22, groups$1)), $$invalidate(55, currentGroupIndex));\n\t\t});\n\t}\n\n\tfunction button1_binding($$value) {\n\t\tbinding_callbacks[$$value ? \"unshift\" : \"push\"](() => {\n\t\t\tbaselineEmoji = $$value;\n\t\t\t$$invalidate(5, baselineEmoji);\n\t\t});\n\t}\n\n\tfunction section_binding($$value) {\n\t\tbinding_callbacks[$$value ? \"unshift\" : \"push\"](() => {\n\t\t\trootElement = $$value;\n\t\t\t$$invalidate(4, rootElement);\n\t\t});\n\t}\n\n\t$$self.$$set = $$props => {\n\t\tif (\"locale\" in $$props) $$invalidate(38, locale = $$props.locale);\n\t\tif (\"dataSource\" in $$props) $$invalidate(39, dataSource = $$props.dataSource);\n\t\tif (\"skinToneEmoji\" in $$props) $$invalidate(41, skinToneEmoji = $$props.skinToneEmoji);\n\t\tif (\"i18n\" in $$props) $$invalidate(0, i18n = $$props.i18n);\n\t\tif (\"database\" in $$props) $$invalidate(40, database = $$props.database);\n\t\tif (\"customEmoji\" in $$props) $$invalidate(42, customEmoji = $$props.customEmoji);\n\t\tif (\"customCategorySorting\" in $$props) $$invalidate(43, customCategorySorting = $$props.customCategorySorting);\n\t};\n\n\t$$self.$$.update = () => {\n\t\tif ($$self.$$.dirty[1] & /*locale, dataSource, database*/ 896) {\n\t\t\t {\n\t\t\t\tif (locale && dataSource && (!database || database.locale !== locale && database.dataSource !== dataSource)) {\n\t\t\t\t\t$$invalidate(40, database = new Database({ dataSource, locale }));\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\tif ($$self.$$.dirty[1] & /*customEmoji, database*/ 2560) {\n\t\t\t//\n\t\t\t// Set or update the customEmoji\n\t\t\t//\n\t\t\t {\n\t\t\t\tif (customEmoji && database) {\n\t\t\t\t\t$$invalidate(40, database.customEmoji = customEmoji, database);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\tif ($$self.$$.dirty[0] & /*i18n, message*/ 513 | $$self.$$.dirty[1] & /*database*/ 512) {\n\t\t\t//\n\t\t\t// Set or update the database object\n\t\t\t//\n\t\t\t {\n\t\t\t\t// show a Loading message if it takes a long time, or show an error if there's a network/IDB error\n\t\t\t\tasync function handleDatabaseLoading() {\n\t\t\t\t\tconst timeoutHandle = setTimeout(\n\t\t\t\t\t\t() => {\n\t\t\t\t\t\t\t$$invalidate(9, message = i18n.loadingMessage);\n\t\t\t\t\t\t},\n\t\t\t\t\t\tTIMEOUT_BEFORE_LOADING_MESSAGE\n\t\t\t\t\t);\n\n\t\t\t\t\ttry {\n\t\t\t\t\t\tawait database.ready();\n\t\t\t\t\t\t$$invalidate(24, loaded = true);\n\t\t\t\t\t} catch(err) {\n\t\t\t\t\t\tconsole.error(err);\n\t\t\t\t\t\t$$invalidate(9, message = i18n.networkErrorMessage);\n\t\t\t\t\t} finally {\n\t\t\t\t\t\tclearTimeout(timeoutHandle);\n\n\t\t\t\t\t\tif (message === i18n.loadingMessage) {\n\t\t\t\t\t\t\t$$invalidate(9, message = \"\");\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\tif (database) {\n\t\t\t\t\t/* no await */\n\t\t\t\t\thandleDatabaseLoading();\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\tif ($$self.$$.dirty[0] & /*groups*/ 4194304 | $$self.$$.dirty[1] & /*customEmoji*/ 2048) {\n\t\t\t {\n\t\t\t\tif (customEmoji && customEmoji.length) {\n\t\t\t\t\t$$invalidate(22, groups$1 = [customGroup, ...groups]);\n\t\t\t\t} else if (groups$1 !== groups) {\n\t\t\t\t\t$$invalidate(22, groups$1 = groups);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\tif ($$self.$$.dirty[0] & /*rawSearchText*/ 8) {\n\t\t\t//\n\t\t\t// Handle user input on the search input\n\t\t\t//\n\t\t\t {\n\t\t\t\trIC(() => {\n\t\t\t\t\t$$invalidate(51, searchText = (rawSearchText || \"\").trim()); // defer to avoid input delays, plus we can trim here\n\t\t\t\t\t$$invalidate(8, activeSearchItem = -1);\n\t\t\t\t});\n\t\t\t}\n\t\t}\n\n\t\tif ($$self.$$.dirty[0] & /*groups*/ 4194304 | $$self.$$.dirty[1] & /*currentGroupIndex*/ 16777216) {\n\t\t\t//\n\t\t\t// Update the current group based on the currentGroupIndex\n\t\t\t//\n\t\t\t $$invalidate(23, currentGroup = groups$1[currentGroupIndex]);\n\t\t}\n\n\t\tif ($$self.$$.dirty[0] & /*currentGroup*/ 8388608 | $$self.$$.dirty[1] & /*database, searchText*/ 1049088) {\n\t\t\t//\n\t\t\t// Set or update the currentEmojis. Check for invalid ZWJ renderings\n\t\t\t// (i.e. double emoji).\n\t\t\t//\n\t\t\t {\n\t\t\t\tasync function updateEmojis() {\n\n\t\t\t\t\tif (!database) {\n\t\t\t\t\t\t$$invalidate(1, currentEmojis = []);\n\t\t\t\t\t\t$$invalidate(7, searchMode = false);\n\t\t\t\t\t} else if (searchText.length >= MIN_SEARCH_TEXT_LENGTH) {\n\t\t\t\t\t\t$$invalidate(1, currentEmojis = await getEmojisBySearchQuery(searchText));\n\t\t\t\t\t\t$$invalidate(7, searchMode = true);\n\t\t\t\t\t} else if (currentGroup) {\n\t\t\t\t\t\t$$invalidate(1, currentEmojis = await getEmojisByGroup(currentGroup.id));\n\t\t\t\t\t\t$$invalidate(7, searchMode = false);\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\t/* no await */\n\t\t\t\tupdateEmojis();\n\t\t\t}\n\t\t}\n\n\t\tif ($$self.$$.dirty[0] & /*groups, searchMode*/ 4194432) {\n\t\t\t//\n\t\t\t// Global styles for the entire picker\n\t\t\t//\n\t\t\t $$invalidate(17, pickerStyle = `\n  --font-family: ${FONT_FAMILY};\n  --num-groups: ${groups$1.length}; \n  --indicator-opacity: ${searchMode ? 0 : 1}; \n  --num-skintones: ${NUM_SKIN_TONES};`);\n\t\t}\n\n\t\tif ($$self.$$.dirty[1] & /*database*/ 512) {\n\t\t\t//\n\t\t\t// Set or update the preferred skin tone\n\t\t\t//\n\t\t\t {\n\t\t\t\tasync function updatePreferredSkinTone() {\n\t\t\t\t\tif (database) {\n\t\t\t\t\t\t$$invalidate(14, currentSkinTone = await database.getPreferredSkinTone());\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\t/* no await */\n\t\t\t\tupdatePreferredSkinTone();\n\t\t\t}\n\t\t}\n\n\t\tif ($$self.$$.dirty[1] & /*skinToneEmoji*/ 1024) {\n\t\t\t $$invalidate(19, skinTones = Array(NUM_SKIN_TONES).fill().map((_, i) => applySkinTone(skinToneEmoji, i)));\n\t\t}\n\n\t\tif ($$self.$$.dirty[0] & /*skinTones, currentSkinTone*/ 540672) {\n\t\t\t $$invalidate(16, skinToneButtonText = skinTones[currentSkinTone]);\n\t\t}\n\n\t\tif ($$self.$$.dirty[0] & /*i18n, currentSkinTone*/ 16385) {\n\t\t\t $$invalidate(18, skinToneButtonLabel = i18n.skinToneLabel.replace(\"{skinTone}\", i18n.skinTones[currentSkinTone]));\n\t\t}\n\n\t\tif ($$self.$$.dirty[1] & /*database*/ 512) {\n\t\t\t//\n\t\t\t// Set or update the favorites emojis\n\t\t\t//\n\t\t\t {\n\t\t\t\tasync function updateDefaultFavoriteEmojis() {\n\t\t\t\t\t$$invalidate(53, defaultFavoriteEmojis = (await Promise.all(MOST_COMMONLY_USED_EMOJI.map(unicode => database.getEmojiByUnicodeOrName(unicode)))).filter(Boolean)); // filter because in Jest tests we don't have all the emoji in the DB\n\t\t\t\t}\n\n\t\t\t\tif (database) {\n\t\t\t\t\t/* no await */\n\t\t\t\t\tupdateDefaultFavoriteEmojis();\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\tif ($$self.$$.dirty[1] & /*database, numColumns, defaultFavoriteEmojis*/ 12583424) {\n\t\t\t {\n\t\t\t\tasync function updateFavorites() {\n\t\t\t\t\tconst dbFavorites = await database.getTopFavoriteEmoji(numColumns);\n\t\t\t\t\tconst favorites = await summarizeEmojis(uniqBy([...dbFavorites, ...defaultFavoriteEmojis], _ => _.unicode || _.name).slice(0, numColumns));\n\t\t\t\t\t$$invalidate(20, currentFavorites = favorites);\n\t\t\t\t}\n\n\t\t\t\tif (database && defaultFavoriteEmojis) {\n\t\t\t\t\t/* no await */\n\t\t\t\t\tupdateFavorites();\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\tif ($$self.$$.dirty[1] & /*currentGroupIndex, computedIndicatorWidth*/ 18874368) {\n\t\t\t// TODO: Chrome has an unfortunate bug where we can't use a simple percent-based transform\n\t\t\t// here, becuause it's janky. You can especially see this on a Nexus 5.\n\t\t\t// So we calculate of the indicator and use exact pixel values in the animation instead\n\t\t\t// (where ResizeObserver is supported).\n\t\t\t {\n\t\t\t\t/* istanbul ignore if */\n\t\t\t\tif (resizeObserverSupported) {\n\t\t\t\t\t$$invalidate(10, indicatorStyle = `transform: translateX(${currentGroupIndex * computedIndicatorWidth}px);`); // exact pixels\n\t\t\t\t} else {\n\t\t\t\t\t$$invalidate(10, indicatorStyle = `transform: translateX(${currentGroupIndex * 100}%);`); // fallback to percent-based\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\tif ($$self.$$.dirty[0] & /*currentEmojis*/ 2) {\n\t\t\t// Some emojis have their ligatures rendered as two or more consecutive emojis\n\t\t\t// We want to treat these the same as unsupported emojis, so we compare their\n\t\t\t// widths against the baseline widths and remove them as necessary\n\t\t\t {\n\t\t\t\tconst zwjEmojisToCheck = currentEmojis.filter(emoji => emoji.unicode).filter(emoji => hasZwj(emoji) && !supportedZwjEmojis.has(emoji.unicode)); // filter custom emoji\n\n\t\t\t\tif (zwjEmojisToCheck.length) {\n\t\t\t\t\t// render now, check their length later\n\t\t\t\t\trAF(() => checkZwjSupportAndUpdate(zwjEmojisToCheck));\n\t\t\t\t} else {\n\t\t\t\t\t$$invalidate(1, currentEmojis = currentEmojis.filter(isZwjSupported));\n\n\t\t\t\t\trAF(() => {\n\t\t\t\t\t\t// reset scroll top to 0 when emojis change\n\t\t\t\t\t\tif (\"production\" !== \"test\") {\n\t\t\t\t\t\t\t$$invalidate(6, tabpanelElement.scrollTop = 0, tabpanelElement);\n\t\t\t\t\t\t}\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\tif ($$self.$$.dirty[0] & /*currentEmojis, currentFavorites*/ 1048578 | $$self.$$.dirty[1] & /*initialLoad*/ 524288) {\n\t\t\t {\n\t\t\t\t// consider initialLoad to be complete when the first tabpanel and favorites are rendered\n\t\t\t\tif (\"production\" !== \"production\" || false) {\n\t\t\t\t\tif (currentEmojis.length && currentFavorites.length && initialLoad) {\n\t\t\t\t\t\t$$invalidate(50, initialLoad = false);\n\t\t\t\t\t\trequestPostAnimationFrame(() => stop());\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\tif ($$self.$$.dirty[0] & /*searchMode, currentEmojis*/ 130 | $$self.$$.dirty[1] & /*customCategorySorting*/ 4096) {\n\t\t\t//\n\t\t\t// Derive currentEmojisWithCategories from currentEmojis. This is always done even if there\n\t\t\t// are no categories, because it's just easier to code the HTML this way.\n\t\t\t//\n\t\t\t {\n\t\t\t\tfunction calculateCurrentEmojisWithCategories() {\n\t\t\t\t\tif (searchMode) {\n\t\t\t\t\t\treturn [{ category: \"\", emojis: currentEmojis }];\n\t\t\t\t\t}\n\n\t\t\t\t\tconst categoriesToEmoji = new Map();\n\n\t\t\t\t\tfor (const emoji of currentEmojis) {\n\t\t\t\t\t\tconst category = emoji.category || \"\";\n\t\t\t\t\t\tlet emojis = categoriesToEmoji.get(category);\n\n\t\t\t\t\t\tif (!emojis) {\n\t\t\t\t\t\t\temojis = [];\n\t\t\t\t\t\t\tcategoriesToEmoji.set(category, emojis);\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\temojis.push(emoji);\n\t\t\t\t\t}\n\n\t\t\t\t\treturn [...categoriesToEmoji.entries()].map(([category, emojis]) => ({ category, emojis })).sort((a, b) => customCategorySorting(a.category, b.category));\n\t\t\t\t}\n\n\t\t\t\t$$invalidate(2, currentEmojisWithCategories = calculateCurrentEmojisWithCategories());\n\t\t\t}\n\t\t}\n\n\t\tif ($$self.$$.dirty[0] & /*activeSearchItem, currentEmojis*/ 258) {\n\t\t\t//\n\t\t\t// Handle active search item (i.e. pressing up or down while searching)\n\t\t\t//\n\t\t\t $$invalidate(25, activeSearchItemId = activeSearchItem !== -1 && currentEmojis[activeSearchItem].id);\n\t\t}\n\n\t\tif ($$self.$$.dirty[0] & /*skinTonePickerExpanded, skinToneDropdown*/ 10240) {\n\t\t\t// To make the animation nicer, change the z-index of the skintone picker button\n\t\t\t// *after* the animation has played. This makes it appear that the picker box\n\t\t\t// is expanding \"below\" the button\n\t\t\t {\n\t\t\t\tif (skinTonePickerExpanded) {\n\t\t\t\t\tskinToneDropdown.addEventListener(\n\t\t\t\t\t\t\"transitionend\",\n\t\t\t\t\t\t() => {\n\t\t\t\t\t\t\t$$invalidate(12, skinTonePickerExpandedAfterAnimation = true);\n\t\t\t\t\t\t},\n\t\t\t\t\t\t{ once: true }\n\t\t\t\t\t);\n\t\t\t\t} else {\n\t\t\t\t\t$$invalidate(12, skinTonePickerExpandedAfterAnimation = false);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t};\n\n\treturn [\n\t\ti18n,\n\t\tcurrentEmojis,\n\t\tcurrentEmojisWithCategories,\n\t\trawSearchText,\n\t\trootElement,\n\t\tbaselineEmoji,\n\t\ttabpanelElement,\n\t\tsearchMode,\n\t\tactiveSearchItem,\n\t\tmessage,\n\t\tindicatorStyle,\n\t\tskinTonePickerExpanded,\n\t\tskinTonePickerExpandedAfterAnimation,\n\t\tskinToneDropdown,\n\t\tcurrentSkinTone,\n\t\tactiveSkinTone,\n\t\tskinToneButtonText,\n\t\tpickerStyle,\n\t\tskinToneButtonLabel,\n\t\tskinTones,\n\t\tcurrentFavorites,\n\t\tscrollbarWidth,\n\t\tgroups$1,\n\t\tcurrentGroup,\n\t\tloaded,\n\t\tactiveSearchItemId,\n\t\tlabelWithSkin,\n\t\tcalculateEmojiGridWidth,\n\t\tcalculateIndicatorWidth,\n\t\tonSearchKeydown,\n\t\tonNavClick,\n\t\tonNavKeydown,\n\t\tonEmojiClick,\n\t\tonSkinToneOptionsClick,\n\t\tonClickSkinToneButton,\n\t\tonSkinToneOptionsKeydown,\n\t\tonSkinToneOptionsKeyup,\n\t\tonSkinToneOptionsFocusOut,\n\t\tlocale,\n\t\tdataSource,\n\t\tdatabase,\n\t\tskinToneEmoji,\n\t\tcustomEmoji,\n\t\tcustomCategorySorting,\n\t\tinput_input_handler,\n\t\tdiv3_binding,\n\t\tclick_handler,\n\t\tdiv9_binding,\n\t\tbutton1_binding,\n\t\tsection_binding\n\t];\n}\n\nclass Picker extends SvelteElement {\n\tconstructor(options) {\n\t\tsuper();\n\t\tthis.shadowRoot.innerHTML = `<style>:host{--emoji-padding:0.5rem;--emoji-size:1.375rem;--indicator-height:3px;--input-border-radius:0.5rem;--input-border-size:1px;--input-font-size:1rem;--input-line-height:1.5;--input-padding:0.25rem;--num-columns:8;--outline-size:2px;--border-size:1px;--skintone-border-radius:1rem;--category-font-size:1rem;display:flex;width:min-content;height:400px}:host,:host(.light){--background:#fff;--border-color:#e0e0e0;--indicator-color:#385ac1;--input-border-color:#999;--input-font-color:#111;--input-placeholder-color:#999;--outline-color:#999;--category-font-color:#111;--button-active-background:#e6e6e6;--button-hover-background:#d9d9d9}:host(.dark){--background:#222;--border-color:#444;--indicator-color:#5373ec;--input-border-color:#ccc;--input-font-color:#efefef;--input-placeholder-color:#ccc;--outline-color:#fff;--category-font-color:#efefef;--button-active-background:#555;--button-hover-background:#484848}@media(prefers-color-scheme:dark){:host{--background:#222;--border-color:#444;--indicator-color:#5373ec;--input-border-color:#ccc;--input-font-color:#efefef;--input-placeholder-color:#ccc;--outline-color:#fff;--category-font-color:#efefef;--button-active-background:#555;--button-hover-background:#484848}}button{margin:0;padding:0;border:none;background:none;box-shadow:none;cursor:pointer;-webkit-tap-highlight-color:transparent}button::-moz-focus-inner{border:0}input{padding:0;margin:0;line-height:1.15;font-family:inherit}input[type=search]{-webkit-appearance:none}:focus{outline:var(--outline-color) solid var(--outline-size);outline-offset:calc(-1*var(--outline-size))}:host([data-js-focus-visible]) :focus:not([data-focus-visible-added]){outline:none}:focus:not(:focus-visible){outline:none}.hide-focus{outline:none}*{box-sizing:border-box}.picker{contain:content;display:flex;flex-direction:column;background:var(--background);border:var(--border-size) solid var(--border-color);width:100%;height:100%;overflow:hidden;--total-emoji-size:calc(var(--emoji-size) + 2*var(--emoji-padding))}.sr-only{position:absolute;width:1px;height:1px;padding:0;margin:-1px;overflow:hidden;clip:rect(0,0,0,0);border:0}.hidden{opacity:0;pointer-events:none}.abs-pos{position:absolute;left:0;top:0}.gone{display:none!important}.cursor-pointer{cursor:pointer}.skintone-button-wrapper{background:var(--background);z-index:3}.skintone-button-wrapper.expanded{z-index:1}.skintone-list{position:absolute;right:0;top:0;z-index:2;overflow:visible;background:var(--background);border-bottom:var(--border-size) solid var(--border-color);border-radius:0 0 var(--skintone-border-radius) var(--skintone-border-radius);will-change:transform;transition:transform .2s ease-in-out;transform-origin:center 0}@media(prefers-reduced-motion:reduce){.skintone-list{transition-duration:1ms}}.skintone-list.no-animate{transition:none}.tabpanel{overflow-y:auto;-webkit-overflow-scrolling:touch;will-change:transform;min-height:0;flex:1;contain:content}.emoji-menu{display:grid;grid-template-columns:repeat(var(--num-columns),var(--total-emoji-size));justify-content:space-around;align-items:flex-start;width:100%}.category{padding:var(--emoji-padding);font-size:var(--category-font-size);color:var(--category-font-color)}.emoji,button.emoji{font-size:var(--emoji-size);display:flex;align-items:center;justify-content:center;border-radius:100%;height:var(--total-emoji-size);width:var(--total-emoji-size);line-height:1;overflow:hidden;font-family:var(--font-family)}@media(hover:hover) and (pointer:fine){.emoji:hover,button.emoji:hover{background:var(--button-hover-background)}}.emoji.active,.emoji:active,button.emoji.active,button.emoji:active{background:var(--button-active-background)}.custom-emoji{height:var(--total-emoji-size);width:var(--total-emoji-size);padding:var(--emoji-padding);object-fit:contain;pointer-events:none;background-repeat:no-repeat;background-position:50%;background-size:var(--emoji-size) var(--emoji-size)}.nav{display:grid;justify-content:space-between;contain:content}.nav,.nav-button{align-items:center}.nav-button{display:flex;justify-content:center}.indicator-wrapper{display:flex;border-bottom:1px solid var(--border-color)}.indicator{width:calc(100%/var(--num-groups));height:var(--indicator-height);opacity:var(--indicator-opacity);background-color:var(--indicator-color);will-change:transform,opacity;transition:opacity .1s linear,transform .25s ease-in-out}@media(prefers-reduced-motion:reduce){.indicator{will-change:opacity;transition:opacity .1s linear}}.pad-top{width:100%;height:var(--emoji-padding);z-index:3;background:var(--background)}.search-row{display:flex;align-items:center;position:relative;padding-left:var(--emoji-padding);padding-bottom:var(--emoji-padding)}.search-wrapper{flex:1;min-width:0}input.search{padding:var(--input-padding);border-radius:var(--input-border-radius);border:var(--input-border-size) solid var(--input-border-color);background:var(--background);color:var(--input-font-color);width:100%;font-size:var(--input-font-size);line-height:var(--input-line-height)}input.search::placeholder{color:var(--input-placeholder-color)}.favorites{display:flex;flex-direction:row;border-top:var(--border-size) solid var(--border-color);contain:content}.message{padding:var(--emoji-padding)}</style>`;\n\n\t\tinit(\n\t\t\tthis,\n\t\t\t{ target: this.shadowRoot },\n\t\t\tinstance,\n\t\t\tcreate_fragment,\n\t\t\tsafe_not_equal,\n\t\t\t{\n\t\t\t\tlocale: 38,\n\t\t\t\tdataSource: 39,\n\t\t\t\tskinToneEmoji: 41,\n\t\t\t\ti18n: 0,\n\t\t\t\tdatabase: 40,\n\t\t\t\tcustomEmoji: 42,\n\t\t\t\tcustomCategorySorting: 43\n\t\t\t},\n\t\t\t[-1, -1, -1]\n\t\t);\n\n\t\tif (options) {\n\t\t\tif (options.target) {\n\t\t\t\tinsert(options.target, this, options.anchor);\n\t\t\t}\n\n\t\t\tif (options.props) {\n\t\t\t\tthis.$set(options.props);\n\t\t\t\tflush();\n\t\t\t}\n\t\t}\n\t}\n\n\tstatic get observedAttributes() {\n\t\treturn [\n\t\t\t\"locale\",\n\t\t\t\"dataSource\",\n\t\t\t\"skinToneEmoji\",\n\t\t\t\"i18n\",\n\t\t\t\"database\",\n\t\t\t\"customEmoji\",\n\t\t\t\"customCategorySorting\"\n\t\t];\n\t}\n\n\tget locale() {\n\t\treturn this.$$.ctx[38];\n\t}\n\n\tset locale(locale) {\n\t\tthis.$set({ locale });\n\t\tflush();\n\t}\n\n\tget dataSource() {\n\t\treturn this.$$.ctx[39];\n\t}\n\n\tset dataSource(dataSource) {\n\t\tthis.$set({ dataSource });\n\t\tflush();\n\t}\n\n\tget skinToneEmoji() {\n\t\treturn this.$$.ctx[41];\n\t}\n\n\tset skinToneEmoji(skinToneEmoji) {\n\t\tthis.$set({ skinToneEmoji });\n\t\tflush();\n\t}\n\n\tget i18n() {\n\t\treturn this.$$.ctx[0];\n\t}\n\n\tset i18n(i18n) {\n\t\tthis.$set({ i18n });\n\t\tflush();\n\t}\n\n\tget database() {\n\t\treturn this.$$.ctx[40];\n\t}\n\n\tset database(database) {\n\t\tthis.$set({ database });\n\t\tflush();\n\t}\n\n\tget customEmoji() {\n\t\treturn this.$$.ctx[42];\n\t}\n\n\tset customEmoji(customEmoji) {\n\t\tthis.$set({ customEmoji });\n\t\tflush();\n\t}\n\n\tget customCategorySorting() {\n\t\treturn this.$$.ctx[43];\n\t}\n\n\tset customCategorySorting(customCategorySorting) {\n\t\tthis.$set({ customCategorySorting });\n\t\tflush();\n\t}\n}\n\nclass Picker$1 extends Picker {\n  constructor (props) {\n    // Make the API simpler, directly pass in the props\n    super({ props });\n  }\n\n  disconnectedCallback () {\n    this.$destroy();\n  }\n\n  static get observedAttributes () {\n    return ['locale', 'data-source', 'skin-tone-emoji'] // complex objects aren't supported, also use kebab-case\n  }\n\n  // via https://github.com/sveltejs/svelte/issues/3852#issuecomment-665037015\n  attributeChangedCallback (attrName, oldValue, newValue) {\n    super.attributeChangedCallback(\n      attrName.replace(/-([a-z])/g, (_, up) => up.toUpperCase()),\n      oldValue,\n      newValue\n    );\n  }\n}\n\ncustomElements.define('emoji-picker', Picker$1);\n\nexport default Picker$1;\n"]},"metadata":{},"sourceType":"module"}