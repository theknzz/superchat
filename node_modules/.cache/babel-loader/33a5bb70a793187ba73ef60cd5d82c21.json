{"ast":null,"code":"export var sendMessage=function sendMessage(message){return function(dispatch,getState,_ref){var getFirebase=_ref.getFirebase,getFirestore=_ref.getFirestore;var firebase=getFirebase();var firestore=firebase.firestore();var auth=firebase.auth();var _auth$currentUser=auth.currentUser,uid=_auth$currentUser.uid,photoURL=_auth$currentUser.photoURL;firestore.collection('messages').add({content:message,uid:uid,photoURL:photoURL,createAt:firebase.firestore.FieldValue.serverTimestamp()}).then(function(res){dispatch({type:'MESSAGE_SENT'});}).catch(function(err){console.error(err);dispatch({type:'MESSAGE_ERROR'});});};};","map":{"version":3,"sources":["/home/joaquim/internship/superchat/src/store/actions/chatActions.js"],"names":["sendMessage","message","dispatch","getState","getFirebase","getFirestore","firebase","firestore","auth","currentUser","uid","photoURL","collection","add","content","createAt","FieldValue","serverTimestamp","then","res","type","catch","err","console","error"],"mappings":"AAAA,MAAO,IAAMA,CAAAA,WAAW,CAAG,QAAdA,CAAAA,WAAc,CAACC,OAAD,CAAa,CACpC,MAAO,UAAEC,QAAF,CAAYC,QAAZ,MAAwD,IAAhCC,CAAAA,WAAgC,MAAhCA,WAAgC,CAAnBC,YAAmB,MAAnBA,YAAmB,CAE3D,GAAMC,CAAAA,QAAQ,CAAGF,WAAW,EAA5B,CACA,GAAMG,CAAAA,SAAS,CAAGD,QAAQ,CAACC,SAAT,EAAlB,CACA,GAAMC,CAAAA,IAAI,CAAGF,QAAQ,CAACE,IAAT,EAAb,CAJ2D,sBAMjCA,IAAI,CAACC,WAN4B,CAMnDC,GANmD,mBAMnDA,GANmD,CAM9CC,QAN8C,mBAM9CA,QAN8C,CAQ3DJ,SAAS,CAACK,UAAV,CAAqB,UAArB,EAAiCC,GAAjC,CAAqC,CACjCC,OAAO,CAAEb,OADwB,CAEjCS,GAAG,CAAHA,GAFiC,CAGjCC,QAAQ,CAARA,QAHiC,CAIjCI,QAAQ,CAAET,QAAQ,CAACC,SAAT,CAAmBS,UAAnB,CAA8BC,eAA9B,EAJuB,CAArC,EAKGC,IALH,CAKS,SAAAC,GAAG,CAAI,CACZjB,QAAQ,CAAC,CAACkB,IAAI,CAAE,cAAP,CAAD,CAAR,CACH,CAPD,EAOGC,KAPH,CAOU,SAAAC,GAAG,CAAI,CACbC,OAAO,CAACC,KAAR,CAAcF,GAAd,EACApB,QAAQ,CAAC,CAAEkB,IAAI,CAAE,eAAR,CAAD,CAAR,CACH,CAVD,EAWH,CAnBD,CAoBH,CArBM","sourcesContent":["export const sendMessage = (message) => {\n    return ( dispatch, getState, { getFirebase, getFirestore }) => {\n\n        const firebase = getFirebase();\n        const firestore = firebase.firestore();\n        const auth = firebase.auth();\n\n        const { uid, photoURL } = auth.currentUser;\n\n        firestore.collection('messages').add({\n            content: message,\n            uid,\n            photoURL,\n            createAt: firebase.firestore.FieldValue.serverTimestamp(),\n        }).then( res => {\n            dispatch({type: 'MESSAGE_SENT'});\n        }).catch( err => {\n            console.error(err);\n            dispatch({ type: 'MESSAGE_ERROR'})\n        });\n    }\n}"]},"metadata":{},"sourceType":"module"}