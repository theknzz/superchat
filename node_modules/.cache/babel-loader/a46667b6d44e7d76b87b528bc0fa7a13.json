{"ast":null,"code":"export const sendMessage = message => {\n  return (dispatch, getState, {\n    getFirebase,\n    getFirestore\n  }) => {\n    const firebase = getFirebase();\n    const firestore = firebase.firestore();\n    const auth = firebase.auth();\n    const {\n      uid,\n      photoUrl\n    } = auth.currentUser;\n    console.log('uid: ' + uid + ' photoUrl: ' + photoUrl);\n    firestore.collection('messages').add({\n      content: message,\n      uid,\n      photoUrl,\n      createAt: firebase.firestore.FieldValue.serverTimestamp()\n    }).then(res => {\n      console.log(res);\n      dispatch({\n        type: 'MESSAGE_SENT'\n      });\n    }).catch(err => {\n      console.error(err);\n      dispatch({\n        type: 'MESSAGE_ERROR'\n      });\n    });\n  };\n};","map":{"version":3,"sources":["/home/joaquim/internship/superchat/src/store/actions/chatActions.js"],"names":["sendMessage","message","dispatch","getState","getFirebase","getFirestore","firebase","firestore","auth","uid","photoUrl","currentUser","console","log","collection","add","content","createAt","FieldValue","serverTimestamp","then","res","type","catch","err","error"],"mappings":"AAAA,OAAO,MAAMA,WAAW,GAAIC,OAAD,IAAa;AACpC,SAAO,CAAEC,QAAF,EAAYC,QAAZ,EAAsB;AAAEC,IAAAA,WAAF;AAAeC,IAAAA;AAAf,GAAtB,KAAwD;AAE3D,UAAMC,QAAQ,GAAGF,WAAW,EAA5B;AACA,UAAMG,SAAS,GAAGD,QAAQ,CAACC,SAAT,EAAlB;AACA,UAAMC,IAAI,GAAGF,QAAQ,CAACE,IAAT,EAAb;AAEA,UAAM;AAAEC,MAAAA,GAAF;AAAOC,MAAAA;AAAP,QAAoBF,IAAI,CAACG,WAA/B;AAEAC,IAAAA,OAAO,CAACC,GAAR,CAAY,UAAUJ,GAAV,GAAgB,aAAhB,GAAgCC,QAA5C;AACAH,IAAAA,SAAS,CAACO,UAAV,CAAqB,UAArB,EAAiCC,GAAjC,CAAqC;AACjCC,MAAAA,OAAO,EAAEf,OADwB;AAEjCQ,MAAAA,GAFiC;AAGjCC,MAAAA,QAHiC;AAIjCO,MAAAA,QAAQ,EAAEX,QAAQ,CAACC,SAAT,CAAmBW,UAAnB,CAA8BC,eAA9B;AAJuB,KAArC,EAKGC,IALH,CAKSC,GAAG,IAAI;AACZT,MAAAA,OAAO,CAACC,GAAR,CAAYQ,GAAZ;AACAnB,MAAAA,QAAQ,CAAC;AAACoB,QAAAA,IAAI,EAAE;AAAP,OAAD,CAAR;AACH,KARD,EAQGC,KARH,CAQUC,GAAG,IAAI;AACbZ,MAAAA,OAAO,CAACa,KAAR,CAAcD,GAAd;AACAtB,MAAAA,QAAQ,CAAC;AAAEoB,QAAAA,IAAI,EAAE;AAAR,OAAD,CAAR;AACH,KAXD;AAYH,GArBD;AAsBH,CAvBM","sourcesContent":["export const sendMessage = (message) => {\n    return ( dispatch, getState, { getFirebase, getFirestore }) => {\n\n        const firebase = getFirebase();\n        const firestore = firebase.firestore();\n        const auth = firebase.auth();\n\n        const { uid, photoUrl } = auth.currentUser;\n\n        console.log('uid: ' + uid + ' photoUrl: ' + photoUrl)\n        firestore.collection('messages').add({\n            content: message,\n            uid,\n            photoUrl,\n            createAt: firebase.firestore.FieldValue.serverTimestamp(),\n        }).then( res => {\n            console.log(res);\n            dispatch({type: 'MESSAGE_SENT'});\n        }).catch( err => {\n            console.error(err);\n            dispatch({ type: 'MESSAGE_ERROR'})\n        });\n    }\n}"]},"metadata":{},"sourceType":"module"}