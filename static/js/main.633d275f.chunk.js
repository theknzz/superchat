(this.webpackJsonpsuperchat=this.webpackJsonpsuperchat||[]).push([[0],{210:function(e,n,t){},396:function(e,n,t){"use strict";t.r(n);var r=t(9),i=t(3),o=t(1),c=t.n(o),a=t(80),u=t.n(a),s=(t(210),t(7)),d=t(15),l=t(8);function b(){var e=Object(s.a)(["\n    background-color: #0c4740;\n    padding: 10px 20px;\n    border-radius: 20px;\n    margin: 10px;\n    max-width: 600px;\n    overflow: auto;\n    word-wrap: break-word;\n    font-size: 15px;\n    color: white;\n    align-self: center;\n"]);return b=function(){return e},e}function f(){var e=Object(s.a)(["\n    height: 35px;\n    width: 35px;\n    border-radius: 50%;\n    margin: 10px;\n"]);return f=function(){return e},e}function h(){var e=Object(s.a)(["\n    display: flex;\n    flex-direction: ",";\n    margin: 15px 5px;\n"]);return h=function(){return e},e}var j=l.a.div(h(),(function(e){return"sent"===e.status?"row-reverse":"row"})),p=l.a.img(f()),O=l.a.div(b()),g=function(e){var n=e.content,t=e.photoUrl,r=e.status;return Object(i.jsxs)(j,{status:r,children:[Object(i.jsx)(O,{children:n}),Object(i.jsx)(p,{src:t,alt:"photo"})]})},x=t(22),v=t(204);function m(){var e=Object(s.a)(["\n    flex: 0 10vw;\n    color: lightgreen;\n    font-size: 2em;\n    background-color: #262d31;\n    border: none;\n    &: disabled {\n        opacity: 0.2;\n        color: lightgrey;\n        cursor: not-allowed;\n    }\n"]);return m=function(){return e},e}function y(){var e=Object(s.a)(["\n    flex: 1;\n    font-size: 1em;\n    background-color: #33383b;\n    color: white;\n    padding: 0px 20px;\n    border:none;\n    border-radius: 100px;\n    margin: 20px 0px;\n    margin-left: 40px;\n    &: focus {\n        outline: none;\n    }\n    &: disabled {\n        cursor: not-allowed;\n    }\n"]);return y=function(){return e},e}function E(){var e=Object(s.a)(["\n    display: flex;\n    height: 10vh;\n    background-color: lightgreen;\n    bottom: 0;\n    width: 100%;\n    position: fixed;\n    background-color: #262d31;\n"]);return E=function(){return e},e}var S=l.a.form(E()),w=l.a.input(y()),I=l.a.button(m()),R=Object(x.b)((function(e){return{isIn:e.auth.isAuthenticated}}),(function(e){return{send:function(n){return e(function(e){return function(n,t,r){var i=r.getFirebase,o=(r.getFirestore,i()),c=o.firestore(),a=o.auth().currentUser,u=a.uid,s=a.photoURL;c.collection("messages").add({content:e,uid:u,photoURL:s,createAt:o.firestore.FieldValue.serverTimestamp()}).then((function(e){n({type:"MESSAGE_SENT"})})).catch((function(e){console.error(e),n({type:"MESSAGE_ERROR"})}))}}(n))}}}))((function(e){var n=e.send,t=e.isIn,r=e.marker,c=Object(o.useState)(""),a=Object(v.a)(c,2),u=a[0],s=a[1],l=Object(d.useFirebase)().auth();return Object(i.jsx)(i.Fragment,{children:Object(i.jsxs)(S,{onSubmit:function(e){e.preventDefault(),console.log(e.target),console.log(u),l.currentUser&&(n(u),s(""),r.current.scrollIntoView({behavior:"smooth"}))},disabled:!t,children:[Object(i.jsx)(w,{type:"text",onChange:function(e){console.log("input changed"),s(e.target.value)},value:u,disabled:!t}),Object(i.jsx)(I,{disabled:!u,children:"\u27a1"})]})})}));function F(){var e=Object(s.a)(["\n"]);return F=function(){return e},e}function U(){var e=Object(s.a)(["\n    display: ",";\n    color: white;\n    justify-content: center;\n    width: 100%;\n    position: fixed;\n    bottom: 10vh;\n    & > p {\n        background-color: #bbb;\n        border-radius: 25px;\n        padding: 15px;\n        opacity: 0.8;\n        font-size: 0.7em;\n    }\n"]);return U=function(){return e},e}function A(){var e=Object(s.a)(["\n    display: flex;\n    flex-flow: column wrap;\n"]);return A=function(){return e},e}function k(){var e=Object(s.a)(["\n    padding: 20px;\n    display: flex;\n    flex-direction: column;\n    min-height: 80vh;\n    margin: 10vh 0 15vh;\n    overflow-y: auto;\n"]);return k=function(){return e},e}var G=l.a.div(k()),L=l.a.div(A()),z=l.a.div(U(),(function(e){return e.isIn?"none":"flex"})),C=l.a.a(F()),_=Object(x.b)((function(e){return{messages:e.firestore.ordered.messages,isIn:e.auth.isAuthenticated}}),(function(e){return{update:function(n){return e(function(e){return function(n,t,r){r.getFirebase,n({type:"UPDATE",content:e})}}(n))}}}))((function(e){var n=e.messages,t=e.isIn,r=e.update,c=Object(d.useFirebase)().auth();Object(d.useFirestoreConnect)([{collection:"messages",orderBy:["createAt","asc"]}]),Object(o.useEffect)((function(){c&&r(c.currentUser)}),[n]);var a=n&&n.map((function(e){return Object(i.jsx)(g,{content:e.content,photoUrl:e.photoURL,status:null===c.currentUser||c.currentUser.uid!==e.uid?"received":"sent"},e.id)})),u=Object(o.useRef)();return Object(i.jsx)(i.Fragment,{children:Object(i.jsxs)(L,{children:[Object(i.jsx)(z,{isIn:t,children:Object(i.jsx)("p",{children:"You need to sign in first!"})}),Object(i.jsxs)(G,{children:[a,Object(i.jsx)(C,{children:"  "}),Object(i.jsx)(C,{ref:u})]}),Object(i.jsx)(R,{marker:u})]})})}));function T(){var e=Object(s.a)(["\n    background-color: #2a2f32;\n    color: lightgrey;\n    font-size: 1.5em;\n    margin: 15px;\n    border: none;\n"]);return T=function(){return e},e}function P(){var e=Object(s.a)(["\n    display: flex;\n"]);return P=function(){return e},e}var M=l.a.div(P()),N=l.a.button(T()),D=Object(x.b)((function(e){return{message:e.auth.authError,isIn:e.auth.isAuthenticated}}),(function(e){return{signIn:function(){return e((function(e,n,t){var r=(0,t.getFirebase)(),i=r.auth(),o=new r.auth.GoogleAuthProvider;i.signInWithPopup(o).then((function(n){e({type:"LOGIN_SUCCESS",user:i.currentUser.displayName})})).catch((function(n){e({type:"LOGIN_ERROR"}),console.error("login error: "+n.message)}))}))},signOut:function(){return e((function(e,n,t){(0,t.getFirebase)().auth().signOut().then((function(n){e({type:"LOGOUT_SUCCESS"})})).catch((function(n){console.error(n),e({type:"LOGOUT_ERROR"})}))}))}}}))((function(e){var n=e.isIn?Object(i.jsx)(N,{onClick:function(){return e.signOut()},children:"Sign Out"}):Object(i.jsx)(N,{onClick:function(){return e.signIn()},children:"Sign In"});return Object(i.jsx)(M,{children:n})}));function B(){var e=Object(s.a)(["\n    flex: 1;\n    margin: 20px;\n    color: orange;\n"]);return B=function(){return e},e}function V(){var e=Object(s.a)(["\n    height: 10vh;\n    display: flex;\n    background-color: #2a2f32;\n    width: 100%;\n    box-sizing: border-box;\n    position: fixed;\n"]);return V=function(){return e},e}var J=l.a.div(V()),W=l.a.h1(B()),q=function(e){return Object(i.jsxs)(J,{children:[Object(i.jsx)(W,{children:"\u269b\ufe0f\ud83d\udd25\ud83d\udcac"}),Object(i.jsx)(D,{})]})},H=function(e){return Object(i.jsxs)(o.Fragment,{children:[Object(i.jsx)(q,{}),Object(i.jsx)(_,{})]})},Y=function(e){e&&e instanceof Function&&t.e(3).then(t.bind(null,397)).then((function(n){var t=n.getCLS,r=n.getFID,i=n.getFCP,o=n.getLCP,c=n.getTTFB;t(e),r(e),i(e),o(e),c(e)}))},Z=t(23),K=t(203),X=t(42),Q={authError:"",isAuthenticated:!1},$=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Q,n=arguments.length>1?arguments[1]:void 0;switch(n.type){case"LOGIN_SUCCESS":return Object(r.a)(Object(r.a)({},e),{},{authError:"hello "+n.user,isAuthenticated:!0});case"LOGIN_ERROR":return Object(r.a)(Object(r.a)({},e),{},{authError:"Login failed",isAuthenticated:!1});case"LOGOUT_SUCCESS":return Object(r.a)(Object(r.a)({},e),{},{authError:null,isAuthenticated:!1});case"LOGOUT_ERROR":return Object(r.a)(Object(r.a)({},e),{},{authError:"Logout failed",isAuthenticated:!0});case"UPDATE":return null!==n.content?{authError:null,isAuthenticated:!0}:e;default:return e}},ee={output:""},ne=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ee,n=arguments.length>1?arguments[1]:void 0;switch(n.type){case"MESSAGE_SENT":return Object(r.a)(Object(r.a)({},e),{},{output:""});case"MESSAGE_ERROR":return Object(r.a)(Object(r.a)({},e),{},{output:"Some problem while trying to send the message!"});default:return e}},te=Object(Z.c)({firebase:d.firebaseReducer,firestore:X.firestoreReducer,auth:$,chat:ne}),re=t(81);t(199),t(394);re.a.initializeApp({apiKey:"AIzaSyCY2OoqbWde2rLJjutSIFHMfMeqrjjG7Xs",authDomain:"my-superchat-knzz.firebaseapp.com",databaseURL:"https://my-superchat-knzz.firebaseio.com",projectId:"my-superchat-knzz",storageBucket:"my-superchat-knzz.appspot.com",messagingSenderId:"918033254761",appId:"1:918033254761:web:29579e9e455036d70115f8",measurementId:"G-HVPWZZGMGV"}),re.a.firestore();var ie=re.a,oe=[K.a.withExtraArgument({getFirebase:d.getFirebase,getFirestore:X.getFirestore})],ce=Object(Z.e)(te,Object(Z.d)(Z.a.apply(void 0,oe))),ae={firebase:ie,config:{userProfile:"users",useFirestoreForProfile:!0},dispatch:ce.dispatch,createFirestoreInstance:X.createFirestoreInstance};u.a.render(Object(i.jsx)(x.a,{store:ce,children:Object(i.jsx)(d.ReactReduxFirebaseProvider,Object(r.a)(Object(r.a)({},ae),{},{children:Object(i.jsx)(c.a.StrictMode,{children:Object(i.jsx)(H,{})})}))}),document.getElementById("root")),Y()}},[[396,1,2]]]);
//# sourceMappingURL=main.633d275f.chunk.js.map